<!DOCTYPE html><html lang="zh-cn"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="generator" content="MBRjun-Blog"><title>原神私服 Android 游玩教程 (免 root) - MBRjun-Blog</title><meta name="author" content="MBRjun"><meta name="keywords" content="MBRjun,技术,Linux,服务器,软路由,PVE,原神,博客,B站,"><link rel="icon" href="https://cos.mbrjun.cn/PICS/LG4v3avatar144px.jpg"><link rel="alternate" type="application/atom+xml" title="RSS" href="/atom.xml"><script type="application/ld+json">{"@context":"http://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"MBRjun","sameAs":["https://github.com/MBRjun","https://twitter.com/MBRjun","mailto:mbrjun@foxmail.com"],"image":"https://cos.mbrjun.cn/PICS/LG4v3avatar144px.jpg"},"articleBody":"由于 Google 的限制和一些其他原因，在 Android 上游玩原神私服并没有 iOS、Windows 这么容易\n\n\n\n准备材料\n一台能读写 &#x2F;system 分区的 Android 手机（或：一台安装了 Magisk 的 Android 手机） 有人搞出来免root端了，此条件不再必须\n私服客户端 v2.6 或者 v2.7\n一台私服服务器\nGrasscutter\nmitmproxy\nWi-Fi\n\n教程先把 Grasscutter 配置好，不同系统配置方法不一样，基本概括为以下几点\n\n下载 Gresscutter：https://github.com/Grasscutters/Grasscutter/releases\n下载 Java（JDK）\n运行 Gresscutter\n\n搭建Grasscutter可以去看 BLxcwg666 的教程\n安装好 Gresscutter 之后，服务器随便找个地方新建个 proxy.py，放下面的内容\n12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576####   Copyright (C) 2002-2022 MlgmXyysd All Rights Reserved.#######   Genshin Impact script for mitmproxy##   https://github.com/MlgmXyysd/##   *Original fiddler script from https://github.lunatic.moe/fiddlerscript##   Environment requirement:#     - mitmdump from mitmproxy##   @author MlgmXyysd#   @version 1.1###from mitmproxy import httpfrom proxy_config import USE_SSLfrom proxy_config import REMOTE_HOSTfrom proxy_config import REMOTE_PORTclass MlgmXyysd_Genshin_Impact_Proxy:    LIST_DOMAINS = [        &quot;api-os-takumi.mihoyo.com&quot;,        &quot;hk4e-api-os-static.mihoyo.com&quot;,        &quot;hk4e-sdk-os.mihoyo.com&quot;,        &quot;dispatchosglobal.yuanshen.com&quot;,        &quot;osusadispatch.yuanshen.com&quot;,        &quot;account.mihoyo.com&quot;,        &quot;log-upload-os.mihoyo.com&quot;,        &quot;dispatchcntest.yuanshen.com&quot;,        &quot;devlog-upload.mihoyo.com&quot;,        &quot;webstatic.mihoyo.com&quot;,        &quot;log-upload.mihoyo.com&quot;,        &quot;hk4e-sdk.mihoyo.com&quot;,        &quot;api-beta-sdk.mihoyo.com&quot;,        &quot;api-beta-sdk-os.mihoyo.com&quot;,        &quot;cnbeta01dispatch.yuanshen.com&quot;,        &quot;dispatchcnglobal.yuanshen.com&quot;,        &quot;cnbeta02dispatch.yuanshen.com&quot;,        &quot;sdk-os-static.mihoyo.com&quot;,        &quot;webstatic-sea.mihoyo.com&quot;,        &quot;webstatic-sea.hoyoverse.com&quot;,        &quot;hk4e-sdk-os-static.hoyoverse.com&quot;,        &quot;sdk-os-static.hoyoverse.com&quot;,        &quot;api-account-os.hoyoverse.com&quot;,        &quot;hk4e-sdk-os.hoyoverse.com&quot;,        &quot;overseauspider.yuanshen.com&quot;,        &quot;gameapi-account.mihoyo.com&quot;,        &quot;minor-api.mihoyo.com&quot;,        &quot;public-data-api.mihoyo.com&quot;,        &quot;uspider.yuanshen.com&quot;,        &quot;sdk-static.mihoyo.com&quot;,        &quot;abtest-api-data-sg.hoyoverse.com&quot;,        &quot;log-upload-os.hoyoverse.com&quot;    ]    def request(self, flow: http.HTTPFlow) -&gt; None:        if flow.request.host in self.LIST_DOMAINS:            if USE_SSL:                flow.request.scheme = &quot;https&quot;            else:                flow.request.scheme = &quot;http&quot;            flow.request.host = REMOTE_HOST            flow.request.port = REMOTE_PORTaddons = [\tMlgmXyysd_Genshin_Impact_Proxy()]\n\nCA 安装然后把 mitmproxy 的证书安装到手机里自带的证书是用户目录下的 .mitmproxy 里面的 mitmproxy-ca-cert.cer\n手机插数据线到电脑，或者用传输工具，把 mitmproxy-ca-cert.cer 拷贝到手机的存储里（ &#x2F;sdcard）然后进入手机上的 设置 &gt; 安全性和隐私 &gt; 加密与凭据 &gt; 安装证书 &gt; CA 证书（不同手机可能设置方法略有差异，可以尝试在设置内搜索 CA，或者百度一下）安装你刚刚传进去的 mitmproxy-ca-cert.cer\nmitmproxy然后进入 mitmproxy 安装目录，执行：\n1mitmweb -s proxy.py --ssl-insecure --set block_global=false --listen-port 1145 --certs &quot;Genshin Impact.pem&quot;\n\n注意：\n\nproxy.py 替换为上面你保存的 proxy.py 的路径\n监听端口随意 1-65535，选择一个不冲突的端口，如果冲突了后面可能会报错 WinError，不建议：7890 8080，容易被扫描到，记下这个端口\n后面可以用 –certs 引入自己的证书，不需要引入自己的证书可以直接删除该参数\n\n如果是自己的证书，CA 请使用 v3 版本（OpenSSL 默认 v1)，私钥请选择 RSA 2048，如果证书开头是 -----BEGIN RSA PRIVATE KEY-----，改成-----BEGIN PRIVATE KEY\n证书移动至 SYSTEM TRUST如果使用上面提供的修改版客户端，就不需要执行这个步骤了（如果有问题，你还是可以试试执行下这个步骤\n需要使用 Magisk\nMagisk 刷入 https://github.com/Magisk-Modules-Repo/movecert 模块，重启如果无法刷入，尝试使用兼容模式刷入\n\nMagisk 是啥？root 手机用的，还有很多其他功能需要解锁 Bootloader 才能安装 Magisk，Magisk 不同设备安装方法不同，网上搜一下吧\n\n代理配置进入你手机的 Wi-Fi 配置界面，点开你 Wi-Fi 的详细信息（，部分手机：点开编辑页面），找到设置代理，代理模式改为手动代理服务器设置为你私服的 IP，端口填写上面配置的端口，然后保存\n完成去 Google Play 下载 Genshin Impact下载文章开头的私服客户端，应该可以正常游玩了（注意：官网下的连不上私服）\n\n关于 Android 一些限制：原神不会信任 USER TRUST 的证书，必须安装到 SYSTEM TRUST，私服客户端忽略这个限制\n有问题可以底下评论反馈，文章会及时修改。\n","dateCreated":"2022-05-22T15:14:00+08:00","dateModified":"2022-07-25T21:38:52+08:00","datePublished":"2022-05-22T15:14:00+08:00","description":"由于 Google 的限制和一些其他原因，在 Android 上游玩原神私服并没有 iOS、Windows 这么容易","headline":"原神私服 Android 游玩教程 (免 root)","image":["https://cos.mbrjun.cn/IMGS/2022/05/22/ws.jpg"],"mainEntityOfPage":{"@type":"WebPage","@id":"https://www.mbrjun.cn/archives/454/"},"publisher":{"@type":"Organization","name":"MBRjun","sameAs":["https://github.com/MBRjun","https://twitter.com/MBRjun","mailto:mbrjun@foxmail.com"],"image":"https://cos.mbrjun.cn/PICS/LG4v3avatar144px.jpg","logo":{"@type":"ImageObject","url":"https://cos.mbrjun.cn/PICS/LG4v3avatar144px.jpg"}},"url":"https://www.mbrjun.cn/archives/454/","keywords":"原神, Grasscutter, mitmproxy, 私服, Genshin Impact, 原神私服","thumbnailUrl":"https://cos.mbrjun.cn/IMGS/2022/05/22/ws.jpg"}</script><meta name="description" content="由于 Google 的限制和一些其他原因，在 Android 上游玩原神私服并没有 iOS、Windows 这么容易"><meta property="og:type" content="blog"><meta property="og:title" content="原神私服 Android 游玩教程 (免 root)"><meta property="og:url" content="https://www.mbrjun.cn/archives/454/index.html"><meta property="og:site_name" content="MBRjun-Blog"><meta property="og:description" content="由于 Google 的限制和一些其他原因，在 Android 上游玩原神私服并没有 iOS、Windows 这么容易"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://cos.mbrjun.cn/IMGS/2022/05/29/eu.png"><meta property="article:published_time" content="2022-05-22T07:14:00.000Z"><meta property="article:modified_time" content="2022-07-25T13:38:52.000Z"><meta property="article:author" content="MBRjun"><meta property="article:tag" content="原神"><meta property="article:tag" content="Grasscutter"><meta property="article:tag" content="mitmproxy"><meta property="article:tag" content="私服"><meta property="article:tag" content="Genshin Impact"><meta property="article:tag" content="原神私服"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://cos.mbrjun.cn/IMGS/2022/05/29/eu.png"><meta name="twitter:creator" content="@MBRjun"><meta property="og:image" content="https://cos.mbrjun.cn/PICS/LG4v3avatar144px.jpg"><meta property="og:image" content="https://cos.mbrjun.cn/IMGS/2022/05/22/ws.jpg"><meta class="swiftype" name="image" data-type="enum" content="https://cos.mbrjun.cn/IMGS/2022/05/22/ws.jpg"><!--STYLES--><link rel="stylesheet" href="/assets/css/style.min.css?v=d74460a655d91b7b6cfe45a709f04c71847a7578"><!--STYLES END--><!--SCRIPTS--><script async="" defer="" src="/assets/js/script.min.js?v=d74460a655d91b7b6cfe45a709f04c71847a7578"></script><!--SCRIPTS END--><!--PRELOAD--><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="dns-prefetch" href="//github.githubassets.com"><link rel="dns-prefetch" href="//avatars.githubusercontent.com"><link rel="preconnect" href="https://cos.mbrjun.cn"><link rel="preload" as="font" crossorigin="anonymous" type="font/woff2" href="/assets/fonts/GoogleSansDisplay-BR.woff2"><link rel="preload" as="font" crossorigin="anonymous" type="font/woff2" href="/assets/fonts/GoogleSansDisplay-LR.woff2"><link rel="preload" as="font" crossorigin="anonymous" type="font/woff2" href="/assets/fonts/fa-solid-900.woff2"><link rel="preload" as="font" crossorigin="anonymous" type="font/woff2" href="/assets/fonts/fa-brands-400.woff2"><!--PRELOAD END--><script>"use strict";var scripts=["/assets/js/webp-polyfill.min.js?v=1.0.2"];function parallelLoadScripts(e,t){"object"!=typeof e&&(e=[e]);for(var n=document.getElementsByTagName("head")[0]||document.documentElement,o=[],l=0,i=0;i<e.length;i++)o[i]=document.createElement("script"),o[i].setAttribute("type","text/javascript"),o[i].onload=o[i].onreadystatechange=function(){l++,this.onload=this.onreadystatechange=null,this.parentNode.removeChild(this),l===e.length&&"function"==typeof t&&t()},o[i].setAttribute("src",e[i]),n.appendChild(o[i])}"ActiveXObject"in window&&parallelLoadScripts(scripts,function(){console.log("[hexo-webp-polyfill] polyfilling document"),(new webpHero.WebpMachine).polyfillDocument()});</script></head><body><div id="blog"><!-- Define author's picture --><header id="header" data-behavior="2"><i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i><div class="header-title"><a class="header-title-link" href="/" aria-label="">MBRjun-Blog</a></div><a class="header-right-picture" href="/about" aria-label="打开链接: /about"><img class="header-picture" src="https://cos.mbrjun.cn/PICS/LG4v3avatar144px.jpg" alt="作者的图片"></a></header><!-- Define author's picture --><nav id="sidebar" data-behavior="2"><div class="sidebar-container"><div class="sidebar-profile"><a href="/#about" aria-label="阅读有关作者的更多信息"><img class="sidebar-profile-picture" src="https://cos.mbrjun.cn/PICS/LG4v3avatar144px.jpg" alt="作者的图片"></a><h4 class="sidebar-profile-name">MBRjun</h4><h5 class="sidebar-profile-bio"><p>我们生活在大地上，但我们的梦想超越天空</p></h5></div><ul class="sidebar-buttons"><li class="sidebar-button"><a class="sidebar-button-link" href="/" rel="noopener" title="首页"><i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i> <span class="sidebar-button-desc">首页</span></a></li><li class="sidebar-button"><a class="sidebar-button-link" href="/all-categories" rel="noopener" title="分类"><i class="sidebar-button-icon fa fa-bookmark" aria-hidden="true"></i> <span class="sidebar-button-desc">分类</span></a></li><li class="sidebar-button"><a class="sidebar-button-link" href="/all-tags" rel="noopener" title="标签"><i class="sidebar-button-icon fa fa-tags" aria-hidden="true"></i> <span class="sidebar-button-desc">标签</span></a></li><li class="sidebar-button"><a class="sidebar-button-link" href="/all-archives" rel="noopener" title="归档"><i class="sidebar-button-icon fa fa-archive" aria-hidden="true"></i> <span class="sidebar-button-desc">归档</span></a></li><li class="sidebar-button"><a class="sidebar-button-link" href="/links" rel="noopener" title="友情链接"><i class="sidebar-button-icon fa fa-link" aria-hidden="true"></i> <span class="sidebar-button-desc">友情链接</span></a></li><li class="sidebar-button"><a class="sidebar-button-link" href="https://www.travellings.cn/go.html" target="_blank" rel="noopener" title="开往"><i class="sidebar-button-icon fa fa-paper-plane" aria-hidden="true"></i> <span class="sidebar-button-desc">开往</span></a></li></ul><ul class="sidebar-buttons"><li class="sidebar-button"><a class="sidebar-button-link" href="https://github.com/MBRjun" target="_blank" rel="noopener" title="GitHub"><i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i> <span class="sidebar-button-desc">GitHub</span></a></li><li class="sidebar-button"><a class="sidebar-button-link" href="https://twitter.com/MBRjun" target="_blank" rel="noopener" title="Twitter"><i class="sidebar-button-icon fab fa-twitter" aria-hidden="true"></i> <span class="sidebar-button-desc">Twitter</span></a></li><li class="sidebar-button"><a class="sidebar-button-link" href="mailto:mbrjun@foxmail.com" target="_blank" rel="noopener" title="邮箱"><i class="sidebar-button-icon fa fa-envelope" aria-hidden="true"></i> <span class="sidebar-button-desc">邮箱</span></a></li></ul><ul class="sidebar-buttons"><li class="sidebar-button"><a class="sidebar-button-link" href="/atom.xml" rel="noopener" title="RSS"><i class="sidebar-button-icon fa fa-rss" aria-hidden="true"></i> <span class="sidebar-button-desc">RSS</span></a></li></ul></div></nav><div id="main" data-behavior="2" class="hasCoverMetaIn"><article class="post"><div class="post-header main-content-wrap text-left"><h1 class="post-title">原神私服 Android 游玩教程 (免 root)</h1><div class="post-meta"><time datetime="2022-05-22T15:14:00+08:00">2022 年 5 月 22 日 </time><span>发布在 </span><a class="category-link" href="/categories/%E6%B8%B8%E6%88%8F/">游戏</a></div></div><div class="post-content markdown"><div class="main-content-wrap"><p>由于 Google 的限制和一些其他原因，在 Android 上游玩原神私服并没有 iOS、Windows 这么容易</p><span id="more"></span><hr><h2 id="准备材料"><a href="#准备材料" class="headerlink" title="准备材料"></a>准备材料</h2><ul><li><del>一台能读写 /system 分区的 Android 手机（或：一台安装了 Magisk 的 Android 手机）</del> 有人搞出来免root端了，此条件不再必须</li><li>私服客户端 <a target="_blank" rel="noopener" href="https://download.mbrjun.cn/Files/APK/Genshin-Impact-c260.apk">v2.6</a> 或者 <a target="_blank" rel="noopener" href="https://download.mbrjun.cn/Files/APK/genshin-impact-lv0-lspatched.apk">v2.7</a></li><li>一台私服服务器</li><li>Grasscutter</li><li>mitmproxy</li><li>Wi-Fi</li></ul><h2 id="教程"><a href="#教程" class="headerlink" title="教程"></a>教程</h2><p>先把 Grasscutter 配置好，不同系统配置方法不一样，基本概括为以下几点</p><ul><li>下载 Gresscutter：<a target="_blank" rel="noopener" href="https://github.com/Grasscutters/Grasscutter/releases">https://github.com/Grasscutters/Grasscutter/releases</a></li><li>下载 Java（JDK）</li><li>运行 Gresscutter</li></ul><p>搭建Grasscutter可以去看 <a target="_blank" rel="noopener" href="https://blog.cyznb.eu.org/archives/70/">BLxcwg666</a> 的教程</p><p>安装好 Gresscutter 之后，服务器随便找个地方新建个 proxy.py，放下面的内容</p><figure class="highlight python"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">##</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment">#   Copyright (C) 2002-2022 MlgmXyysd All Rights Reserved.</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment">##</span><br><br><span class="hljs-comment">##</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment">#   Genshin Impact script for mitmproxy</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment">#   https://github.com/MlgmXyysd/</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment">#   *Original fiddler script from https://github.lunatic.moe/fiddlerscript</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment">#   Environment requirement:</span><br><span class="hljs-comment">#     - mitmdump from mitmproxy</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment">#   @author MlgmXyysd</span><br><span class="hljs-comment">#   @version 1.1</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment">##</span><br><br><span class="hljs-keyword">from</span> mitmproxy <span class="hljs-keyword">import</span> http<br><span class="hljs-keyword">from</span> proxy_config <span class="hljs-keyword">import</span> USE_SSL<br><span class="hljs-keyword">from</span> proxy_config <span class="hljs-keyword">import</span> REMOTE_HOST<br><span class="hljs-keyword">from</span> proxy_config <span class="hljs-keyword">import</span> REMOTE_PORT<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">MlgmXyysd_Genshin_Impact_Proxy</span>:<br><br>    LIST_DOMAINS = [<br>        <span class="hljs-string">"api-os-takumi.mihoyo.com"</span>,<br>        <span class="hljs-string">"hk4e-api-os-static.mihoyo.com"</span>,<br>        <span class="hljs-string">"hk4e-sdk-os.mihoyo.com"</span>,<br>        <span class="hljs-string">"dispatchosglobal.yuanshen.com"</span>,<br>        <span class="hljs-string">"osusadispatch.yuanshen.com"</span>,<br>        <span class="hljs-string">"account.mihoyo.com"</span>,<br>        <span class="hljs-string">"log-upload-os.mihoyo.com"</span>,<br>        <span class="hljs-string">"dispatchcntest.yuanshen.com"</span>,<br>        <span class="hljs-string">"devlog-upload.mihoyo.com"</span>,<br>        <span class="hljs-string">"webstatic.mihoyo.com"</span>,<br>        <span class="hljs-string">"log-upload.mihoyo.com"</span>,<br>        <span class="hljs-string">"hk4e-sdk.mihoyo.com"</span>,<br>        <span class="hljs-string">"api-beta-sdk.mihoyo.com"</span>,<br>        <span class="hljs-string">"api-beta-sdk-os.mihoyo.com"</span>,<br>        <span class="hljs-string">"cnbeta01dispatch.yuanshen.com"</span>,<br>        <span class="hljs-string">"dispatchcnglobal.yuanshen.com"</span>,<br>        <span class="hljs-string">"cnbeta02dispatch.yuanshen.com"</span>,<br>        <span class="hljs-string">"sdk-os-static.mihoyo.com"</span>,<br>        <span class="hljs-string">"webstatic-sea.mihoyo.com"</span>,<br>        <span class="hljs-string">"webstatic-sea.hoyoverse.com"</span>,<br>        <span class="hljs-string">"hk4e-sdk-os-static.hoyoverse.com"</span>,<br>        <span class="hljs-string">"sdk-os-static.hoyoverse.com"</span>,<br>        <span class="hljs-string">"api-account-os.hoyoverse.com"</span>,<br>        <span class="hljs-string">"hk4e-sdk-os.hoyoverse.com"</span>,<br>        <span class="hljs-string">"overseauspider.yuanshen.com"</span>,<br>        <span class="hljs-string">"gameapi-account.mihoyo.com"</span>,<br>        <span class="hljs-string">"minor-api.mihoyo.com"</span>,<br>        <span class="hljs-string">"public-data-api.mihoyo.com"</span>,<br>        <span class="hljs-string">"uspider.yuanshen.com"</span>,<br>        <span class="hljs-string">"sdk-static.mihoyo.com"</span>,<br>        <span class="hljs-string">"abtest-api-data-sg.hoyoverse.com"</span>,<br>        <span class="hljs-string">"log-upload-os.hoyoverse.com"</span><br>    ]<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">request</span>(<span class="hljs-params">self, flow: http.HTTPFlow</span>) -&gt; <span class="hljs-literal">None</span>:<br>        <span class="hljs-keyword">if</span> flow.request.host <span class="hljs-keyword">in</span> self.LIST_DOMAINS:<br>            <span class="hljs-keyword">if</span> USE_SSL:<br>                flow.request.scheme = <span class="hljs-string">"https"</span><br>            <span class="hljs-keyword">else</span>:<br>                flow.request.scheme = <span class="hljs-string">"http"</span><br>            flow.request.host = REMOTE_HOST<br>            flow.request.port = REMOTE_PORT<br><br>addons = [<br>	MlgmXyysd_Genshin_Impact_Proxy()<br>]<br></code></pre></td></tr></tbody></table></figure><h2 id="CA-安装"><a href="#CA-安装" class="headerlink" title="CA 安装"></a>CA 安装</h2><p>然后把 mitmproxy 的证书安装到手机里<br>自带的证书是用户目录下的 <code>.mitmproxy</code> 里面的 <code>mitmproxy-ca-cert.cer</code></p><p>手机插数据线到电脑，或者用传输工具，把 mitmproxy-ca-cert.cer 拷贝到手机的存储里（ /sdcard）<br>然后进入手机上的 <strong>设置 &gt; 安全性和隐私 &gt; 加密与凭据 &gt; 安装证书 &gt; CA 证书</strong>（不同手机可能设置方法略有差异，可以尝试在设置内搜索 CA，或者百度一下）安装你刚刚传进去的 <code>mitmproxy-ca-cert.cer</code></p><h2 id="mitmproxy"><a href="#mitmproxy" class="headerlink" title="mitmproxy"></a>mitmproxy</h2><p>然后进入 mitmproxy 安装目录，执行：</p><figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">mitmweb -s proxy.py --ssl-insecure --<span class="hljs-built_in">set</span> block_global=<span class="hljs-literal">false</span> --listen-port 1145 --certs <span class="hljs-string">"Genshin Impact.pem"</span><br></code></pre></td></tr></tbody></table></figure><p>注意：</p><ul><li>proxy.py 替换为上面你保存的 proxy.py 的路径</li><li>监听端口随意 1-65535，选择一个不冲突的端口，如果冲突了后面可能会报错 WinError，不建议：7890 8080，容易被扫描到，记下这个端口</li><li>后面可以用 –certs 引入自己的证书，不需要引入自己的证书可以直接删除该参数</li></ul><p>如果是自己的证书，CA 请使用 v3 版本（OpenSSL 默认 v1)，私钥请选择 RSA 2048，如果证书开头是 <code>-----BEGIN RSA PRIVATE KEY-----</code>，改成<code>-----BEGIN PRIVATE KEY</code></p><h2 id="证书移动至-SYSTEM-TRUST"><a href="#证书移动至-SYSTEM-TRUST" class="headerlink" title="证书移动至 SYSTEM TRUST"></a><del>证书移动至 SYSTEM TRUST</del></h2><p>如果<strong>使用上面提供的修改版客户端</strong>，就<strong>不需要执行这个步骤</strong>了（如果有问题，你还是可以试试执行下这个步骤</p><p>需要使用 Magisk</p><p>Magisk 刷入 <a target="_blank" rel="noopener" href="https://github.com/Magisk-Modules-Repo/movecert">https://github.com/Magisk-Modules-Repo/movecert</a> 模块，重启<br>如果无法刷入，尝试使用兼容模式刷入</p><blockquote><p>Magisk 是啥？<br>root 手机用的，还有很多其他功能<br>需要解锁 Bootloader 才能安装 Magisk，Magisk 不同设备安装方法不同，网上搜一下吧</p></blockquote><h2 id="代理配置"><a href="#代理配置" class="headerlink" title="代理配置"></a>代理配置</h2><p>进入你手机的 Wi-Fi 配置界面，点开你 Wi-Fi 的详细信息（，部分手机：点开编辑页面），找到设置代理，代理模式改为<strong>手动</strong><br>代理服务器设置为你私服的 IP，端口填写上面配置的端口，然后保存<br><img src="https://cos.mbrjun.cn/IMGS/2022/05/29/eu.png" alt=" 分别填写私服 IP，私服端口，第三个留空 "></p><h2 id="完成"><a href="#完成" class="headerlink" title="完成"></a>完成</h2><p><del>去 Google Play 下载 Genshin Impact</del>下载文章开头的私服客户端，应该可以正常游玩了（注意：官网下的连不上私服）</p><hr><p>关于 Android 一些限制：原神不会信任 USER TRUST 的证书，必须安装到 SYSTEM TRUST，私服客户端忽略这个限制</p><p>有问题可以底下评论反馈，文章会及时修改。</p></div></div><div id="post-footer" class="post-footer main-content-wrap"><div class="post-footer-tags"><span class="text-color-light text-small">标签</span><br><a class="tag tag--primary tag--small t-none-link" href="/tags/Genshin-Impact/" rel="tag">Genshin Impact</a> <a class="tag tag--primary tag--small t-none-link" href="/tags/Grasscutter/" rel="tag">Grasscutter</a> <a class="tag tag--primary tag--small t-none-link" href="/tags/mitmproxy/" rel="tag">mitmproxy</a> <a class="tag tag--primary tag--small t-none-link" href="/tags/%E5%8E%9F%E7%A5%9E/" rel="tag">原神</a> <a class="tag tag--primary tag--small t-none-link" href="/tags/%E5%8E%9F%E7%A5%9E%E7%A7%81%E6%9C%8D/" rel="tag">原神私服</a> <a class="tag tag--primary tag--small t-none-link" href="/tags/%E7%A7%81%E6%9C%8D/" rel="tag">私服</a></div><div class="post-actions-wrap"><nav><ul class="post-actions post-action-nav"><li class="post-action"><a class="post-action-btn btn btn--default tooltip--top" href="/archives/459/" data-tooltip="Proxmox VE 配置 RSTP" aria-label="上一篇: Proxmox VE 配置 RSTP"><i class="fa fa-angle-left" aria-hidden="true"></i> <span class="hide-xs hide-sm text-small icon-ml">上一篇</span></a></li><li class="post-action"><a class="post-action-btn btn btn--default tooltip--top" href="/archives/452/" data-tooltip="寂静之城" aria-label="下一篇: 寂静之城"><span class="hide-xs hide-sm text-small icon-mr">下一篇</span> <i class="fa fa-angle-right" aria-hidden="true"></i></a></li></ul></nav><ul class="post-actions post-action-share"><li class="post-action hide-lg hide-md hide-sm"><a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions" aria-label="Diesen Beitrag teilen"><i class="fa fa-share-alt" aria-hidden="true"></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=https://www.mbrjun.cn/archives/454/" title="分享到 Twitter" aria-label="分享到 Twitter"><i class="fab fa-twitter" aria-hidden="true"></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target="new" href="http://service.weibo.com/share/share.php?&amp;title=https://www.mbrjun.cn/archives/454/" title="分享到 Weibo" aria-label="分享到 Weibo"><i class="fab fa-weibo" aria-hidden="true"></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target="new" href="http://connect.qq.com/widget/shareqq/index.html?url=https://www.mbrjun.cn/archives/454/&amp;title=原神私服 Android 游玩教程 (免 root)" title="分享到 QQ" aria-label="分享到 QQ"><i class="fab fa-qq" aria-hidden="true"></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target="new" href="http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=https://www.mbrjun.cn/archives/454/" title="分享到 Qzone" aria-label="分享到 Qzone"><i class="fa fa-star" aria-hidden="true"></i></a></li><li class="post-action"><a class="post-action-btn btn btn--default" href="#" aria-label="Nach oben"><i class="fa fa-list" aria-hidden="true"></i></a></li></ul></div><script src="https://giscus.mbrjun.cn/client.js" data-repo="MBRjun/MBRjun-Blog" data-repo-id="R_kgDOIbI33Q" data-category="Blog" data-category-id="DIC_kwDOIbI33c4CTUTq" data-mapping="title" data-strict="1" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="top" data-theme="light_tritanopia" data-lang="zh-CN" data-loading="lazy" crossorigin="anonymous" async=""></script></div></article><footer id="footer" class="main-content-wrap"><span class="copyrights"><a target="_blank" rel="noopener" href="http://beian.miit.gov.cn">津ICP备20002670号</a> - <a target="_blank" rel="noopener" href="https://github.com/MBRjun/MBRjun-Blog">源代码</a><br>Copyrights © 2023 MBRjun. All Rights Reserved.</span></footer><script async="" defer="" data-website-id="d1e9e8b4-ed73-416a-b8e7-ae518e698da6" src="https://delightful.mbrjun.cn/delightful.js?v=1.40.0-1"></script></div><div id="bottom-bar" class="post-bottom-bar" data-behavior="2"><div class="post-actions-wrap"><nav><ul class="post-actions post-action-nav"><li class="post-action"><a class="post-action-btn btn btn--default tooltip--top" href="/archives/459/" data-tooltip="Proxmox VE 配置 RSTP" aria-label="上一篇: Proxmox VE 配置 RSTP"><i class="fa fa-angle-left" aria-hidden="true"></i> <span class="hide-xs hide-sm text-small icon-ml">上一篇</span></a></li><li class="post-action"><a class="post-action-btn btn btn--default tooltip--top" href="/archives/452/" data-tooltip="寂静之城" aria-label="下一篇: 寂静之城"><span class="hide-xs hide-sm text-small icon-mr">下一篇</span> <i class="fa fa-angle-right" aria-hidden="true"></i></a></li></ul></nav><ul class="post-actions post-action-share"><li class="post-action hide-lg hide-md hide-sm"><a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions" aria-label="Diesen Beitrag teilen"><i class="fa fa-share-alt" aria-hidden="true"></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=https://www.mbrjun.cn/archives/454/" title="分享到 Twitter" aria-label="分享到 Twitter"><i class="fab fa-twitter" aria-hidden="true"></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target="new" href="http://service.weibo.com/share/share.php?&amp;title=https://www.mbrjun.cn/archives/454/" title="分享到 Weibo" aria-label="分享到 Weibo"><i class="fab fa-weibo" aria-hidden="true"></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target="new" href="http://connect.qq.com/widget/shareqq/index.html?url=https://www.mbrjun.cn/archives/454/&amp;title=原神私服 Android 游玩教程 (免 root)" title="分享到 QQ" aria-label="分享到 QQ"><i class="fab fa-qq" aria-hidden="true"></i></a></li><li class="post-action hide-xs"><a class="post-action-btn btn btn--default" target="new" href="http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=https://www.mbrjun.cn/archives/454/" title="分享到 Qzone" aria-label="分享到 Qzone"><i class="fa fa-star" aria-hidden="true"></i></a></li><li class="post-action"><a class="post-action-btn btn btn--default" href="#" aria-label="Nach oben"><i class="fa fa-list" aria-hidden="true"></i></a></li></ul></div></div><div id="share-options-bar" class="share-options-bar" data-behavior="2"><i id="btn-close-shareoptions" class="fa fa-times"></i><ul class="share-options"><li class="share-option"><a class="share-option-btn" target="new" href="https://twitter.com/intent/tweet?text=https://www.mbrjun.cn/archives/454/" aria-label="分享到 Twitter"><i class="fab fa-twitter" aria-hidden="true"></i><span>分享到 Twitter</span></a></li><li class="share-option"><a class="share-option-btn" target="new" href="http://service.weibo.com/share/share.php?&amp;title=https://www.mbrjun.cn/archives/454/" aria-label="分享到 Weibo"><i class="fab fa-weibo" aria-hidden="true"></i><span>分享到 Weibo</span></a></li><li class="share-option"><a class="share-option-btn" target="new" href="http://connect.qq.com/widget/shareqq/index.html?url=https://www.mbrjun.cn/archives/454/&amp;title=原神私服 Android 游玩教程 (免 root)" aria-label="分享到 QQ"><i class="fab fa-qq" aria-hidden="true"></i><span>分享到 QQ</span></a></li><li class="share-option"><a class="share-option-btn" target="new" href="http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=https://www.mbrjun.cn/archives/454/" aria-label="分享到 Qzone"><i class="fa fa-star" aria-hidden="true"></i><span>分享到 Qzone</span></a></li></ul></div></div><div id="about"><div id="about-card"><div id="about-btn-close"><i class="fa fa-times"></i></div><img id="about-card-picture" src="https://cos.mbrjun.cn/PICS/LG4v3avatar144px.jpg" alt="作者的图片"><h4 id="about-card-name">MBRjun</h4><div id="about-card-bio"><p>我们生活在大地上，但我们的梦想超越天空</p></div><div id="about-card-job"><i class="fa fa-briefcase"></i><br><p>学生</p></div><div id="about-card-location"><i class="fa fa-map-marker-alt"></i><br>地球</div></div></div><div id="cover" style="background-image:url('https://cos.mbrjun.cn/IMGS/2023/03/23/4419f34e-9353-4b44-a6dd-ebb1db958fc5.webp');"></div><!-- 
█▀▄▀█ █▄▄ █▀█ ░░█ █░█ █▄░█ ▄▄ █▄▄ █░░ █▀█ █▀▀
█░▀░█ █▄█ █▀▄ █▄█ █▄█ █░▀█ ░░ █▄█ █▄▄ █▄█ █▄█
Commit d74460a655d91b7b6cfe45a709f04c71847a7578
Build on: runner@Azure-GitHub-Actions (running kernel: 5.15.0-1034-azure)
Date: 2023-03-28 Preset: CI --></body></html>