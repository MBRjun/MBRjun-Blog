<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>MBRjun-Blog</title>
  
  
  <link href="https://blog.mbrjun.cn/atom.xml" rel="self"/>
  
  <link href="https://blog.mbrjun.cn/"/>
  <updated>2023-01-11T16:53:22.860Z</updated>
  <id>https://blog.mbrjun.cn/</id>
  
  <author>
    <name>MBRjun</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>S/MIME(X.509) 签名 Git 提交教程</title>
    <link href="https://blog.mbrjun.cn/archives/469/"/>
    <id>https://blog.mbrjun.cn/archives/469/</id>
    <published>2023-01-01T00:00:00.000Z</published>
    <updated>2023-01-11T16:53:22.860Z</updated>
    
    <content type="html"><![CDATA[<p>大概是全网第一个 Linux 使用 S&#x2F;MIME（即X.509）签名 Git 提交的教程  </p><p>很多人都知道 Git 可以使用 S&#x2F;MIME 签名，但是很少有人尝试 S&#x2F;MIME，而是选择 OpenPGP 签名，所以我在这里写一个 S&#x2F;MIME 的教程，想玩的可以来参考下  </p><span id="more"></span><hr><p><strong>先说一句，本文章仅针对 Linux</strong></p><p>你应该在点进这篇文章之前已经看过一些其他文档了，如果没有也没关系  </p><p>关于 S&#x2F;MIME 你可能找不到其他有用的文档，就连 <em>GitHub 的官方文档也是依托答辩</em>  </p><p><img src="https://cos.mbrjun.cn/IMGS/2022/12/31/cg.png"></p><p>首先，GitHub 给的这个 <a href="https://github.com/github/smimesign#installation">github&#x2F;smimesign</a> 连 Linux 都不兼容，上次提交还是在 2021，底下的教程还是错的  </p><p>然后，这个 TerminalTerminalGit Bash 是啥玩意？  </p><p><img src="https://cos.mbrjun.cn/IMGS/2022/12/31/fs.png"></p><p>中文文档更是惨不忍睹  </p><h2 id="签名提交"><a href="#签名提交" class="headerlink" title="签名提交"></a>签名提交</h2><p>我们使用的工具是 <code>gpgsm</code>，在 Debian GNU&#x2F;Linux 上使用包管理器安装它：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">apt install gpgsm<br></code></pre></td></tr></table></figure><p>如果你使用 Arch Linux，它已经被包含到 <code>gnupg</code>，所以您不需要手动安装它  </p><p>接下来，简单地执行：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">gpgsm --import /path/to/secret.pem<br></code></pre></td></tr></table></figure><p>然后依次输入你的<strong>私钥锁码</strong>，为 gpgsm 设置的<strong>新密码</strong>，<strong>重复上一步的密码</strong>，即可将私钥导入 <code>gpgsm</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">gpgsm: 1224 bytes of 3DES encrypted text<br>gpgsm: 5288 bytes of RC2 encrypted text<br>gpgsm: processing certBag<br>gpgsm: dirmngr cache-only key lookup failed: Not found<br>gpgsm: processing certBag<br>gpgsm: processing certBag<br>gpgsm: DBG: keygrip= AE 02 E3 4B E9 7E 61 0C C3 33 93 67 AF 6A 3D 29 18 B3 68 9B<br>gpgsm: total number processed: 4<br>gpgsm:               imported: 1<br>gpgsm:              unchanged: 2<br>gpgsm:       secret keys read: 1<br>gpgsm:   secret keys imported: 1<br><br></code></pre></td></tr></table></figure><p>导入完成后，配置 git 使用 gpgsm 进行签名：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">git config --global gpg.format x509<br></code></pre></td></tr></table></figure><p>（是的，<code>git</code> 默认的 X.509 签名工具就是 <code>gpgsm</code>）<br>接下来查看你私钥的 ID：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">gpgsm --list-secret-keys<br></code></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">/home/mbrjun/.gnupg/pubring.kbx<br>-------------------------------<br>           ID: 0xC7D9F286 &lt;&lt;- ID Here!<br>          S/N: 3D7BA6B1C470C8938BBB4B08FEC7A956<br>        (dec): 81724941220654032059336759622481979734<br>       Issuer: /CN=Actalis Client Authentication CA G3/O=Actalis S.p.A./L=Ponte San Pietro/ST=Bergamo/C=IT<br>      Subject: /CN=mbrjun@foxmail.com<br>          aka: mbrjun@foxmail.com<br>     validity: 2022-10-26 16:28:57 through 2023-10-26 16:28:57<br>     key type: 2048 bit RSA<br>    key usage: digitalSignature keyEncipherment<br>ext key usage: clientAuth (suggested), emailProtection (suggested)<br>     policies: 1.3.159.1.24.1:N:<br>  fingerprint: 6A:B8:DE:4C:82:76:21:E8:4C:F8:6E:BC:DE:61:B3:8F:C7:D9:F2:86<br>     sha2 fpr: FE:C5:8C:B9:B2:0D:B8:DD:36:BE:41:74:5F:B3:A1:90:68:B7:C9:BE:CD:A2:B9:EF:61:FE:DA:64:80:65:AF:96<br></code></pre></td></tr></table></figure><p>然后把这个 ID 告诉<code>git</code>，例如：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">git config --global user.signingkey 0xC7D9F286<br></code></pre></td></tr></table></figure><p>将上方命令的 <code>0xC7D9F286</code> 替换为你的私钥 ID</p><p>最后，设置 git 的默认签名</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">git config --global commit.gpgsign true<br></code></pre></td></tr></table></figure><p>大功告成！立刻使用你的 X.509 证书来签名提交吧！<br><img src="https://cos.mbrjun.cn/IMGS/2022/12/31/dr.png"></p><h2 id="验证提交签名"><a href="#验证提交签名" class="headerlink" title="验证提交签名"></a>验证提交签名</h2><h3 id="git-命令行"><a href="#git-命令行" class="headerlink" title="git 命令行"></a>git 命令行</h3><p>打开 git log：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">git log --show-signature<br></code></pre></td></tr></table></figure><p>可以看到 gpgsm 会验证签名证书的有效性：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">commit ab7cb75fb8f3a1193a3297764d56b5231d46a6ee<br>gpgsm: Signature made 2022-11-13 04:44:10 UTC<br>gpgsm:                using rsa2048 key 6AB8DE4C827621E84CF86EBCDE61B38FC7D9F286<br>gpgsm: Note: non-critical certificate policy not allowed<br>gpgsm: Note: non-critical certificate policy not allowed<br>gpgsm: Good signature from &quot;/CN=mbrjun@foxmail.com&quot;<br>gpgsm:                 aka &quot;mbrjun@foxmail.com&quot;<br>Author: MBRjun &lt;mbrjun@foxmail.com&gt;<br>Date:   Sun Nov 13 12:44:10 2022 +0800<br><br>    GOOD COMMIT,WITH SMIME SIG(RETRY 1)<br></code></pre></td></tr></table></figure><h3 id="github-com"><a href="#github-com" class="headerlink" title="github.com"></a>github.com</h3><p>GitHub 验证 X.509 不需要上传公钥，同时也不兼容自签名：  </p><p>使用 X.509 签名会比其他签名方法多一种状态，即<strong>Pending</strong>：<br><img src="https://cos.mbrjun.cn/IMGS/2022/12/31/zs.jpg"></p><p>因为 X.509 还会进行证书吊销检查，证书吊销后，所有使用该证书的签名将会<strong>无效</strong>  </p>]]></content>
    
    
    <summary type="html">&lt;p&gt;大概是全网第一个 Linux 使用 S&amp;#x2F;MIME（即X.509）签名 Git 提交的教程  &lt;/p&gt;
&lt;p&gt;很多人都知道 Git 可以使用 S&amp;#x2F;MIME 签名，但是很少有人尝试 S&amp;#x2F;MIME，而是选择 OpenPGP 签名，所以我在这里写一个 S&amp;#x2F;MIME 的教程，想玩的可以来参考下  &lt;/p&gt;</summary>
    
    
    
    <category term="教程" scheme="https://blog.mbrjun.cn/categories/%E6%95%99%E7%A8%8B/"/>
    
    
    <category term="教程" scheme="https://blog.mbrjun.cn/tags/%E6%95%99%E7%A8%8B/"/>
    
    <category term="S/MIME" scheme="https://blog.mbrjun.cn/tags/S-MIME/"/>
    
    <category term="git" scheme="https://blog.mbrjun.cn/tags/git/"/>
    
  </entry>
  
  <entry>
    <title>我大抵是阳了</title>
    <link href="https://blog.mbrjun.cn/archives/468/"/>
    <id>https://blog.mbrjun.cn/archives/468/</id>
    <published>2022-12-18T07:15:00.000Z</published>
    <updated>2022-12-22T09:57:44.000Z</updated>
    
    <content type="html"><![CDATA[<p>刚写文章时是：好想睡觉，好想睡觉，好想睡觉  </p><p>而且还可以发情x</p><span id="more"></span><p>核酸阳之前，或者核酸刚阳，症状大概是一直在低烧 37摄氏度，想睡觉  </p><p><code>2022-12-18</code>：今天核酸阳了，昨天还没阳的，发烧是还在低烧，不修改标题了，分享下症状  </p><p><code>2022-12-19</code>：能烧到39.2，味觉减退是真的，不过网上说天津人感染以后都挺能吃，为啥我就没啥食欲了  </p><p>现在外卖买啥都买不到，麦当劳肯德基之类的也全都关门，快递也一直都不给派送，难道是人都阳了吗  </p><p>吃点阿司匹林x  </p><p><del>不过阳了还可以色色诶</del>  </p><p><code>2022-12-20</code>：不烧了，头还有点晕，班里同学大概还有几个没阳  </p><p><code>2022-12-21</code>：头屑太多了，想洗澡，半夜寸了几次有点发情  </p><p>似乎已经好多了（？）大致 没啥症状了 再观望三天看看  </p><p><code>2022-12-22</code>：无事发生，可能杨康了  </p><p><code>2022-12-23</code>：无事发生，想去做个核酸  </p><p><code>2022-12-24</code>：感觉自己阳了比大多数人（包括身边人）症状轻，虽然咱还是个北佬  </p>]]></content>
    
    
    <summary type="html">&lt;p&gt;刚写文章时是：好想睡觉，好想睡觉，好想睡觉  &lt;/p&gt;
&lt;p&gt;而且还可以发情x&lt;/p&gt;</summary>
    
    
    
    <category term="疫情" scheme="https://blog.mbrjun.cn/categories/%E7%96%AB%E6%83%85/"/>
    
    
    <category term="COVID-19" scheme="https://blog.mbrjun.cn/tags/COVID-19/"/>
    
    <category term="疫情" scheme="https://blog.mbrjun.cn/tags/%E7%96%AB%E6%83%85/"/>
    
  </entry>
  
  <entry>
    <title>zstd 命令行使用简明教程</title>
    <link href="https://blog.mbrjun.cn/archives/467/"/>
    <id>https://blog.mbrjun.cn/archives/467/</id>
    <published>2022-12-01T01:35:00.000Z</published>
    <updated>2022-12-01T02:39:50.000Z</updated>
    
    <content type="html"><![CDATA[<p>简单写一下 zstd 命令行使用方法（压缩文件夹、文件）以及参数解释  </p><span id="more"></span><hr><h2 id="zstd-命令用法"><a href="#zstd-命令用法" class="headerlink" title="zstd 命令用法"></a>zstd 命令用法</h2><p>可以使用 <code>zstd --help</code> 查看，用法是  </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">zstd [args] [FILE(s)] [-o file]  <br></code></pre></td></tr></table></figure><h2 id="压缩整个文件夹-x2F-多个文件"><a href="#压缩整个文件夹-x2F-多个文件" class="headerlink" title="压缩整个文件夹&#x2F;多个文件"></a>压缩整个文件夹&#x2F;多个文件</h2><p>zstd 是纯压缩算法，<code>.zst</code>是纯压缩格式，这意味着如果你想要压缩多个文件，你必须先将文件归档(“无压缩打包”)，而不像 7z 之类的格式可以归档并压缩  </p><p>压缩文件夹的命令是：  </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">tar -cvf - &lt;DIR&gt; | zstd -T0 &gt; &lt;OUTPUT&gt;.tar.zst  <br></code></pre></td></tr></table></figure><p>压缩多个文件的命令：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">tar -cvf - &lt;FILE1&gt; &lt;FILE2&gt; &lt;FILEn&gt; | zstd -T0 &gt; &lt;OUTPUT&gt;.tar.zst  <br></code></pre></td></tr></table></figure><ul><li>&lt;DIR&gt; 是将被压缩的文件夹，&lt;FILE*&gt; 是将被压缩的文件    </li><li>&lt;OUTPUT&gt; 是输出文件名  </li><li>此命令使用 tar 进行归档并传递到 zstd（-c 归档 v 详细 f 输出 - 到终端），zstd 进行多线程压缩，然后将 zstd 压缩的输出重定向到文件</li></ul><h2 id="压缩单个文件"><a href="#压缩单个文件" class="headerlink" title="压缩单个文件"></a>压缩单个文件</h2><p>命令是：  </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">zstd -T0 &lt;FILE&gt; -o &lt;OUTPUT&gt;.zst<br></code></pre></td></tr></table></figure><h2 id="参数解释"><a href="#参数解释" class="headerlink" title="参数解释"></a>参数解释</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">-#       : 压缩率，# 是一个数字，允许的值是 1-19，使用 --ultra 允许 1-22，默认值是 3<br>           数字越大，压缩输出的文件越小，耗时越长，内存占用越大<br>-d       : 解压<br>-o file  : 输出到文件<br>-f       : 强制执行，跳过所有检查<br>--rm     : 压缩成功后删除源文件<br>-c       : 强制 STDOUT，即使目标是终端（这可能会炸了你的终端）<br>-v       : 详细<br>-q       : 不输出警告，指定两次不输出错误<br>--no-progress : 不显示进度<br>--ultra  : 解锁高压缩率<br>--fast   : 光速压缩！<br>-T#      : 多核压缩，0=全部核心<br>--test   : 检查压缩包完整性<br>-M#      : 解压内存上限<br>-b#      : 测速，# 是压缩率等级，输出源文件大小，输出大小，压缩速度，解压速度<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;简单写一下 zstd 命令行使用方法（压缩文件夹、文件）以及参数解释  &lt;/p&gt;</summary>
    
    
    
    <category term="代码" scheme="https://blog.mbrjun.cn/categories/%E4%BB%A3%E7%A0%81/"/>
    
    
    <category term="Linux" scheme="https://blog.mbrjun.cn/tags/Linux/"/>
    
    <category term="zstd" scheme="https://blog.mbrjun.cn/tags/zstd/"/>
    
    <category term="压缩" scheme="https://blog.mbrjun.cn/tags/%E5%8E%8B%E7%BC%A9/"/>
    
    <category term="算法" scheme="https://blog.mbrjun.cn/tags/%E7%AE%97%E6%B3%95/"/>
    
  </entry>
  
  <entry>
    <title>Linux 6.0 内核编译教程</title>
    <link href="https://blog.mbrjun.cn/archives/466/"/>
    <id>https://blog.mbrjun.cn/archives/466/</id>
    <published>2022-08-15T05:02:00.000Z</published>
    <updated>2022-08-16T07:01:19.000Z</updated>
    
    <content type="html"><![CDATA[<p>昨天 Linux 6.0-rc1 内核发布了，写一个编译安装教程喵</p><span id="more"></span><hr><blockquote><p>本文以 Arch Linux 演示编译过程，其他发行版可能编译方法略有不同</p></blockquote><h2 id="安装依赖"><a href="#安装依赖" class="headerlink" title="安装依赖"></a>安装依赖</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">pacman -Sy base-devel xmlto kmod inetutils bc libelf git cpio perl tar xz<br></code></pre></td></tr></table></figure><h2 id="获取源码"><a href="#获取源码" class="headerlink" title="获取源码"></a>获取源码</h2><p>下载解压 Linux 内核的压缩包，当然也可以直接 git clone</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash">wget https://git.kernel.org/torvalds/t/linux-6.0-rc1.tar.gz<br><span class="hljs-built_in">mkdir</span> linux<br><span class="hljs-built_in">cd</span> linux<br>7z x ../linux-6.0-rc1.tar.gz <span class="hljs-comment"># install p7zip first</span><br>7z x linux-6.0-rc1.tar<br><span class="hljs-built_in">cd</span> linux-6.0-rc1<br></code></pre></td></tr></table></figure><p><img src="https://cos.mbrjun.cn/IMGS/2022/08/dh.png"></p><p>然后配置权限并确保内核树绝对干净</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">chmod</span> +x ./scripts/*<br>make clean &amp;&amp; make mrproper<br></code></pre></td></tr></table></figure><h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><p>获取当前内核的配置</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">zcat /proc/config.gz &gt; .config<br></code></pre></td></tr></table></figure><p>之后执行 <code>make menuconfig</code> 命令，进行编译配置<br>不推荐使用 <code>root</code> 用户编译</p><p><img src="https://cos.mbrjun.cn/IMGS/2022/08/nb.png"></p><p>配置好之后保存，返回 Shell</p><h2 id="编译"><a href="#编译" class="headerlink" title="编译"></a>编译</h2><p>使用下面的命令开始编译</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">make -j$(nproc)<br></code></pre></td></tr></table></figure><p>编译内核模块</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">make modules<br></code></pre></td></tr></table></figure><p>编译完成后内核存储在 <code>arch/x86_64/boot/bzImage</code></p><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p>我自己编译了一个 Linux 6.0，如果你不能自己编译，也可以点击下方链接获取<br><a href="https://download.mbrjun.cn/%E5%88%B7%E6%9C%BA%E5%8C%85/Linux/Linux-6/6.0/6.0.0/rc1/">https://download.mbrjun.cn/%E5%88%B7%E6%9C%BA%E5%8C%85/Linux/Linux-6/6.0/6.0.0/rc1/</a></p><h3 id="如果是自己编译"><a href="#如果是自己编译" class="headerlink" title="如果是自己编译"></a>如果是自己编译</h3><p>进入编译目录，输入下面的命令安装模块</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">sudo make modules_install<br></code></pre></td></tr></table></figure><p>然后安装内核并创建 initramfs</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">sudo cp -v bzImage /boot/vmlinuz-linux-mbrjun<br></code></pre></td></tr></table></figure><p>上面的命令中，<code>linux-mbrjun</code>是我内核的名称，你也可以自定义名称，重命名建议以 <code>vmlinuz</code> 开头</p><p>然后需要编辑 <code>/etc/mkinitcpio.d/linux-mbrjun.preset</code>，输入下面的内容：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">ALL_config=&quot;/etc/mkinitcpio.conf&quot;<br>ALL_kver=&quot;/boot/vmlinuz-linux-mbrjun&quot;<br>PRESETS=(&#x27;default&#x27; &#x27;fallback&#x27;)<br>default_image=&quot;/boot/initramfs-linux-mbrjun.img&quot;<br>fallback_image=&quot;/boot/initramfs-linux-mbrjun-fallback.img&quot;<br>fallback_options=&quot;-S autodetect&quot;<br></code></pre></td></tr></table></figure><p>注意：如果上面修改了内核名称，此处也要修改</p><p>执行 <code>mkinitcpio -p linux-mbrjun</code>，生成 initramfs</p><p>然后重新生成 grub 配置文件：<code>grub-mkconfig -o /boot/grub/grub.cfg</code></p><h3 id="使用编译好的-Linux"><a href="#使用编译好的-Linux" class="headerlink" title="使用编译好的 Linux"></a>使用编译好的 Linux</h3><p><del>是的，我懒得造 pacman 安装包，请你手动安装</del><br>先把<strong>两个 initramfs 开头的文件 和 一个 vmlinuz 开头的文件</strong>拷贝到 &#x2F;boot</p><p>然后将 7z 压缩包内的文件解压到 <code>/lib/modules</code>，<strong>解压出来的文件夹需要改名为 <code>6.0.0-rc1-MBRjun</code></strong></p><p>然后重新生成 grub 配置文件：<code>grub-mkconfig -o /boot/grub/grub.cfg</code></p><h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><p>重启设备，开机时选择你的新内核<br><img src="https://cos.mbrjun.cn/IMGS/2022/08/vt.png"></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;昨天 Linux 6.0-rc1 内核发布了，写一个编译安装教程喵&lt;/p&gt;</summary>
    
    
    
    <category term="代码" scheme="https://blog.mbrjun.cn/categories/%E4%BB%A3%E7%A0%81/"/>
    
    
    <category term="Linux" scheme="https://blog.mbrjun.cn/tags/Linux/"/>
    
    <category term="CentOS" scheme="https://blog.mbrjun.cn/tags/CentOS/"/>
    
    <category term="内核" scheme="https://blog.mbrjun.cn/tags/%E5%86%85%E6%A0%B8/"/>
    
    <category term="Arch" scheme="https://blog.mbrjun.cn/tags/Arch/"/>
    
    <category term="Ubuntu" scheme="https://blog.mbrjun.cn/tags/Ubuntu/"/>
    
    <category term="make" scheme="https://blog.mbrjun.cn/tags/make/"/>
    
    <category term="Linux6.0" scheme="https://blog.mbrjun.cn/tags/Linux6-0/"/>
    
    <category term="Linux6" scheme="https://blog.mbrjun.cn/tags/Linux6/"/>
    
    <category term="deepin" scheme="https://blog.mbrjun.cn/tags/deepin/"/>
    
  </entry>
  
  <entry>
    <title>Linux 下修改磁盘分区编号</title>
    <link href="https://blog.mbrjun.cn/archives/465/"/>
    <id>https://blog.mbrjun.cn/archives/465/</id>
    <published>2022-07-23T14:31:54.000Z</published>
    <updated>2022-07-23T14:31:54.000Z</updated>
    
    <content type="html"><![CDATA[<p><del>我修改分区编号是为了看着舒服，磁盘没有 sda1 只有 sda2 就很想去改</del><br>本文示例将 &#x2F;dev&#x2F;sda2 改为 &#x2F;dev&#x2F;sda1</p><span id="more"></span><p>原始结构：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">NAME   MAJ:MIN RM   SIZE RO TYPE MOUNTPOINTS<br>sda      8:0    0 465.8G  0 disk <br>└─sda2   8:1    0 465.6G  0 part /<br>sr0     11:0    1  1024M  0 rom<br></code></pre></td></tr></table></figure><hr><p><strong>确认你拥有 root 权限</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ sudo su<br></code></pre></td></tr></table></figure><p><strong>关闭所有交换区，确保系统安全，同时尽可能的将目标磁盘上的所有分区解除挂载（否则更改需要重启后生效）</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># swapoff -a</span><br></code></pre></td></tr></table></figure><p><strong>使用 sfdisk dump 分区表</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># sfdisk -d /dev/sda &gt; sda.bkp</span><br></code></pre></td></tr></table></figure><p><strong>复制新分区表</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># cp sda.bkp sda.new</span><br></code></pre></td></tr></table></figure><p><strong>编辑新的分区表 <code>sda.new</code></strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">label: dos<br>label-id: 0x9ada1ada<br>device: /dev/sda<br>unit: sectors<br>sector-size: 512<br><br>/dev/sda2 : start=      421888, size=   976351232, type=83<br></code></pre></td></tr></table></figure><p>可以直接修改下面的 sda2 到 sda1，修改完成后保存文件</p><p><strong>将新分区表写入磁盘</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># sfdisk /dev/sda &lt; sda.new</span><br></code></pre></td></tr></table></figure><p>如果你正在修改的磁盘是系统磁盘，或者启用了任何交换分区，使用下面的命令来强制写入：<br><strong>这可能会破坏你的系统。风险自负。</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><code class="hljs plaintext"># sfdisk --force /dev/sda &lt; sda.new<br><br>Checking that no-one is using this disk right now ... FAILED<br><br>This disk is currently in use - repartitioning is probably a bad idea.<br>Umount all file systems, and swapoff all swap partitions on this disk.<br>Use the --no-reread flag to suppress this check.<br><br>Disk /dev/sda: 465.76 GiB, 500107862016 bytes, 976773168 sectors<br>Disk model: ST9500420AS     <br>Units: sectors of 1 * 512 = 512 bytes<br>Sector size (logical/physical): 512 bytes / 512 bytes<br>I/O size (minimum/optimal): 512 bytes / 512 bytes<br>Disklabel type: dos<br>Disk identifier: 0x9ada1ada<br><br>Old situation:<br><br>Device     Boot  Start       End   Sectors   Size Id Type<br>/dev/sda2       421888 976773119 976351232 465.6G 83 Linux<br><br>&gt;&gt;&gt; Script header accepted.<br>&gt;&gt;&gt; Script header accepted.<br>&gt;&gt;&gt; Script header accepted.<br>&gt;&gt;&gt; Script header accepted.<br>&gt;&gt;&gt; Script header accepted.<br>&gt;&gt;&gt; Created a new DOS disklabel with disk identifier 0x9ada1ada.<br>/dev/sda1: Created a new partition 1 of type &#x27;Linux&#x27; and of size 465.6 GiB.<br>Partition #1 contains a ext4 signature.<br>/dev/sda2: Done.<br><br>New situation:<br>Disklabel type: dos<br>Disk identifier: 0x9ada1ada<br><br>Device     Boot  Start       End   Sectors   Size Id Type<br>/dev/sda1       421888 976773119 976351232 465.6G 83 Linux<br><br>The partition table has been altered.<br>Calling ioctl() to re-read partition table.<br>Re-reading the partition table failed.: Device or resource busy<br>The kernel still uses the old table. The new table will be used at the next reboot or after you run partprobe(8) or partx(8).<br>Syncing disks.<br></code></pre></td></tr></table></figure><p>新的分区表重启后生效，此时应检查 <code>/etc/fstab</code> 是否有问题，确保重启后磁盘分区正常挂载。</p><p><strong>重新安装 GRUB</strong><br><code>仅针对传统 BIOS 引导的设备</code></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs plaintext"># grub-install --target=i386-pc /dev/sda<br># grub-mkconfig -o /boot/grub/grub.cfg<br></code></pre></td></tr></table></figure><p>修改完成后新的结构：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">NAME   MAJ:MIN RM   SIZE RO TYPE MOUNTPOINTS<br>sda      8:0    0 465.8G  0 disk <br>└─sda1   8:1    0 465.6G  0 part /<br>sr0     11:0    1  1024M  0 rom<br></code></pre></td></tr></table></figure><hr><p>完成上述操作后重启即可</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;&lt;del&gt;我修改分区编号是为了看着舒服，磁盘没有 sda1 只有 sda2 就很想去改&lt;/del&gt;&lt;br&gt;本文示例将 &amp;#x2F;dev&amp;#x2F;sda2 改为 &amp;#x2F;dev&amp;#x2F;sda1&lt;/p&gt;</summary>
    
    
    
    <category term="教程" scheme="https://blog.mbrjun.cn/categories/%E6%95%99%E7%A8%8B/"/>
    
    
    <category term="Linux" scheme="https://blog.mbrjun.cn/tags/Linux/"/>
    
    <category term="CentOS" scheme="https://blog.mbrjun.cn/tags/CentOS/"/>
    
    <category term="Arch" scheme="https://blog.mbrjun.cn/tags/Arch/"/>
    
    <category term="Ubuntu" scheme="https://blog.mbrjun.cn/tags/Ubuntu/"/>
    
    <category term="分区表" scheme="https://blog.mbrjun.cn/tags/%E5%88%86%E5%8C%BA%E8%A1%A8/"/>
    
    <category term="MBR" scheme="https://blog.mbrjun.cn/tags/MBR/"/>
    
    <category term="GPT" scheme="https://blog.mbrjun.cn/tags/GPT/"/>
    
  </entry>
  
  <entry>
    <title>我们Arc人下午过年，晚上吊丧，其他圈子能做得到吗！？</title>
    <link href="https://blog.mbrjun.cn/archives/461/"/>
    <id>https://blog.mbrjun.cn/archives/461/</id>
    <published>2022-07-09T13:06:00.000Z</published>
    <updated>2022-07-09T13:37:58.000Z</updated>
    
    <content type="html"><![CDATA[<p>怎么办我现在一边想着誓死力争还我对立 一边对着神光流口水</p><span id="more"></span><hr><p>早上：土豆服务器<br>中午：大型解密<br>下午：星人推歌过年<br>晚上：吊丧</p><hr><p>我们arc人下午过年，晚上吊丧，其他圈子能做得到吗！？</p><p>怎么办我现在一边想着誓死力争还我对立一边对着神光流口水</p><hr><p>对立??对立??对立??对立??对立??对立??对立??对立??对立??对立??对立??</p><hr><p>更新前五天：无知的骗钱口嗨机器创建了新文件夹<br>更新前四天：懒惰的摆烂616定稿了剧情文案<br>更新前三天：616小鬼似乎制作了搭档立绘<br>更新前两天：韵宝小姐完成了谱面的创作<br>更新前一天：美丽的韵宝小姐预定了发布时间<br>更新当天：伟大的Arcaea4.0将于今日降临他忠诚的世界<br>当天早上：伟大的Arc4.0准备进行短暂的解密<br>当天上午：韵宝小姐好像觉得解密更有意思<br>当天中午：616小鬼沉迷于解密无法自拔<br>当天下午：懒惰的摆烂616忘记了自己的身份<br>当天晚上：无知的骗钱口嗨将永远被钉在对立的耻辱柱上！！！</p><hr><p>很喜欢 Arcaea 4.0 的一句话： <em>你脑子是不是有什么问题？</em></p><hr><p>宿命光 aka 神光<br>New alias:<br>妻寄光</p><hr><p>喜报：Guy的母亲去见对立了</p><hr><p><img src="https://cos.mbrjun.cn/IMGS/2022/07/09/rb.jpg"></p><hr><p><img src="https://cos.mbrjun.cn/IMGS/2022/07/09/yn.jpg"></p><hr><p><img src="https://cos.mbrjun.cn/IMGS/2022/07/09/vu.jpg"></p><hr><p><img src="https://cos.mbrjun.cn/IMGS/2022/07/09/xt.jpg"></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;怎么办我现在一边想着誓死力争还我对立 一边对着神光流口水&lt;/p&gt;</summary>
    
    
    
    <category term="游戏" scheme="https://blog.mbrjun.cn/categories/%E6%B8%B8%E6%88%8F/"/>
    
    
    <category term="Arcaea" scheme="https://blog.mbrjun.cn/tags/Arcaea/"/>
    
    <category term="韵律源点" scheme="https://blog.mbrjun.cn/tags/%E9%9F%B5%E5%BE%8B%E6%BA%90%E7%82%B9/"/>
    
    <category term="对立" scheme="https://blog.mbrjun.cn/tags/%E5%AF%B9%E7%AB%8B/"/>
    
    <category term="Arcaea4.0" scheme="https://blog.mbrjun.cn/tags/Arcaea4-0/"/>
    
    <category term="lowiro" scheme="https://blog.mbrjun.cn/tags/lowiro/"/>
    
  </entry>
  
  <entry>
    <title>Proxmox VE 配置 RSTP</title>
    <link href="https://blog.mbrjun.cn/archives/459/"/>
    <id>https://blog.mbrjun.cn/archives/459/</id>
    <published>2022-06-11T12:56:00.000Z</published>
    <updated>2022-06-11T14:32:44.000Z</updated>
    
    <content type="html"><![CDATA[<p>快速生成树协议（Rapid Spanning Tree Protocol ，RSTP） 用于在局域网中消除 L2 物理环路，RSTP 由 STP 改进而来，除了和传统的 STP 协议一样具有避免环路、动态管理冗余链路的功能外，RSTP 极大的缩短了拓扑收敛时间</p><span id="more"></span><p>配置 RSTP 需要先安装 Open vSwitch (openvswitch, OvS) ，这是 Linux Bridge、Linux Bond 和 Linux vlan 的替代方案。Open vSwitch 支持物理交换机上的大多数功能，提供一些高级功能，如 RSTP、VXLAN、OpenFlow，并支持单个网桥上的多个 vlan。如果您需要这些功能，切换到 Open vSwitch 是有意义的。如果您没有安装 OvS，您需要先设置 OvS</p><hr><h2 id="安装-Open-vSwitch"><a href="#安装-Open-vSwitch" class="headerlink" title="安装 Open vSwitch"></a>安装 Open vSwitch</h2><ul><li>首先启用 Proxmox VE 的非订阅源 <img src="https://cos.mbrjun.cn/IMGS/2022/06/11/rs.png"></li><li>安装 OvS（下文提到 Open vSwitch 将全部使用 OvS 简称）(需要大约 6 MB 磁盘空间）</li></ul><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">apt install -y openvswitch-switch<br></code></pre></td></tr></table></figure><h2 id="配置-RSTP"><a href="#配置-RSTP" class="headerlink" title="配置 RSTP"></a>配置 RSTP</h2><p>将 Linux Bridge 转换为 OvS Bridge<br>[scode type&#x3D;”yellow” size&#x3D;””]OvS Bridge 的桥接成员<strong>必须</strong>是 OvS 端口、OvS Bond 或 OvS vlan；Linux Bridge 的桥接成员<strong>不得</strong>是 OvS 端口、OvS Bond 或 OvS vlan，如果您有多个桥接，您需要为所有使用到 OvS 设备的 Linux Bridge 转换为 OvS Bridge（即使这个桥接不需要 RSTP）[&#x2F;scode]</p><p>修改 <code>/etc/network/interfaces</code></p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs c"><span class="hljs-keyword">auto</span> enp2s0 <span class="hljs-comment">// 为网桥成员添加 auto 标记</span><br>iface enp2s0 inet manual <br>        ovs_type OVSPort <span class="hljs-comment">// 设置为 OvS 端口</span><br>        ovs_bridge vmbr0 <span class="hljs-comment">// 该接口属于 vmbr0 桥接</span><br><br><span class="hljs-keyword">auto</span> vmbr0<br>iface vmbr0 inet <span class="hljs-type">static</span> <span class="hljs-comment">// 静态 IPv4</span><br>        address <span class="hljs-number">10.20</span><span class="hljs-number">.6</span><span class="hljs-number">.12</span>/<span class="hljs-number">11</span> <span class="hljs-comment">// IP/CIDR</span><br>        gateway <span class="hljs-number">10.10</span><span class="hljs-number">.10</span><span class="hljs-number">.10</span> <span class="hljs-comment">// 网关</span><br>        ovs_type OVSBridge <span class="hljs-comment">// 设置为 OvS 网桥</span><br>        ovs_ports enp2s0 <span class="hljs-comment">// 该桥接包含 enp2s0 接口</span><br>        ovs_mtu <span class="hljs-number">1500</span> <span class="hljs-comment">// MTU，大于 1500 必须设置</span><br>        ovs_options other_config:rstp-port-mcheck=<span class="hljs-literal">true</span> <span class="hljs-comment">// 见下方 ovs_options 选项</span><br>        up ovs-vsctl <span class="hljs-built_in">set</span> Bridge $&#123;IFACE&#125; rstp-enable=<span class="hljs-literal">true</span> other_config:rstp-priority=<span class="hljs-number">57344</span> <span class="hljs-comment">// 见下方桥接选项</span><br>        post-up sleep <span class="hljs-number">10</span> <span class="hljs-comment">// 在启动继续之前休眠 10 秒左右等待 RSTP 收敛</span><br></code></pre></td></tr></table></figure><p>ovs_options 选项：</p><ul><li><code>other_config:rstp-path-cost=</code><br>10GbE 的默认值为 2000，1GbE 的默认值为 20000</li><li><code>other_config:rstp-port-admin-edge=</code><br>如果已知它连接到运行 RSTP 的交换机，则设置为 False，以防止在未检测到 BDPU 时进入转发状态</li><li><code>other_config:rstp-port-auto-edge=</code><br>如果已知它连接到运行 RSTP 的交换机，则设置为 False，以防止在未检测到 BDPU 时进入转发状态</li><li><code>other_config:rstp-port-mcheck=</code><br>如果知道另一端使用 RSTP 而不是 STP，则设置为 True，将在链路检测时立即广播 BDPU</li></ul><p>桥接选项：</p><ul><li><code>up ovs-vsctl set Bridge $&#123;IFACE&#125; rstp_enable=true</code><br><strong>开启 RSTP</strong></li><li><code>other_config:rstp-priority=</code><br>接受十六进制和十进制值。<br>配置根桥优先级，值越低越有可能成为根桥。建议将此设置为最大值 0xFFFF（65536），以防止 Open vSwitch 成为根桥。默认值为 0x8000（32768），值必须是 4096 的倍数</li><li><code>other_config:rstp-forward-delay=</code><br>网桥在进入<strong>转发</strong>状态之前处于<strong>学习</strong>模式的时间量。范围是 4-30，默认 15</li><li><code>other_config:rstp-max-age=</code><br>范围是 6-40，默认 20</li></ul><p>配置好之后保存，新配置将在<strong>重启设备</strong>之后应用</p><p>[scode type&#x3D;”yellow” size&#x3D;””]请不要在重启设备前重启网络服务，这会让您的服务器失去网络连接[&#x2F;scode]</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;快速生成树协议（Rapid Spanning Tree Protocol ，RSTP） 用于在局域网中消除 L2 物理环路，RSTP 由 STP 改进而来，除了和传统的 STP 协议一样具有避免环路、动态管理冗余链路的功能外，RSTP 极大的缩短了拓扑收敛时间&lt;/p&gt;</summary>
    
    
    
    <category term="教程" scheme="https://blog.mbrjun.cn/categories/%E6%95%99%E7%A8%8B/"/>
    
    
    <category term="PVE" scheme="https://blog.mbrjun.cn/tags/PVE/"/>
    
    <category term="交换机" scheme="https://blog.mbrjun.cn/tags/%E4%BA%A4%E6%8D%A2%E6%9C%BA/"/>
    
    <category term="RSTP" scheme="https://blog.mbrjun.cn/tags/RSTP/"/>
    
    <category term="STP" scheme="https://blog.mbrjun.cn/tags/STP/"/>
    
    <category term="生成树" scheme="https://blog.mbrjun.cn/tags/%E7%94%9F%E6%88%90%E6%A0%91/"/>
    
    <category term="生成树协议" scheme="https://blog.mbrjun.cn/tags/%E7%94%9F%E6%88%90%E6%A0%91%E5%8D%8F%E8%AE%AE/"/>
    
    <category term="快速生成树协议" scheme="https://blog.mbrjun.cn/tags/%E5%BF%AB%E9%80%9F%E7%94%9F%E6%88%90%E6%A0%91%E5%8D%8F%E8%AE%AE/"/>
    
    <category term="OvS" scheme="https://blog.mbrjun.cn/tags/OvS/"/>
    
    <category term="Proxmox VE" scheme="https://blog.mbrjun.cn/tags/Proxmox-VE/"/>
    
    <category term="Linux Bridge" scheme="https://blog.mbrjun.cn/tags/Linux-Bridge/"/>
    
  </entry>
  
  <entry>
    <title>原神私服 Android 游玩教程 (免 root)</title>
    <link href="https://blog.mbrjun.cn/archives/454/"/>
    <id>https://blog.mbrjun.cn/archives/454/</id>
    <published>2022-05-22T07:14:00.000Z</published>
    <updated>2022-07-25T13:38:52.000Z</updated>
    
    <content type="html"><![CDATA[<p>由于 Google 的限制和一些其他原因，在 Android 上游玩原神私服并没有 iOS、Windows 这么容易</p><span id="more"></span><hr><h2 id="准备材料"><a href="#准备材料" class="headerlink" title="准备材料"></a>准备材料</h2><ul><li><del>一台能读写 &#x2F;system 分区的 Android 手机（或：一台安装了 Magisk 的 Android 手机）</del> 有人搞出来免root端了，此条件不再必须</li><li>私服客户端 <a href="https://download.mbrjun.cn/Files/APK/Genshin-Impact-c260.apk">v2.6</a> 或者 <a href="https://download.mbrjun.cn/Files/APK/genshin-impact-lv0-lspatched.apk">v2.7</a></li><li>一台私服服务器</li><li>Grasscutter</li><li>mitmproxy</li><li>Wi-Fi</li></ul><h2 id="教程"><a href="#教程" class="headerlink" title="教程"></a>教程</h2><p>先把 Grasscutter 配置好，不同系统配置方法不一样，基本概括为以下几点</p><ul><li>下载 Gresscutter：<a href="https://github.com/Grasscutters/Grasscutter/releases">https://github.com/Grasscutters/Grasscutter/releases</a></li><li>下载 Java（JDK）</li><li>运行 Gresscutter</li></ul><p>搭建Grasscutter可以去看 <a href="https://blog.cyznb.eu.org/archives/70/">BLxcwg666</a> 的教程</p><p>安装好 Gresscutter 之后，服务器随便找个地方新建个 proxy.py，放下面的内容</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment">##</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment">#   Copyright (C) 2002-2022 MlgmXyysd All Rights Reserved.</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment">##</span><br><br><span class="hljs-comment">##</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment">#   Genshin Impact script for mitmproxy</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment">#   https://github.com/MlgmXyysd/</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment">#   *Original fiddler script from https://github.lunatic.moe/fiddlerscript</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment">#   Environment requirement:</span><br><span class="hljs-comment">#     - mitmdump from mitmproxy</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment">#   @author MlgmXyysd</span><br><span class="hljs-comment">#   @version 1.1</span><br><span class="hljs-comment">#</span><br><span class="hljs-comment">##</span><br><br><span class="hljs-keyword">from</span> mitmproxy <span class="hljs-keyword">import</span> http<br><span class="hljs-keyword">from</span> proxy_config <span class="hljs-keyword">import</span> USE_SSL<br><span class="hljs-keyword">from</span> proxy_config <span class="hljs-keyword">import</span> REMOTE_HOST<br><span class="hljs-keyword">from</span> proxy_config <span class="hljs-keyword">import</span> REMOTE_PORT<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">MlgmXyysd_Genshin_Impact_Proxy</span>:<br><br>    LIST_DOMAINS = [<br>        <span class="hljs-string">&quot;api-os-takumi.mihoyo.com&quot;</span>,<br>        <span class="hljs-string">&quot;hk4e-api-os-static.mihoyo.com&quot;</span>,<br>        <span class="hljs-string">&quot;hk4e-sdk-os.mihoyo.com&quot;</span>,<br>        <span class="hljs-string">&quot;dispatchosglobal.yuanshen.com&quot;</span>,<br>        <span class="hljs-string">&quot;osusadispatch.yuanshen.com&quot;</span>,<br>        <span class="hljs-string">&quot;account.mihoyo.com&quot;</span>,<br>        <span class="hljs-string">&quot;log-upload-os.mihoyo.com&quot;</span>,<br>        <span class="hljs-string">&quot;dispatchcntest.yuanshen.com&quot;</span>,<br>        <span class="hljs-string">&quot;devlog-upload.mihoyo.com&quot;</span>,<br>        <span class="hljs-string">&quot;webstatic.mihoyo.com&quot;</span>,<br>        <span class="hljs-string">&quot;log-upload.mihoyo.com&quot;</span>,<br>        <span class="hljs-string">&quot;hk4e-sdk.mihoyo.com&quot;</span>,<br>        <span class="hljs-string">&quot;api-beta-sdk.mihoyo.com&quot;</span>,<br>        <span class="hljs-string">&quot;api-beta-sdk-os.mihoyo.com&quot;</span>,<br>        <span class="hljs-string">&quot;cnbeta01dispatch.yuanshen.com&quot;</span>,<br>        <span class="hljs-string">&quot;dispatchcnglobal.yuanshen.com&quot;</span>,<br>        <span class="hljs-string">&quot;cnbeta02dispatch.yuanshen.com&quot;</span>,<br>        <span class="hljs-string">&quot;sdk-os-static.mihoyo.com&quot;</span>,<br>        <span class="hljs-string">&quot;webstatic-sea.mihoyo.com&quot;</span>,<br>        <span class="hljs-string">&quot;webstatic-sea.hoyoverse.com&quot;</span>,<br>        <span class="hljs-string">&quot;hk4e-sdk-os-static.hoyoverse.com&quot;</span>,<br>        <span class="hljs-string">&quot;sdk-os-static.hoyoverse.com&quot;</span>,<br>        <span class="hljs-string">&quot;api-account-os.hoyoverse.com&quot;</span>,<br>        <span class="hljs-string">&quot;hk4e-sdk-os.hoyoverse.com&quot;</span>,<br>        <span class="hljs-string">&quot;overseauspider.yuanshen.com&quot;</span>,<br>        <span class="hljs-string">&quot;gameapi-account.mihoyo.com&quot;</span>,<br>        <span class="hljs-string">&quot;minor-api.mihoyo.com&quot;</span>,<br>        <span class="hljs-string">&quot;public-data-api.mihoyo.com&quot;</span>,<br>        <span class="hljs-string">&quot;uspider.yuanshen.com&quot;</span>,<br>        <span class="hljs-string">&quot;sdk-static.mihoyo.com&quot;</span>,<br>        <span class="hljs-string">&quot;abtest-api-data-sg.hoyoverse.com&quot;</span>,<br>        <span class="hljs-string">&quot;log-upload-os.hoyoverse.com&quot;</span><br>    ]<br><br>    <span class="hljs-keyword">def</span> <span class="hljs-title function_">request</span>(<span class="hljs-params">self, flow: http.HTTPFlow</span>) -&gt; <span class="hljs-literal">None</span>:<br>        <span class="hljs-keyword">if</span> flow.request.host <span class="hljs-keyword">in</span> self.LIST_DOMAINS:<br>            <span class="hljs-keyword">if</span> USE_SSL:<br>                flow.request.scheme = <span class="hljs-string">&quot;https&quot;</span><br>            <span class="hljs-keyword">else</span>:<br>                flow.request.scheme = <span class="hljs-string">&quot;http&quot;</span><br>            flow.request.host = REMOTE_HOST<br>            flow.request.port = REMOTE_PORT<br><br>addons = [<br>MlgmXyysd_Genshin_Impact_Proxy()<br>]<br></code></pre></td></tr></table></figure><h2 id="CA-安装"><a href="#CA-安装" class="headerlink" title="CA 安装"></a>CA 安装</h2><p>然后把 mitmproxy 的证书安装到手机里<br>自带的证书是用户目录下的 <code>.mitmproxy</code> 里面的 <code>mitmproxy-ca-cert.cer</code></p><p>手机插数据线到电脑，或者用传输工具，把 mitmproxy-ca-cert.cer 拷贝到手机的存储里（ &#x2F;sdcard）<br>然后进入手机上的 <strong>设置 &gt; 安全性和隐私 &gt; 加密与凭据 &gt; 安装证书 &gt; CA 证书</strong>（不同手机可能设置方法略有差异，可以尝试在设置内搜索 CA，或者百度一下）安装你刚刚传进去的 <code>mitmproxy-ca-cert.cer</code></p><h2 id="mitmproxy"><a href="#mitmproxy" class="headerlink" title="mitmproxy"></a>mitmproxy</h2><p>然后进入 mitmproxy 安装目录，执行：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">mitmweb -s proxy.py --ssl-insecure --<span class="hljs-built_in">set</span> block_global=<span class="hljs-literal">false</span> --listen-port 1145 --certs <span class="hljs-string">&quot;Genshin Impact.pem&quot;</span><br></code></pre></td></tr></table></figure><p>注意：</p><ul><li>proxy.py 替换为上面你保存的 proxy.py 的路径</li><li>监听端口随意 1-65535，选择一个不冲突的端口，如果冲突了后面可能会报错 WinError，不建议：7890 8080，容易被扫描到，记下这个端口</li><li>后面可以用 –certs 引入自己的证书，不需要引入自己的证书可以直接删除该参数</li></ul><p>如果是自己的证书，CA 请使用 v3 版本（OpenSSL 默认 v1)，私钥请选择 RSA 2048，如果证书开头是 <code>-----BEGIN RSA PRIVATE KEY-----</code>，改成<code>-----BEGIN PRIVATE KEY</code></p><h2 id="证书移动至-SYSTEM-TRUST"><a href="#证书移动至-SYSTEM-TRUST" class="headerlink" title="证书移动至 SYSTEM TRUST"></a><del>证书移动至 SYSTEM TRUST</del></h2><p>如果<strong>使用上面提供的修改版客户端</strong>，就<strong>不需要执行这个步骤</strong>了（如果有问题，你还是可以试试执行下这个步骤</p><p>需要使用 Magisk</p><p>Magisk 刷入 <a href="https://github.com/Magisk-Modules-Repo/movecert">https://github.com/Magisk-Modules-Repo/movecert</a> 模块，重启<br>如果无法刷入，尝试使用兼容模式刷入</p><blockquote><p>Magisk 是啥？<br>root 手机用的，还有很多其他功能<br>需要解锁 Bootloader 才能安装 Magisk，Magisk 不同设备安装方法不同，网上搜一下吧</p></blockquote><h2 id="代理配置"><a href="#代理配置" class="headerlink" title="代理配置"></a>代理配置</h2><p>进入你手机的 Wi-Fi 配置界面，点开你 Wi-Fi 的详细信息（，部分手机：点开编辑页面），找到设置代理，代理模式改为<strong>手动</strong><br>代理服务器设置为你私服的 IP，端口填写上面配置的端口，然后保存<br><img src="https://cos.mbrjun.cn/IMGS/2022/05/29/eu.png" alt=" 分别填写私服 IP，私服端口，第三个留空 "></p><h2 id="完成"><a href="#完成" class="headerlink" title="完成"></a>完成</h2><p><del>去 Google Play 下载 Genshin Impact</del>下载文章开头的私服客户端，应该可以正常游玩了（注意：官网下的连不上私服）</p><hr><p>关于 Android 一些限制：原神不会信任 USER TRUST 的证书，必须安装到 SYSTEM TRUST，私服客户端忽略这个限制</p><p>有问题可以底下评论反馈，文章会及时修改。</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;由于 Google 的限制和一些其他原因，在 Android 上游玩原神私服并没有 iOS、Windows 这么容易&lt;/p&gt;</summary>
    
    
    
    <category term="游戏" scheme="https://blog.mbrjun.cn/categories/%E6%B8%B8%E6%88%8F/"/>
    
    
    <category term="原神" scheme="https://blog.mbrjun.cn/tags/%E5%8E%9F%E7%A5%9E/"/>
    
    <category term="Grasscutter" scheme="https://blog.mbrjun.cn/tags/Grasscutter/"/>
    
    <category term="mitmproxy" scheme="https://blog.mbrjun.cn/tags/mitmproxy/"/>
    
    <category term="私服" scheme="https://blog.mbrjun.cn/tags/%E7%A7%81%E6%9C%8D/"/>
    
    <category term="Genshin Impact" scheme="https://blog.mbrjun.cn/tags/Genshin-Impact/"/>
    
    <category term="原神私服" scheme="https://blog.mbrjun.cn/tags/%E5%8E%9F%E7%A5%9E%E7%A7%81%E6%9C%8D/"/>
    
  </entry>
  
  <entry>
    <title>寂静之城</title>
    <link href="https://blog.mbrjun.cn/archives/452/"/>
    <id>https://blog.mbrjun.cn/archives/452/</id>
    <published>2022-05-19T05:10:00.000Z</published>
    <updated>2022-05-19T13:28:55.000Z</updated>
    
    <content type="html"><![CDATA[<p>And in the naked light I saw ten thousand people, maybe more.</p><p>People talking without speaking, people hearing without listening.</p><p>People writing songs that voices never shared, no one dared disturb the</p><p>sound of silence.</p><p>— The sound of silence</p><span id="more"></span><p>美利坚合众国，2015年，纽约。</p><p>当电话响起来的时候，阿瓦登正趴在电脑前面睡觉。电话铃声十分急促，尖锐，每一次振动都让他的耳膜难受好久。他揉了揉干涩的眼睛，十分不情愿地爬起来，觉得脑子沉滞无比。</p><p>其实他的脑子一直就很沉滞，这种感受既然是生理上的也是心理上的。他身处的房间很狭窄，空气不很好，唯一的两扇窗户紧闭着——即使打开窗户也没用，外面的空气更加浑浊。这是一间大约只有三十平米的小屋子，屋子墙壁上泛黄的墙纸有好几处开始剥落，天花板上的水渍渗成奇怪的形状；一张老式的军绿色行军床摆在墙角，床腿用白漆写着编号；紧挨着行军床的是一张三合板制成的电脑桌，桌上摆着一台浅白色的电脑，机箱后面五颜六色的电线纠缠在一起，把它们自己打成一个古怪的死结，杂乱无章地蔓延到地板与墙角，仿佛常春藤一样。</p><p>阿瓦登走到电话前，慢慢坐到地板上，目光呆滞地盯着电话，手却没有动。这部古怪的东西是老式的按键式电话，大概是十几年前的款式，这是阿瓦登有一次去费城出差时偶尔在一家杂货店里买到的；他拿回家以后稍微修理了一下，发现居然还能用，这让他当时小小地兴奋了一阵子。</p><p>电话继续在响着，已经是第七声。阿瓦登意识到自己不得不去接听了。于是他弓下腰，用两个指头拈起电话，慢慢把电话放到耳边。</p><p>“请说出你的网络编号？”话筒里传来的声音并不急噪，事实上它也不带其他任何的感情色彩，因为这是电脑合成的人工智能语音系统。</p><p>“19842015”</p><p>阿瓦登熟练地报出一连串数字，同时开始觉得胸有些更闷了。说实话他并不喜欢这些空洞的电子声音，他有时候想，假如打过电话来的是一位声音圆润的女性该多好。阿瓦登知道这是一种不切实际的幻想，不过这幻想会让他的身体得到几秒钟的舒缓。</p><p>话筒里的声音仍旧在继续着。</p><p>“关于你在十月四日提交的网络论坛用户注册申请已经被受理，经有关部门审查后确认资格无误，请在三日内持本人身份证件、网络使用许可证及相关文件前往办理登记手续，并领取用户名及密码。”</p><p>“知道了，谢谢。”</p><p>阿瓦登谨慎地选择词语，同时努力挤出一副满足的微笑，好象话筒的另一侧有人在看着自己一样。放下电话，阿瓦登先是茫然地盯着它看了大约两分钟，然后站起来活动一下手腕，坐回到电脑前面，缓慢地推动了一下鼠标。</p><p>电脑屏幕“啪”地一声亮了起来，显示出一个登陆的界面，还有一行英文：“请输入你的网络编号和姓名。”阿瓦登将那八位数字敲进去，又输入了自己的名字，点击“登陆”。随即机箱的指示灯开始频繁地闪动起来，整个机器发出细微的噪音。</p><p>每一个使用互联网的人都有一个网络编号，没有这个编号，就无法连接进互联网络。每一个编号都是独一无二的，每个人只有一个；这是使用者在网上的唯一代号，既不能修改，也不能取消。这些编号分别对应着使用者身份证上的名字，因此19842015就是阿瓦登，阿瓦登就是19842015。阿瓦登知道有些记忆力不好的人会把自己的编号印在衣服的后面，那看起来颇为滑稽，也容易引发一些不正当的联想。</p><p>有关部门说使用网络实名制是为了规范网络秩序方便管理，杜绝因匿名使用网络而产生的一系列重大问题和混乱。阿瓦登不太清楚那一系列重大问题会是什么，他自己没试过用假名上网，他所认识的任何人里也不曾有人尝试过——事实上，从技术角度来说，他根本没办法匿名登陆互联网络，没有编号就没有权限上网，而编号则连接着他的详细档案，换句话说，没人能在网上隐藏自己。有关部门把这一切都考虑的很周详。</p><p>“有关部门”，这是一个语意模糊、但却有着权威与震慑力的词组。它既是泛指，又是确指，其所涵盖的意义相当广泛。有时候，它指的是为阿瓦登颁发网络编号的美国联邦网络管理委员会；有时候它是将最新通告及法规发到阿瓦登EMAIL信箱的服务器；还有时候它是监察网络的FBI特属网络调查科；总之一句话，有关部门是无处不在，无职不司的，总会在适当的时候出现，给予指导、监控或者警告，无论你是在网上还是网下。</p><p>简直就象是老大哥一样无微不至。</p><p>电脑仍旧在持续运转着，阿瓦登知道这得花上一阵子。这台电脑是有关部门配发给他的，具体型号和配置阿瓦登并不清楚，机箱是被焊死的，无法打开。于是他拿出一小瓶清凉油，用右手小拇指的指甲挑出一点抹在自己的太阳穴，然后从脚下堆积如山的杂物里翻出一个塑料杯子，从桌子旁的饮水机里接了半杯蒸馏水，就着一片镇痛片一饮而尽。蒸馏水穿过喉咙和狭长的食道滑进胃里，空泛的味道让他有些恶心。</p><p>音响里忽然传来一阵美国国歌的旋律，阿瓦登放下杯子，重新把目光投到电脑上去。这是已经连入互联网络的标志。屏幕上首先跳出来的是有关部门的通告，白底黑色四号字，里面陈述了使用互联网的意义以及最新的规章制度。</p><p>“缔造健康的互联网络，美国万岁！”</p><p>音响里传来激昂的男性呼声，阿瓦登不大情愿地跟着大声念了一遍。“缔造健康的互联网络，美国万岁！”</p><p>这段呼号持续了三十秒钟，然后消失，取而代之的是写着“缔造健康的互联网络”标语的桌面背景。另外一个窗口慢慢浮上开，上面开列出几个选项：工作、娱乐、电子信箱和BBS论坛。其中BBS选项呈现灰色，说明这项功能还没有开通。</p><p>整个操作系统简洁明了，这台电脑的浏览器没有地址输入栏，只是在收藏夹里有几个无法修改的的网站地址。理由很简单，这些网站都是健康向上的，假如其他站点和这些网站一样，那么只保留这些网站就够了；假如其他站点与这些网站不一样，那么就是不健康的，是低级趣味，不能保留。这是有关部门精心设计的，是为了公民的精神健康着想，生怕他们受到不良信息的侵染。</p><p>阿瓦登首先点开了“工作”，一连串和他工作相关的站点列表与相关软件在电脑上显示出来。阿瓦登是一名程序员，他每天的工作就是根据上级的要求编写程序。这份工作很无聊，不过可以保证他有稳定的收入。他不知道自己的源代码会被用到哪里去，上级也从来没有跟他说过。</p><p>他打算继续昨天的工作，但是很快发现自己很难继续下去。阿瓦登觉得今天的情绪比以前要烦躁，无法集中精神，大脑还是很呆滞，胸口仍旧发闷。他试图娱乐自己，但是他发现“娱乐”选项里只有纸牌与挖地雷，根据有关部门的说法，这是两个健康的游戏，没有暴力，没有色情，不会让人产生犯罪冲动，也不涉及任何政治色彩。据说美国境外也是有互联网络站点的，不过无法连上去，因为本国的互联网络自成格局，独立自主，普通人无法直接连接到国外——IE浏览器没有地址栏，就算知道地址也没有用处。</p><p>“您有一封新邮件。”</p><p>系统忽然跳出来提示，阿瓦登终于找到了可以暂停工作的理由，他很快移动鼠标到电子信箱的选项上，点开，很快一个新的界面出现了。</p><p>“To: 19842015</p><p>From：10045687</p><p>Subject: 模块、已经、完成、当前、项目、是否、开始。”</p><p>阿瓦登微微地叹了一口气，觉得有些失望。每一次他收到新的电子邮件，都希望能够有一次新鲜的刺激来撞击他日益迟钝的脑神经，每一次他都失望了。其实他早就知道这一点，只不过他觉得保持期待至少能够享受到几秒钟快感。就好象他期待着打电话过来的是一个圆润温柔的女性声音一样。不给自己一些渺茫的希望，阿瓦登觉得自己迟早会疯掉的。</p><p>这封信很简短，但是内容很充实。19842015是阿瓦登的网络编号，而10045687则是他的一位同事的编号，这种工作性质的信件通常都以编号相称。信的内容是几个不连续的英文单词，这是有关部门所提倡的一种电子邮件书写方式，因为这样可以方便软件检查信件中是否含有敏感词汇。</p><p>阿瓦登打开回信的页面，同时另开了一个窗口，打开一份名字叫做“网络健康语言词汇列表”的TXT文档。这是有关部门要求每一位网民所必须使用的词汇。当他们书写电子邮件或者使用论坛服务的时候，都得从这个词汇列表中寻找适合的名词、形容词、副词或者动词来表达自己想要说的话。一旦过滤软件发现网民使用了列表以外的词，那么这个词就会被自动屏蔽，取而代之的是“请使用健康语言”。</p><p>“屏蔽”是个专有名词，被屏蔽的词将不允许再度被使用，无论是在书信里还是口头都不允许。讽刺的是，“屏蔽”一词本身也是被屏蔽的词汇之一。</p><p>这个列表是经常更新的，每一次更新都会有几个词在列表上消失，于是阿瓦登不得不费劲脑汁寻找其他词语来代替那个被屏蔽掉的词语或者单字。比如在以前，“运动”这个词是可以使用的，但后来有关部门宣布这也是一个敏感词汇，阿瓦登只好使用“质点位移”来表达相同的意思。</p><p>他对照着这份列表，很快就完成了一封文字风格与来信差不多的EMAIL——健康词汇表迫使人们不得不用最短的话来表达最多意思，而且要尽量减少不必要的修辞，所以这些信件就好象是那杯蒸馏水一样，淡而无味，阿瓦登有时候想，他早晚也会和这些水和信一样腐烂，因为这些信是他写的，水是他喝的。</p><p>接下来阿瓦登启动检查软件先扫了一遍，确保自己没无意中加入什么敏感词汇。等这一切都完成后，他按下了发送键，邮件被送出去了。</p><p>阿瓦登没有留下备份，因为他的机器里没有硬盘，也没有软驱、光驱或者USB接口。这个时代宽带技术已经得到了很大发展，应用软件可以集中在统一的一个服务器中，个人用户调用时的速度丝毫不会觉得迟滞。因此个人不需要硬盘，也不需要本地存储，他们在自己电脑里写的每一份文档、每一段程序、甚至每一个动作都会被自动传送到有关部门的公共服务器中，这样便于管理。换句话说，阿瓦登所使用的电脑，仅仅具备输入和输出两种功能。</p><p>完成了这封信后，阿瓦登再度陷入了软绵绵的焦躁状态，这是一个连续工作了三天的程序员的正常反应。这种情绪很危险，因为它让人效率低下精神低迷，而且没有渠道发泄。“疲劳”、“烦躁”以及其他负面词汇都属于危险词汇，如果他写信给别人抱怨的话，那么对方收到的将会是一封写满“请使用健康语言”的EMAIL。</p><p>这就是阿瓦登每天的生活，今天比昨天更糟糕，但应该比明天还稍微好一点。事实上这个叙述也很模糊，因为阿瓦登自己并不清楚什么是“好一点”，什么是“更糟糕”。“好”与“坏”是两个变量，而他的生活就是一个定量，只有一个常数叫“压抑”。</p><p>阿瓦登推开鼠标，把脑袋向后仰去，长长地呼了一口气。（至少“呼”这个字还没有被屏蔽）这是空虚的表现，他想哼些歌，但却又不记得什么，转而吹了几下口哨，但那听起来与一只生了肺结核的狗差不多，只得做罢。有关部门象幽灵一样充斥在整个房间里，让他无法舒展自己的烦闷。就好象一个人在泥沼里挣扎，刚一张口就被灌入泥水，甚至无法大声呼救。</p><p>他的头不安分地转了几转，眼神偶尔撇到了摆在地板上的老式电话机，他忽然想到还必须要去有关部门申请自己的BBS论坛浏览许可证。于是他关掉“工作”和“电子邮件”窗口，退出了网络登陆。阿瓦登在做这些事的时候毫不犹豫，他很高兴能够暂时摆脱互联网络，在那上面他只是一串枯燥的数字和一些“健康词汇”的综合体。</p><p>阿瓦登找出一件破旧的黑色呢子大衣，那件大衣继承自他的父亲，袖口和领子已经磨损的很严重，个别地方有灰色的棉花露出来，但还是很耐寒。他把大衣套到身上，戴上一副墨绿色的护镜，用过滤口罩捂住嘴。他犹豫了一下，拿起“旁听者”别在耳朵上，然后走出家门去。</p><p>纽约的街上人很少，在这个时代，互联网的普及率相当地高，大部分事务在网上就可以解决，有关部门并不提倡太多的户外活动。太多的户外活动会导致和其他人发生物理接触，而两个人发生物理接触后会发生什么事则很难控制。</p><p>“旁听者”就是为了防止这种事而发生的，这是一种便携式的语言过滤器，当携带者说出敏感词汇的时候，它就会自动发出警报。每一位公民外出前都必须要携带这个装置，以便随时检讨自己的言语。当人们意识到旁听者存在的时候，他们往往会选择沉默，至少阿瓦登是如此。有关部门正逐步试图让网络和现实生活统一起来，一起“健康”。</p><p>这时候正是11月份，寒风凛冽，天空漂浮着令人压抑的铅灰阴云，街道两旁的电线杆仿佛落光了叶子的枯树，行人们都把自己包裹在黑色或灰色的大衣里面，浓缩成空旷街道上的一个个黑点飞快移动着。一层若有若无的烟雾将整个纽约笼罩起来，不用过滤口罩在这样的空气里呼吸将会是一件很有挑战的事情。</p><p>距离上一次离开家门已经有两个月了吧，阿瓦登站在公共汽车站的站牌下，不无感慨地想，周围的一切看起来很陌生，泛黄，而且干燥。那是上一次沙尘暴的痕迹。不过沙尘暴这个词也已经被屏蔽了，因此阿瓦登的脑海里只是闪过那么一下，思想很快就转移到别的事情上去了。</p><p>站在阿瓦登旁边的是一个穿着蓝色制服的高个男人。他先是狐疑地看了阿瓦登一眼，看到后者沉默地沉在黑色大衣里，他的两只脚交替移动，缓慢地凑了过去，装做漫不经心对阿瓦登说：</p><p>“烟，有吗？”</p><p>男人说，每一个字都说的很清晰，而且词与词之间间隔也足够长。这“旁听者”还没有精密到能够完全捕捉到每一个人语速和语调的程度，因此有关部门要求每一位公民都要保持这种说话风格，以方面检测发言人是否使用了规定以外的词汇。</p><p>阿瓦登转过头去，看了他一眼，舔舔自己干裂的嘴唇，回答说：</p><p>“没有。”</p><p>男人很失望，又一次不甘心地张开嘴。</p><p>“酒，有吗？”</p><p>“没有。”</p><p>阿瓦登又重复了一次这个词，他也已经很久没有收到烟和酒了，也许是缺货的关系吧，这是常有的事。不过有一点很奇怪，“旁观者”这一次却没有发出警报。以阿瓦登的经验，以往一旦烟、酒或者其他生活必需品发生短缺现象，这个词就会暂时成为被屏蔽掉的敏感词汇，直到恢复供给为止。</p><p>这个男人看起来很疲惫，红肿的眼睛是这个时代的人们普遍的特征，这是长时间挂在网上的关系。他的头发蓬乱，嘴边还留着青色的胡子碴，制服下的衬衣领口散发着刺鼻的霉味。能看的出，他也很久不曾到街上来了。</p><p>阿瓦登这时候才注意到，他的耳朵上空荡荡的，没有挂着那个银灰色的小玩意“旁听者”，这实在是一件严重的事情。不携带“旁听者”外出，就意味着语言不会再被过滤，一些不健康的思想和言论就有可能孳生，因此有关部门相当严厉地规定公民上街必须携带旁听者。而这个男人的耳朵旁却什么也没有。阿瓦登暗暗吃惊，一时间不知道是该去提醒还是装做没看到。他暗自想，也许向有关部门举报会更好。</p><p>这时候那个男人又朝他靠近了一点，眼神变的饥渴起来。阿瓦登心里一阵紧张，下意识地向后退去。这难道是一次抢劫？还是说他是个压抑太久的同性恋者？那个男人忽然扯住他的袖子，阿瓦登狼狈地挣扎却没有挣开。出乎他的意料，那个男人并没有进一步的动作，而是大吼一声，用一种阿瓦登已经不太习惯了的飞快语速向他倾泻起话语来。阿瓦登被这突如其来的爆发弄的莫名其妙，不知所措。</p><p>“我只是想和你多几句话，就几句，我很久没有说过话了。我叫斯多葛，今年三十二岁，记得，是三十二岁。我一直梦想有一套在湖边的房子，有一副钓鱼竿和一条小艇；我讨厌网络，打倒网管；我妻子是个可恶的网络中毒者，她只会用枯燥乏味的话叫我的网络编号；这个城市就是一个大疯人院，里面大疯子管着小疯子，并且把所有没疯的人变的和他们同样疯狂；敏感词汇都去他X的，老*受够了……”</p><p>男人的话仿佛一瓶摇晃了很久然后突然打开的罐装碳酸饮料，迅猛，爆裂，而且全无条理。阿瓦登惊愕地望着这个突然狂躁起来的家伙，却不知道如何应对；更可怕的是，他发现自己居然对他产生了一点同情，那种“同病相怜”式的同情。男人的话这时候已经从唠叨变成了纯粹谩骂，全部都是最直抒胸臆的那种。阿瓦登已经有五、六年不曾说过这些脏话，最后一次听到这些也是四年前。有关部门认为这都有碍精神文明，于是全部都屏蔽掉了。</p><p>而现在这个男人就在公众场合对着他大吵大嚷，似乎要将被屏蔽掉的敏感词汇一口气全倒出来。他的目光和手势并不针对任何人，甚至也不针对阿瓦登，更象是在一个人在自说自话。阿瓦登的耳膜似乎不习惯这种分贝，开始有些隐隐做痛，他捂着耳朵，拿不定主意是干脆逃掉还是……这时候，远处街道出现两辆警车，一路闪着警灯直直冲着这座公共汽车站而来。</p><p>警车开到站台旁时，男人仍旧在痛骂着。警车门开了，涌出了五、六名全副武装的联邦警察。他们扑过去将那个男子按在地上，用橡皮棍痛打。男人两条腿挣扎着，嘴里的语速更快了，骂出来的话也越来越难听。其中一名警察掏出一卷胶带，“嚓”地一声扯下一条向男人的嘴贴去。男人在嘴被胶带封住之前，突然提高嗓门，冲着警察痛快无比地喊了一句：“FUXKYOU, YOUSONOFBITCH！”阿瓦登看到他的表情由疯狂变成享受，面带着微笑，似乎完全陶醉在那一句话所带来的无上快感和解脱感中。</p><p>联邦警察们七手八脚地将男人送进了警车，这时才有一名警察走到了阿瓦登的跟前。</p><p>“他，是，你朋友？”</p><p>“我，不，认识。”</p><p>警察盯了他一阵，取下他耳朵上的“旁观者”查看记录，发现他并没有提及任何敏感词汇，于是重新给他戴回去，警告他说那名男子说的全部都是极度反动的词汇，要求他立刻忘掉，然后转身押着那男子离开了。</p><p>阿瓦登松了一口气，其实刚才他有一瞬间涌现出一种冲动，也想在这空旷的街道上大喊一声“FUXKYOU, YOUSONOFBITCH”那一定很爽快，他心里想，因为那男子说出这句话的时候表情很享受。不过他也知道，这也是妄想的一种，“旁观者”紧帖在耳朵上的冰凉感觉时刻提醒着他。</p><p>街上很快就恢复了冷清，十分钟后，一辆公共汽车慢吞吞地开进站里，锈迹斑斑的车门哗啦一声打开，一个电子女声响彻整个空荡荡的车厢：“请乘客注意文明用语，严格按照健康词汇发言。”</p><p>阿瓦登把自己缩进大衣，压抑住自己异样的兴奋，决定继续保持沉默下去。</p><p>大约过了一个小时，公共汽车到了目的地。从破碎的车窗玻璃里吹进来的寒风让阿瓦登脸上挂起一层暗灰色的霜气，面部被风中的沙砾和煤渣刮的生疼。他听到电子女声报出了站名，就站起身来，象一条狗一样抖抖身上的土，走下车去。</p><p>车站对面就是阿瓦登要去的地方，那是有关部门负责受理BBS论坛申请的网络部。这是一间五层的大楼，正方形，全水泥混凝土结构，外表泛灰。如果没有那几个窗户的话，那么它的外貌将与水泥块没有任何区别：生硬、死气沉沉，让蚊子和蝙蝠都退避三舍。</p><p>BBS论坛是一种奇特的东西，从理论上来讲它完全多余，BBS的功能完全可以由EMAIL新闻组来取代，后者更容易管理和审查。而且申请使用BBS论坛资格不是件容易的事，申请人必须要通过十几道手续和漫长的审查才能有浏览资格，浏览资格三个月才会被允许在指定论坛发布帖子，至于自己开设BBS则几乎是不可能。</p><p>因此真正对BBS有兴趣的人少之有少。阿瓦登当初之所以决定申请BBS论坛资格，纯粹是因为他那种模糊但却顽强的怀旧心态，就好象他从杂货店里买的那部老式电话一样。他也不知道自己为什么会自找麻烦，也许是为了给生活带来些刺激，还是说为了强调自己和曾经旧时代的那么一点点联系，也许两者兼有之。</p><p>阿瓦登恍惚记得在他小的时候，互联网与现在并不太一样。并不是指技术上的不同，而是一种人文的感觉。他希望能通过使用BBS论坛回想起一些当年的事情。</p><p>阿瓦登走进网络部的大楼，大楼里和外面一样寒冷，而且阴森。走廊里没有路灯，蓝白色调的两侧墙壁贴满了千篇一律的网络规章条文与标语，冰冷的空气呼吸到肺里，让阿瓦登一阵痉挛。只有走廊尽头的小门缝隙里流泻出一丝光亮，小门的上面挂着一块牌子，上面写的是“网络部BBS论坛科。”</p><p>一走进这间屋子，阿瓦登立刻感觉到一阵温洋洋的热气。屋子里的暖气（或者是空调）开的很大，让阿瓦登冻麻了的手脚和脸麻酥酥的，有些发痒，他不禁想伸出手去挠挠。</p><p>“公民，请您站在原地不要动。”</p><p>一个电子女声忽然从天花板上的喇叭里传来，阿瓦登触电似地把手放下，恭敬地站在原地不同。他借这个机会观察了一下这间屋子。这屋子准确来说应该是一个狭长形的大厅，一道拔地而起的大理石柜台象长城一样将房间割裂成两部分，柜台上还装着一排银白色的圆柱形栅栏，直接连到天花板。屋子里没有任何装饰，没有观赏植物，没有塑料鲜花，甚至没有长椅和饮水机。</p><p>“缔造健康的互联网络，美国万岁。”</p><p>阿瓦登跟着声音重复了一遍。</p><p>“请前往八号窗口。”</p><p>电子女声的语调很流畅，因为这是电脑制作出来的，因此没有敏感词汇的限制。</p><p>阿瓦登转头看到在自己右手边的不远处，大理石柜台上的液晶屏幕显示着八号的字样。他走过去，拼命抬起头，因为柜台实在太高了，他只能勉强看到边缘，而无法看到柜台另一侧的情形。不过他能听到，一个人走到柜台对面，坐下去，并有翻动纸张与敲击键盘的声音。</p><p>“请把文件放入盒子里。”</p><p>柜台上的喇叭传来命令。出乎意料，这一次在喇叭里的声音却变了。虽然同样冷漠枯燥，但阿瓦登还是能分辨出它与电子女声的不同——这是一个真正的女性的声音。他惊讶地抬头望去，却什么都看不到，柜台太高了。</p><p>“请把文件放入盒子里。”</p><p>声音又重复了一次，语气里带着一丝烦躁，似乎对阿瓦登的迟钝很不满。</p><p>“是的，这是真正的女声……”阿瓦登想，电子女声永远是彬彬有礼不带任何感情色彩的。他把相关的电子身份证、网络许可证、网络编号和敏感词汇犯罪记录等一系列个人资料卡片一起放进柜台外的一个小金属盒子里，然后把盒子插进柜台上一个同样大小的凹槽中，关好门。很快他听到“唰”的一声，他猜测这也许是对面的人——也许是个女人——将盒子抽出去的声音。</p><p>“你申请BBS服务的目的是什么？”</p><p>喇叭后的女声浸满了纯粹事务性的腔调。</p><p>“为了、提高、互联网络、工作效率、为了、缔造、一个、健康、的网络、环境，更好地、为、祖国、做出、贡献。”</p><p>阿瓦登一字一句地回答，心里知道这只是一道官方程序，只需要按标准回答就可以。</p><p>对面很快就陷入沉默，大约过了十五分钟，喇叭再度响起。</p><p>“最后手续确认，你已经获得BBS论坛浏览权。”</p><p>“谢谢。”</p><p>“砰”的一声，金属盒子从柜子里弹了出来，里面除了阿瓦登的证件以外还多了五张小尺寸光盘。</p><p>“这是有关部门核发给你的BBS论坛统一用户名与密码，BBS论坛列表、互联网BBS论坛使用指南及相应法规、以及最新健康网络词汇列表。”</p><p>阿瓦登向前踏了一步，从盒子里将这些东西一股脑全拿出来，揣进大衣的大兜里。那些东西其实是可以全部放在同一张光盘里的，不过有关部门认为每一张光盘装一份文件有助于用户理解这些文件的严肃性和重要性，并产生敬畏。</p><p>他心里盼望着那个喇叭能再说两句。让他失望的是，对面传来的是一个人起身并且离开的声音，从脚步声的韵律判断，阿瓦登愈发相信这是一名女性。</p><p>“手续办理完毕，请离开网络部回到自己的工作岗位上。”</p><p>甜美空洞的电子女声从天花板上传来，阿瓦登厌恶地抽动鼻翼，拿手揉了揉，转身离开这间温暖的大厅，重新进入到寒冷的走廊。</p><p>在回家的路上，阿瓦登蜷缩在公共汽车上一动不动，顺利申请到BBS的使用权让他有些虚无缥缈的兴奋。他闭着眼睛，找了一个合适的角度躲开破窗而入的寒风，右手在兜里不断摩挲那一系列光盘，还在怀念着那一个神秘的女声。</p><p>如果能再一次听到该多好，他不能抑制自己这样的想法，同时用拇指的指肚在光盘上轻轻地摩擦，幻想这几张光盘也曾经被她的手触摸过。他兴奋的几乎也想破口大骂一句“FUXKYOU, YOUSONOFBITCH”，真奇怪，那名男子的骂声在他的记忆里根深蒂固，并时不时不自觉地滑到唇边。</p><p>忽然，他的手指在光盘上发觉到一丝异常的感觉。阿瓦登下意识地朝四周望去，确认周围一个乘客也没有后，他小心翼翼地把光盘全拿出来，就着窗外的光亮仔细端详。</p><p>阿瓦登很快注意到，在装有BBS论坛列表的光盘背面，被人用指甲轻轻地划了一道刮痕。这条刮痕很轻，如果不是阿瓦登仔细地抚摩光盘的话，是很难发觉到的。这条刮痕很奇特，是一条直线，而在这条直线末端的不远处，则是另外一条极短的刮痕，似乎刻意想弯成一个圆点。整体看上去就好象是一个叹号，或者倒过来说，象是字母i。</p><p>很快他在其他四张光盘上也发现了类似的刮痕，它们造型都不同，但都似乎代表着某种符号。阿瓦登回想起喇叭里那个女声最后一句提到过的文件顺序，于是把这五张光盘按照BBS论坛统一用户名与密码、BBS论坛列表、互联网BBS论坛使用指南、相应法规、以及最新健康网络词汇列表的顺序排列好，接着依次把那五道刮痕用手指临摹到汽车窗户上。很快那些刮痕构成了一个英文单词：</p><p>title</p><p>题目？这是什么意思？</p><p>阿瓦登看着这个单词莫名其妙，这究竟是纯属无意的痕迹，还是有人刻意为之？如果是有人刻意为之，他这么做的用意是什么？</p><p>这时候汽车停住了，又有几名乘客走上车来。阿瓦登挪动一下身体，不让他们看到自己在车窗上写出来的字迹，然后装做打呵欠的样子抬起袖子，轻轻把那五个字母擦掉。</p><p>阿瓦登暗自庆幸，如果他没有在现在发现这些光盘上的痕迹，那么以后就永远没有机会发觉了。按照规定，个人电脑是不允许使用任何存储存设备的，因此阿瓦登的电脑并没有光驱。他下一步所要做的是将这些光盘送交到管区网络安全部，由他们将光盘内资料登陆到服务器中，再转发给阿瓦登。这是为了防止个人私自在家里制造、阅读或者传播黄色或者反动信息，网络安全部发出的通告是这么解释的。联邦的网络警察经常会突入到个人家中进行临时检查，看用户是否非法拥有信息贮存设备，阿瓦登曾经亲眼见过一个邻居被警察带走，原因仅仅是因为他私自藏了一张光盘在家里——其实他只是打算拿那个当茶杯垫用。那个邻居再没回来过。</p><p>无论这些符号代表的是什么意思，它都是一种全新的体验，这让阿瓦登感觉到兴奋。怀旧与渴望新奇是阿瓦登生活在这个时代的两根精神支柱，否则他会与这座城市一样变的僵硬，然后窒息而死。</p><p>他先来到网络安全分部，将光盘交给那里的负责人，负责人反复地检查光盘和阿瓦登的表情，好象所有使用BBS论坛的人都不可信赖一样。末了负责人终于找不到什么破绽，只得将光盘收下，然后举起右手，阿瓦登和他一起高呼“缔造健康的互联网络”。这句话是唯一被允许可以连贯着被说出来的句子。</p><p>回到家里，阿瓦登脱掉大衣，摘了过滤口罩，将旁观者扔到了行军床上，然后整个人也倒进枕头里。每次出去外面都会让他疲劳，这一半是因为他孱弱的肉体已经不大适合室外活动；另外一半原因是因为他必须花费大量的精力来应付旁观者。</p><p>过了四十分钟，他才悠悠地醒过来，头还是和平常一样地疼，胸口还是一如既往地闷。胡乱吃了一点东西以后，阿瓦登爬到电脑桌前，打开电脑，按程序登陆上网络，习惯性地先检查了一遍信箱。</p><p>信箱里有七、八封新的信件，其中两封是同事发来的事务信。另外五封则是网络安全部发给他的，内容就是他送交的那几张光盘。</p><p>阿瓦登打开了包含有BBS论坛的用户名、密码和BBS论坛列表的两封信。他看到自己的论坛通用用户名叫做19842015，和自己的网络编号完全一样，不由得有些失望。他依稀记得在小的时候，BBS论坛的用户名是可以自己决定的，而且每一个论坛都可以不同，一个人在网上并不单只是一串枯燥数字。</p><p>小时候的记忆往往是跟童话和幻想混杂在一起，未必与实际相符。现实中你只能使用有关部门指定的用户名和密码，理由很简单，用户名和密码内也可能含有敏感词汇。</p><p>阿瓦登又打开了那份BBS列表，全部都是有关部门开设的官方论坛，没有私人的——事实上个人能够合法持有的电脑设备从技术上来说也无法架设新BBS——这些论坛的主题各有侧重点不同，但基本上是围绕着如何更好响应国家号召，缔造健康互联网络来说的。比如其中一个电脑技术论坛，主题就是如何更好地屏蔽掉敏感词汇。</p><p>居然在这些论坛中还有一个是关于游戏的。里面正在讨论的是一个如何帮助别人使用健康词汇的网络游戏，玩家可以操纵一名小男孩在街上侦察，看是否有人使用了敏感词汇，小男孩可以选择上前指责或者通知警察，抓到的人越多，小男孩得到的褒奖就越高。</p><p>阿瓦登随便打开了几个论坛，里面的人都彬彬有礼，说话很“健康”，就好象街上的那些行人一样。不，准确地说，比街上的气氛还要压抑。在街上的人也许还有机会保留一下自己的小动作，比如阿瓦登刚才在公共汽车上就偷偷地写了TITLE五个字母；而在网上论坛，人的最后的一点隐私也全被暴露出来，有关部门随时可以调看你的一切行动，无从遁形，这就是科学技术发展所带来的进步。</p><p>一阵失落和失望袭上阿瓦登的心头，他合上眼睛，把鼠标甩开，重重地向后靠去。原来他天真地以为BBS论坛也许会少许宽松一些，现在看来甚至比现实中更叫人窒息，他感觉到自己好象陷入沉滞的电子淤泥之中，艰于呼吸。“FUXKYOU, YOUSONOFBITCH”再一次涌现到他的唇边，强烈无比，要化好大的力气才控制住。</p><p>忽然，他又想到了那个神秘的title，那究竟是什么意思？那五张光盘里或许隐藏着什么？也许这跟title有关系？</p><p>阿瓦登想到这里，把目光重新转向电脑屏幕，仔细去看网络安全部发来的五封信的title部分。五张光盘各隐藏着一个字母，凑到一起就是title，那么按照这个方式，那五封EMAIL的title凑到一起，就变成了一句话：去用户学习论坛。”</p><p>阿瓦登记得刚才他确实看到其中一个论坛的名字叫做“用户学习”，于是他抱着姑且一试的心态连接到这个论坛去。他希望这并不是一个巧合。</p><p>用户论坛是一个事务性论坛，里面是一些关于BBS用户资料的投诉帖和管理帖，斑竹的是一个叫19387465的人；发帖的人和回帖的人数量都很少，里面冷冷清清的。阿瓦登打开帖子列表，按照刚才的规律去搜寻每一个帖子的标题，并把它们综合到一起，很快他就得到了另外一句话：</p><p>“每周日辛普森大楼5层B户。”</p><p>又是一个谜团，阿瓦登想。但这却坚定了他的信心，这其中必定隐藏着玄机。光盘、EMAIL和BBS论坛，连续三次都可以通过首词组组合的方式得到暗示，绝非巧合。</p><p>究竟是什么人会在有关部门的官方文件中隐藏着这样的信息呢？每周日在效率大楼5层B户又会发生什么事情呢？</p><p>阿瓦登终于找到了久违的兴奋感，未知事物的新奇刺激着他麻木很久的神经。更重要的是，这种在有关部门正式文件中玩弄的文字技巧，叫他有一种喘息的快感，仿佛一个密不透风的铁面罩上几个透进空气的小孔。</p><p>营造健康的互联网络。</p><p>FUXKYOU, YOUSONOFBITCH。</p><p>阿瓦登盯着屏幕上的桌面背景，用嘴唇比出了那句粗话的口型，并且比出了中指。</p><p>在接下来的日子里，阿瓦登一直处于一种潜藏的兴奋状态，就象是一个摆出无辜表情嘴里却藏着糖果的小孩子，在大人转身过去之后露出狡黠的笑容，尽情享受心中藏有秘密的乐趣。</p><p>日子一天一天地过去，健康词汇在列表里又少了几个，窗外的空气又浑浊了几分，这已经是生活的常态。阿瓦登自己已经开始拿网络健康词汇表当日历来用，划掉三个词就证明过了三天，划掉七个就证明过了一周，于是周日终于到来了。</p><p>阿瓦登抵达辛普森大楼的时间是中午，暗示的句子里并没有指明时间，阿瓦登认为在中午前往应该是比较可以接受的。当穿着深绿军大衣，耳朵上别着旁观者的阿瓦登来到辛普森大楼的入口时，他的心开始忐忑不安地跳跃起来。他在上一星期设想了无数种可能发生的情景，而现在这个谜底就要揭晓了。无论在周日效率大楼会发生什么，也不会比现在的生活更加糟糕，阿瓦登心里想，所以他并不怎么害怕。</p><p>他走进大楼内部，发现这里的人也很少，空旷的走廊里只听到他哒哒的脚步声与回音。一部老电梯里贴着“缔造美好网络家园”的广告，以及一个充满了正义感的男性头像海报，背景是星条旗，他在纸里用右手食指指向观看者，头上写着一行字是“公民，请使用健康词汇。”阿瓦登厌恶地转过身去，发现另外一侧也贴着同样的海报，避无可避。</p><p>值得庆幸的是五楼很快就到了，电梯的门一开，对面的门上就赫然挂着B户的牌子。门是掉了漆的绿色，门框上还点了几滴墨水，一部简易的电子门铃挂在右上角。</p><p>阿瓦登深深吸了一口气，伸手去按电纽。</p><p>电铃响起，很快屋子里传来脚步声。阿瓦登觉得这脚步的韵律很熟悉，似乎是在哪里见到过。门“咔拉”一声被打开一半，一名年轻女子一手握着把手，把身体前倾望着阿瓦登，警惕地说：</p><p>“你，找谁？”</p><p>女子疑惑地问道。阿瓦登一下子就认出了她的声音，就是那个在网络部BBS论坛科柜台后面的女性。她很漂亮，穿着墨绿色绒线衫，头上梳着这时代流行的短发，皮肤特别的白，只有嘴唇能看到一些血色。</p><p>看着女子的眼神，一瞬间阿瓦登不知道该说什么好，犹豫了一下，他举起右手，轻声回答说：“title。”</p><p>阿瓦登不知道这句话能否奏效，也不知道自己是否真的找对了地方，但这是他唯一能想到的回答了。他紧张地望着那女子，假如那女子忽然报警，那么自己就会被抓起来仔细审问为什么无缘无故跑到陌生人家里。“肆意游走罪”只比“使用敏感词汇罪”轻那么一点。</p><p>女子听到他这么说，脸上还是毫无表情，只是把头幅度很轻微地点了一下，右手谨慎地做了一个“进来”的手势。阿瓦登刚要张口，那女子严厉地瞪了他一眼，吓的他把话又吞回去了，乖乖地跟着她进了屋子。</p><p>一进屋子，女子首先做的就是把门关好，然后拉起来一层铅灰色的门帘挡在门口。阿瓦登不安地眨着眼睛，趁她拉门帘的时候环顾四周。这屋子是标准的两室一厅，在厅里摆放的是一套双人沙发与一个茶几，茶几上居然还有几束红紫色的塑料花。靠墙是电脑桌和电脑，墙上挂着普通的白色日历，但被主人用粉红色的纸套了边，看起来颇为温馨。一盏粗笨的日光灯从天花板上垂下来，上面象是恶作剧一样挂了几缕绿色的电线，象是垂下藤蔓的葡萄架。阿瓦登注意到厅口的鞋架上有四双鞋，尺码不同，说明今天的客人并不只他一个。</p><p>阿瓦登正踌躇不安，忽然女子从背后拍了拍他的肩膀，示意他朝里面走。于是两个人穿过客厅另一侧的短小回廊来到其中一间卧室。卧室上挂着同样质地的铅灰色帘子，女子伸手举起帘布，推开了门。阿瓦登迈了进去，首先映入眼帘的是三名面带微笑的人类，以及一间用真正的鲜花装点的房间。屋子里有很多旧日记忆里的古老物品，比如一幅印象派的油画、一尊乌干达木雕，甚至还有一个银烛台，唯独没有电脑。</p><p>他正在迟疑，女子也进了屋子。她谨慎地拉好门帘关上门，将耳边的旁观者取下，回过身来对阿瓦登用曼妙的声音说道：</p><p>“欢迎加入说话会！”</p><p>“说话会？”</p><p>出于习惯，阿瓦登并没有把这三个字说出口，因为他不确定是否“健康”，只是用眼神表示自己的疑惑。</p><p>“在这里你可以随便说话，这个该死的东西不会起作用的。”女子把自己的旁观者晃了晃，那个小东西象死掉了一样，对女子句子里两个敏感词汇“随便”和“该死”充耳不闻。</p><p>阿瓦登一下子想到上星期在公共汽车站前碰到的男子，如果他摘下旁观者，会不会也会落到同一境地呢？那女子见他犹豫不决，指了指门口的铅灰色门帘说：“放心好了，这里是可以屏蔽掉旁观者信号的，不会有人觉察到。”</p><p>“你们，是什么，人，这，是，哪里？”</p><p>阿瓦登一边摘下耳朵上的旁观者，一边小声说道，语调还是改不了那种有关部门规定的说话方式。</p><p>“这里是说话会，是一个完全自由场所，在这里你可以畅所欲言，请不要拘束。”</p><p>另外一个人起身对他说道，这是一名瘦高的中年男子，鼻梁上的眼镜非常地厚。</p><p>阿瓦登嗫嚅着，却找不到发音的焦点，在四个人的注视下显得窘迫不堪，脸都要红起来。女子同情地看了他一眼：“可怜的家伙，不用太紧张，每一个刚到这里的人都是这样。慢慢就习惯了。”</p><p>她把手搭到阿瓦登的肩上：“我们其实见过的，当然，我见过你，而你没见过我。”她一边说，一边将自己的头发解下来，原来她留的是一头齐肩的乌黑长发，头发披下来的一瞬间阿瓦登觉得她真的很美。</p><p>“我……我记得你，记得你的声音。”阿瓦登终于说出了一句完整的话，虽然不够流畅。</p><p>“是吗，那可太好了。”女子笑起来，拉着他的手，让他坐到沙发上，递给他一杯水。阿瓦登注意到这是一个款式古老的茶杯，上面还刻着花纹，杯子里的水带着浓郁的香气，阿瓦登尝了一点，那种甜丝丝的味道对喝惯纯净水的舌头来说刺激格外地大。让他觉得浑身一下子被注进了许多活力。</p><p>“弄到这个可不容易，我们也不是每周都能喝到。”女子坐到他身边，两只乌黑的眼睛注视着他，“你是怎么知道这个集会的？”</p><p>阿瓦登把发现光盘暗示的过程说了一遍，其他四个人都赞许地点了点头。“果然是个聪明人，脑筋还没被陈腐的空气腐蚀掉。”一个三十多岁的胖子称赞道，他的嗓门大的要命。那个戴眼镜的中年人把两只手交叉在一起，表示赞同。</p><p>“这正是天生的说话会成员，聪明、敏锐，而且不甘屈从于沉默。”</p><p>“那么。”胖子提议，“先让我们鼓掌欢迎说话会的新成员吧。”</p><p>于是四个人鼓起掌来，小小的屋子里响起一片掌声。阿瓦登羞涩地举起杯子做回应，他还不太习惯这样的场面。等到掌声稍息，他抬起头怯生生地问道：</p><p>“可以问个问题吗？说话会到底是什么？”</p><p>带他进屋的女子伸出食指，在他鼻子前两公分的地方比了一比，解释道：</p><p>“说话会，就是可以畅所欲言的集会。在这里你不必顾忌什么，说出任何你想说的东西。这里没有敏感词汇，也没有健康互联网络。这里是绝对自由的空间，你可以尽情释放你的灵魂，舒展你的身体，没有任何禁锢与束缚。”说着说着，她的声音变的高亢、奔放，里面饱含了许多早已经被屏蔽掉的词汇，阿瓦登不曾听到这样流畅连贯的话语很久了。</p><p>“我们的宗旨就是，说话，就这么简单。”中年人扶扶眼镜，补充道。</p><p>“可是，要说些什么呢？”阿瓦登又问道。</p><p>“任何事情，你心里想的任何事情都可以说出来。”中年人露出宽和的笑容，“尤其是那些被美国政府限制的思想。”</p><p>这可真是一个大胆的集会啊，这分明就是犯罪，阿瓦登心想，但他发觉自己却被这种犯罪慢慢地吸引住了。</p><p>“当然，有件事我们会事先说明。说话会是危险的，每一个成员都冒着被有关部门拘捕的风险。联邦执法人员也随时可能破门而入，以非法集会以及非法使用不合法词语的名义把我们抓起来。你现在有权拒绝加入，并且离开。”</p><p>阿瓦登听到女子的警告，心里一度犹豫起来。但一想到此刻离去的话，那么又要开始持续那种窒息的泥沼生活，他就难以压抑自己的烦闷。阿瓦登第一次发现，原来“说话”对他来说是一个致命的诱惑，他先前并不知道自己原来是如此地渴望着说话。</p><p>“我不会离开的，我要加入你们，说话。”</p><p>“那太好了。唔，那么不妨就从自我介绍开始吧。”女子高兴地说，同时站起身来，把右手搭到胸前，“从我开始。我的名字叫阿尔特弥斯，至于网络编号和身份证号码，让他们见鬼去吧！谁会去管那个！我有我自己的名字，我不是数字。”</p><p>她的话让所有人包括阿瓦登都笑了起来。接着她继续说道：“不过，这其实只是一个假名，这是希腊神话里的女神。”</p><p>“假名？”</p><p>“是的，和我户籍本上的名字是不同的。”</p><p>“可是，为什么？”</p><p>“你不会对自己在档案里的名字厌倦吗？我想起一个自己喜欢的名字，哪怕只有一次机会也好，自己想叫什么就叫什么。在这个说话会里的每一个人都有一个自己喜欢的名字，我们彼此拿这个称呼。”</p><p>阿瓦登若有所思地点点头，他很理解阿尔特弥斯的想法。事实上当他在使用网络论坛的时候，也希望能够自己取一个称心如意的名字，而不是被分配一个用户名。</p><p>通过介绍，阿瓦登了解到阿尔特弥斯是网络部BBS论坛管理科的职员，今年23岁，未婚，最讨厌蟑螂和蜘蛛，喜欢缝纫与园艺，屋子里的花就是她偷偷从城市边缘摘回来的。</p><p>接下来是那名中年人，他自我介绍说名字叫兰斯洛特，41岁，是城市电厂的一名工程师；兰斯洛特这名字出自英国的亚瑟王传说，是一名忠贞的骑士。他有自己的老婆和两个孩子，一男一女；男孩三岁，女孩四岁，他们最喜欢吃的就是柠檬味道的水果糖。说到这里，兰斯洛特说希望下次聚会能把他们也带了，孩子们正是学说话的时候，他想教给他们真正的说话。</p><p>那个三十多岁的胖子是网络部的一名网管，叫瓦格纳。这个身份让阿瓦登吃惊不已，他的印象里网管都是些绷着脸全无表情的冷漠生物，但眼前的瓦格纳脸圆滚滚的，油光锃亮，嘴边两条翘起的小胡子神气十足。他喜欢的是雪茄和歌剧，利用网管的特权这两样东西都不难弄到。</p><p>“这个能屏蔽掉信号的门帘就是他弄的。”阿尔特弥斯补充说，瓦格纳冲她做了个“乐意为您效劳”的手势，然后点燃了雪茄，把它放到嘴里，很快屋子里就笼罩起一片稀薄的烟雾。</p><p>说话会的第四名成员是一位穿着黑色制服的女性，今年刚满三十。她的名字是杜拉丝，城市日报（那个时代的报纸已经全部都数字化了）的编辑，她比阿尔特弥斯还瘦，颧骨高高耸起，眼窝身陷，两片薄薄的嘴唇即使在最说话的时候也很少分开，看不到牙齿。爱好是饲养狗和猫，尽管她并没有养。</p><p>“那么，到你了。”阿尔特弥斯对阿瓦登说。阿瓦登想了想，结结巴巴地把自己的情况说了一遍，当谈到自己的爱好时候，他一时间居然想不到自己喜好什么，似乎什么都没有，在那之前他甚至从来没想过。</p><p>“那，你最想做的是什么事呢？”阿尔特弥斯把手再一次放在他肩上，诱导着问道。</p><p>“真的什么都可以？”</p><p>“什么都可以，在这里没有任何限制。”</p><p>阿瓦登觉得自己终于找到机会了，他咳了一声，抓抓头，脱口而出一句响亮的叫喊：“FUXKYOU, YOUSONOFBITCH！”</p><p>在一瞬间，在座的四个人都被他这句话震惊了。瓦格纳率先反应了过来，他先叼住雪茄，用力鼓掌，然后用右手把雪茄取下来，张嘴大声地赞叹道：“真棒，痛快，这简直是最完美的入会誓词。”</p><p>“我宁可听十遍这样的脏话，也不想再去碰那个乏味的电子女声。”兰斯洛特也是一脸陶醉，毫不掩饰自己对电子女声的厌恶。而阿尔特弥斯和杜拉丝全都咯咯地笑起来，杜拉丝发现自己的笑容幅度大了一点，不好意思地把嘴掩住。阿瓦登觉得他们与其说是觉得新奇，不如说是在享受这句脏话所带来的对体制的蔑视与挑战。</p><p>“那你叫希望自己叫什么名字呢？” 阿尔特弥斯歪着头问。</p><p>“唔……王二。“ 阿瓦登沉吟了一下，回答说。这是一个中式的名字，他以前有一个中国人朋友，喜欢讲故事，故事里的主角名字总是叫王二。</p><p>屋子里的气氛现在完全融洽了，大家都开始谈些比较自然的话题，每个人都摆出了最舒服的姿势，阿尔特弥斯不时拿起茶壶来为大家续水。阿瓦登紧张的心情逐渐放松下来，他感觉到自己的脑子前所未有地轻松。</p><p>“你知道的。”阿尔特弥斯又给他倒了一杯甜水，“我们一直想把说话会保持在一定规模，平日是没有办法畅所欲言的，我们需要空间。麻烦的是，我们没办法公开征集会员，又不可能直接通过物理接触去寻找，那风险太大。于是兰斯洛特就设计了一套暗示系统，只有发现这些暗示的人才能知道本会的存在。”</p><p>“这套系统考虑到的还不止是安全问题。”兰斯洛特把自己的眼镜摘下来仔细擦拭了一下，得意地说，“这其实也是一个会员资格验证。说话会所吸纳的成员，必须有智慧，有头脑，内心渴望激情，并且对自由有着渴望。”</p><p>瓦格纳用两根指头夹着雪茄，在事先准备好的烟灰缸里弹了弹烟灰，大声说道：“据我的经验，申请BBS论坛服务的人，大多数都是为了怀旧，或者说渴望一些新鲜的东西，这样的人往往都怀有激情，认为BBS论坛也许能给他们一些与现实不一样的东西——当然，事实上并非如此，美国政府对BBS论坛的管理甚至严厉过电子邮件——这暗示着他们心里渴望解脱束缚。因此我们将暗示隐藏在申请BBS论坛的光盘之中，只有申请人才有机会接触到这些暗示。而只有那些有智慧、观察敏锐的人才会发觉到这些暗示的存在，并顺利解读出来，找到这里。”</p><p>“归根到底，说话会也不过是一群渴望自由说话的秘密小团体罢了。”兰斯洛特笑道。</p><p>“你是第二个找到说话会的人，第一个是杜拉丝小姐。”</p><p>阿尔特弥斯告诉阿瓦登。阿瓦登敬佩地看了杜拉丝一眼，后者淡淡地回答道：“这没什么，这是我的工作，我的工作就是摆弄文字。”</p><p>阿瓦登想到上一周在公共汽车站碰到的那个疯狂男子，于是把这件事讲给其他成员听。听完之后，兰斯洛特摇了摇头，从嘴唇里滑出一声叹息：</p><p>“这样的事情我也是见过的，我的一个同事就是如此。所以说话会的存在是必要的，这是缓解压力的阀门。长时间的敏感词汇限制会让人都疯掉的，因为他们既无法思考又没办法表达。”</p><p>“这正是美国政府有关部门所希望看到的，这样只有傻瓜能够存活下来，一个全是傻瓜的社会是稳定的。” 瓦格纳费力地把自己肥胖的身躯挪了一下位置，轻蔑地说。</p><p>“你也是有关部门的一分子，瓦格纳先生。”阿尔特弥斯一边往茶杯里续了些热水，一边抬头轻声说道。</p><p>“阿尔特弥斯小姐，我只是一个能比普通人多使用几个敏感词汇的普通人而已。”</p><p>大家都笑了起来。阿瓦登从来没有见过这么多的人说这么多的话，这是前所未有的奇妙经验。他惊讶地发现自己居然很快就融进了这个小圈子里，隔阂与陌生感很快就消失了；同时消失的还有胸闷与头晕等习惯性的毛病。</p><p>很快话题就从说话会本身扩展到了更加宽泛随意的话题，阿尔特弥斯唱支歌，兰斯洛特说了几个笑话，杜拉丝则给大家讲了美国南部诸州的风土人情；瓦格纳甚至还唱了一段歌剧，虽然阿瓦登一个字也听不懂，但他一点也不吝惜掌声。在这个城市的某一个被屏蔽掉的角落里，五个不甘沉默的人正在享受着在这个时代视为奢侈品的事情——说话。</p><p>“王二，你可曾看过《1984》？”</p><p>阿尔特弥斯忽然问道，她就靠着阿瓦登坐下，阿瓦登摇摇头，反问道：“这是网络编号的一段么？”</p><p>“这是一本书的名字。”</p><p>“书？”阿瓦登听到这个名词，头摇的更大了。这是个古老的名词，在这个电脑技术非常发达的时代，网络可以承载一切信息，任何人都可以在网上图书馆查到电子版；因此有关部门认为实体书籍变成了一种没有必要存在的浪费，实体书也就逐渐消亡了。瓦格纳对此的评论是：“有关部门喜欢电子书籍的心情是可以理解的，电子书籍的话，只需要FIND和REPLACE两个命令就可以消灭掉全部不健康词汇，替一本书消毒；而实体书籍的校对与修订却是件旷日持久的工作。”</p><p>“这是一本伟大的书，是旧世界哲人们对我们这个时代的预言。”阿尔特弥斯认真地说。“它很早以前就洞察到了肉的束缚与解脱，灵的束缚与解脱，这是说话会的基石。”</p><p>阿瓦登不无惊奇地发现他的网络编号开头恰好是这这本书名字：19842015。</p><p>“那么，该怎么样才能看到呢？”阿瓦登盯着阿尔特弥斯乌黑色的眼睛问。</p><p>“我们也无法找到纸质版，网络图书馆不可能存在这样的书。”兰斯洛特摇摇头，然后重新露出笑容，左手向着杜拉丝摆了个请的姿势，“但我们的杜拉丝小姐应该为她的记忆力而自豪，她在很早已经有幸阅读过这两本书，并且能够记得里面的大部分文字。”</p><p>“太好了，然后她写下来了，对吗？”</p><p>“那太危险，这时代持有实体书是个大罪过，也容易让说话会暴露。我们只是在每次聚会的时候请杜拉丝小姐为我们背诵。既然是说话会，那么把这两个故事讲出来不是更名符其实吗？”</p><p>大家都安静下来，杜拉丝站起来走到屋子中央，其他四个人坐在旁边看着她。阿瓦登不经意地把手搂在阿尔特弥斯肩上，后者微微朝这边靠过来，女性头发的幽香“咝咝”地划过他的鼻子，让他的心里一阵荡漾。屋子里非常暖和，他分不清这是花香还是阿尔特弥斯的味道。</p><p>杜拉丝的声音并不高，不过却很清晰有力；她的记忆力确实惊人，不仅记得情节，包括一些细节和句子都可以复述下来。杜拉丝讲到了朱丽亚假装摔倒，然后偷偷递给温斯顿一张写着“我爱你”的纸条，绘声绘色，这让听众们都听的入神了，阿尔特弥斯听的尤其认真，以至于都没有注意到阿瓦登一直注视着她。</p><p>“1984的作者预见到了专制的进步，却没有预见到技术的进步。”瓦格纳在杜拉丝停下来喝水的时候发表自己的评论，阿瓦登觉得他与外貌不太相称，是个很有洞察力的技术官僚。</p><p>“在大洋国人们还可以靠传递纸条来偷偷表达自己的想法，但是现在不一样了。美国政府有关部门把我们全赶到了网上，而在网络技术发达的今天，我们即使想发一条短信都会被系统或者网管看的一清二楚，无从遁形。现实里呢，还有旁观者在。”瓦格纳在腿上敲了敲雪茄根部，“一句话，技术是中性的，但技术的进步会让自在的世界更自在，集权的世界更加集权。”</p><p>“这句话说的很有哲学家的味道哟。”阿尔特弥斯冲瓦格纳挤了挤眼睛，从抽屉里取来一把饼干和曲奇散发给大家。</p><p>“就好象同样是0和1，有的人就能写出工具软件，有人却拿那个编出恶性病毒？”</p><p>阿瓦登想到一个类似的比喻，瓦格纳听了以后满意地打了个响指。</p><p>“很不错的比喻，王二，就是如此，真不愧是程序员。”</p><p>谈话持续了不知道有多久，杜拉斯看了一眼墙壁上的挂钟，连忙提醒谈兴正浓的四个人时间快到了。说话会不能持续很长时间，旁听者被屏蔽的越久，暴露的危险就越大。</p><p>“那么好吧，我们就抓紧最后半个小时来完成今天的活动。”</p><p>阿尔特弥斯一边说着，一边将桌子上的空杯子收走。兰斯洛特和瓦格纳也都站起身来，活动一下已经有些酸疼的肩膀和腰，只有杜拉丝坐在位子上没有动。</p><p>“活动？还有什么活动？”</p><p>阿瓦登奇怪地问道，说话会除了说话还有其他活动？</p><p>“唔，对啊，我们还有其他活动。”阿尔特弥斯撩起额前的长发，对他妩媚一笑：“我们还会和对方完全交流。”</p><p>“完全交流？”</p><p>“就是intercourse”</p><p>“………………”阿瓦登一下子变的脸色苍白，呼吸急促起来，仿佛胃里被灌进去零下三十度的寒风，他几乎不相信自己的耳朵。</p><p>“说话会有说话的自由，也有选择与谁上床的自由。”阿尔特弥斯毫不羞涩地说，“我们互相谈话，然后选择合适的人做爱，就象我们选择我们喜欢的词汇说话一样。”</p><p>兰斯洛特看阿瓦登很窘迫，走过去拍拍他的肩膀，慢慢地说：“当然，我们不会强迫任何人，这完全是在自愿的基础上。今天我还要早点回去照顾小孩，你们人数正好合适。”</p><p>阿瓦登的脸色涨红，热的仿佛夏季的电脑CPU，他甚至不敢多看阿尔特弥斯一眼。他憧憬过女性很长时间，但如此接近还是第一次。</p><p>还要回家去照顾小孩子的兰斯洛特向大家道别后就先行离去了，阿尔特弥斯将房间留给瓦格纳与杜拉丝，然后带着惶恐不安的阿瓦登来到了另外一间房间。这间显然是阿尔特弥斯的卧室，屋子里很简单，但却收拾的十分干净，在床上枕头旁还摆着一个手制的布娃娃，床单和窗帘都是粉红色的。</p><p>最初的是由阿尔特弥斯主动开始的，丝毫没心理准备的阿瓦登只是被动地任她摆布。经过了几轮挑逗，阿瓦登才逐渐放开，任由潜藏在自己心内的原始欲望奔流出来，那种期待听到圆润女声的青春憧憬本来只是苦闷生活的意淫，而在今天它加倍实现了。很快这种憧憬与他在现实中被压抑的郁闷合流，转化成了猛烈的冲动，让他一次又一次与阿尔特弥斯融为一体。阿瓦登不知道这种冲动和他想大声说出“FUXKYOU, YOUSONOFBITCH”冲动有什么不同，不过现在不是考虑这个的时候，他现在脑子里想的只有尽情地、全无束缚地让自己释放激情，完全没有任何束缚。</p><p>强烈的刺激一波波地冲击着兴奋中枢，最终一阵快感浪潮在狂暴洋面扬起头来，达到了一个极高的顶端。阿瓦登在那一瞬间感觉到了前所未有的自由，那种轻盈无比的自由，以及因自由而生的快乐与疲惫。浑身是汗的他喘息着倒在了阿尔特弥斯身上，一阵舒畅的倦意如潮水般淹没了他的身体……</p><p>……当他醒来的时候，发现阿尔特弥斯躺在自己身边，赤裸的身体好象一尊白玉雕像，睡姿恬美静谧。他侧过身子去，慵懒地打了个呵欠，然后阿尔特弥斯睁开了眼睛。</p><p>“很舒服，对不对？”她问道。</p><p>“是啊……”阿瓦登不知道该说什么好，他顿了顿，犹豫地说道：“你以前和兰斯洛特、瓦格纳他们也……呃，我是说，象刚才那样子过吗？”</p><p>“是的。”阿尔特弥斯温柔地回答，她半支起胳膊，长发从肩膀披到了胸口。她的大方坦白反而让阿瓦登有些不知所措。屋子里出现了一段时间的沉默，然后阿尔特弥斯忽然开口问道：</p><p>“还记得今天杜拉丝讲的那段故事吗？女主角偷偷递给男主角写着“我爱你”的纸条。”</p><p>“唔，还记得。”阿瓦登回答，很高兴终于能从那个拙劣的话题摆脱出来了。</p><p>“在有关部门的健康互联网络词汇列表里，没有爱这个字呢。在我们这个时代，我爱你也是一个敏感词汇，被屏蔽掉了。”阿尔特弥斯的眼神里似乎是感慨，又象是失落。</p><p>“我爱你。”阿瓦登不禁脱口而出，他知道在这间屋子里可以说出任何自己想说的话，不必顾忌。</p><p>“谢谢你。”</p><p>阿尔特弥斯听到之后只是笑了笑，起身穿上衣服，催促阿瓦登时间差不多了。阿瓦登有些失望，因为她没有预期反应的热烈，仿佛他刚才说的只是有些无关紧要的东西。</p><p>这时候杜拉丝和瓦格纳已经离开了，屋子里只剩他们两个人。阿尔特弥斯把他送到门口，将旁观者交给他，然后叮嘱他说：“记得在外面绝对不要提及说话会的任何事情或者任何人，我们在说话会以外的地方是完全不认识的。”</p><p>“我记住了。”阿瓦登回答，然后转身要走。</p><p>“王二。”</p><p>阿尔特弥斯忽然叫道，阿瓦登连忙转身，还没等他反应过来，两片柔软温暖的嘴唇忽然贴到了他的双唇，然后是一个细切的声音在耳边响起：“谢谢你，我爱你。”</p><p>阿瓦登觉得眼睛有些湿润，他戴上旁观者，推开门，重新步入到那一片令人窒息的世界中去，但他此时已与来时的心境大不相同。</p><p>此后阿瓦登的精神面貌明显有了改善。他谨慎地享受着这种秘密集会的乐趣，并且乐在其中。每一周或者两周，他们五个人都会在周日秘密地举行说话会的活动，聊天，唱歌或者听杜拉丝讲1984的故事。阿瓦登同阿尔特弥斯又“完全交流”了几次，偶尔他也会跟杜拉丝“交流”。他有了两个身份，一个是现实中和网上的阿瓦登，编号19842015，还有一个是说话会里的王二。他很享受这个名字，觉得这就是自己另外的一个人生。</p><p>有一次集会，他们谈到了敏感词汇的问题。阿瓦登记得很早的时候——他对这方面的记忆有点模糊——有关部门给出的是一份敏感词汇列表，由网站的内部管理人员秘密参考使用，他对如何演变成现在的局面大惑不解。那一天瓦格纳带了一瓶葡萄酒，兴致很高，于是索性给他们讲了讲“屏蔽”的进化史，身为网管的他经常可以接触到这些资料。</p><p>在最开始美国政府只是单纯地屏蔽掉敏感词汇，但很快他们就发现这样的措施根本没有用处。很多人会采取在词组中夹杂符号或者数字的方式来绕开系统检查；于是有关部门不得不将这些近似敏感词汇也一一屏蔽掉。然而众所周知，数字与符号之间的组合方式是近乎无限的，只要你有想象力，就完全可以组合出一个新的词组而且不失掉他的原意。比如说“politic”这个词，就有“politi&#x2F;c”、“政polit&#x2F;ic”、“pol&#x2F;itic”等近乎无限种表达方式。</p><p>当有关部门意识到这个问题时，他们采取了新的策略。既然无法辨识词组，那么就用单词屏蔽。这一举措在一开始是奏效的，违规交谈的人显著减少，但很快人们就发现可以用同音字或者谐音的方式来继续表达自己的危险思想。即使有关部门封掉全部敏感词汇的同音字，也无济于事，思想活跃的美国人充分发挥了自己的想象力，使用隐喻，借代、类比、引申及其他修辞方法，或者将一个敏感词用数个不敏感的字来代替。人类的思维方式要比电脑开阔许多。电脑屏蔽掉一条路，他们还会有更多的路可以选择。</p><p>这一场水面以下的角力看起来似乎是美国大众要取得胜利。这时候，一个具有逆向思维精神的人出现了。他的身份不明。有人说他是有关部门的主管；也有人说他是因过度使用敏感词汇而被捕的危险人士。无论他是谁，总之整个局面被扭转过来。他向有关部门建议，不再告诉大众禁止说什么，而是规定他们只能说什么，用什么方式去说。有关部门很快就心领神会，制订了新的规章制度：取消了敏感词汇列表，取而代之的是互联网络健康语言列表，并把这举措推广到了日常生活中的语言屏蔽系统中去。</p><p>这一次，大众终于处于下风。以往他们与有关部门尽情地在网络与现实中捉着迷藏，而现在他们却被有关部门扼住了咽喉。这样一来，有关部门可以有效率地掌握住言论，因为整个语言的框架都被彻底控制了。在有限的空间内，大众几乎是无计可施。</p><p>尽管如此，大众还是不屈不挠地将这场战争——或者说游戏——继续下去，他们挑选健康词汇列表中的合法字眼来表达不合法的意思：两个连续的“稳定”意思就是“反对”，“稳定”加“繁荣昌盛”则暗示“屏蔽”。美国政府不得不对这一动向保持着警惕，并日复一日地将更多的词汇从健康词汇列表里删掉，禁止大众使用。</p><p>“当然，这场战争会持续下去的。只要世界上还存在着两个不同的字或者词组，那么就可以继续自由交流——你知道莫尔斯电码吧？”</p><p>瓦格纳说到这里，拿起茶杯一饮而尽，满意地打了一个嗝。</p><p>“可是，这场战争的代价就是语言的失落。表达能力会越来越贫乏，越来越淡而无味，人们会越来越倾向于沉默，这对有关部门反而是好事。”兰斯洛特摆出一副忧虑的表情，有节奏地用指关节敲击着桌面，“这样一来，岂不就等于是大众的自由意识将语言推向死亡的边缘？真讽刺啊。按照这个趋势，有关部门是不会败的，他们会笑到最后。”</p><p>“不，不，笑这种情感他们是不会了解的。”瓦格纳淡淡地回答。</p><p>“我倒是觉得，美国是一直处于恐惧的情感之中呢，生怕人们掌握了太多的词汇，表达出太多的思想，变的难以掌握。”阿尔特弥斯说完摆出一副她在上班期间冷若冰霜的呆板脸孔，学着僵硬的腔调喊了一句：“营造健康的网络环境，美国万岁！”</p><p>杜拉丝、兰斯洛特与瓦格纳都哈哈大笑，唯一没笑的是王二（阿瓦登）。他对于兰斯洛特刚才的那句话始终耿耿于怀：大众与有关部门的对抗，其最终结局就是语言的消亡。那么他们现在这个小小的说话会，也只不过是在一列开向悬崖的列车里关上窗帘，享受坠毁前最后的宁静罢了。</p><p>不过他没有说出口，因为这太煞风景了。阿瓦登不希望破坏说话会的气氛，这对他很重要。</p><p>从说话会回到家里，阿瓦登躺在行军床上，双手枕着脑袋，陷入了沉思。自从加入说话会以后，他变的比以前更容易陷入思考。有时候他想的是这个社会、这个互联网络或者这座城市中存在的荒谬性；有时候他想的是自己的生活；还有时候他想的是阿尔特弥斯。他不知道是不是在一个压抑的世界里，人的情感会变的格外强烈，他现在陷入对阿尔特弥斯的迷恋无法自拔。阿瓦登一直很羡慕杜拉丝讲的《1984》里面的温斯顿，他和朱利亚有一间两个人独处的小屋，一个只属于他们两个人的小世界。</p><p>他在与阿尔特弥斯“完全交流”的时候曾经吐露过自己的心声，阿尔特弥斯没有直接回答，而是表示两个人的关系无法再比说话会更近一步——维持现在的状态就已经是个人行为的极限，有关部门可不会一直打瞌睡。“我们只能把感情生活压缩在每周一次的说话会活动里，这已经很奢侈了。”她对他说，同时温柔地抚摩他的胸膛。“只有在说话会里，我们才是阿尔特弥斯和王二。而在其他时间里，你是19842015，而我是19387465。”</p><p>对此，阿瓦登只能发出一声轻轻的叹息，确实他不该奢求更多。</p><p>除了感情，发生变化的还有互联网络。自从加入说话会以后，阿瓦登逐渐发现互联网表面下潜藏的一些东西。正如瓦格纳在一次活动的时候指出，普罗大众与有关部门的战争从未结束，总会有思想和言论从严厉管制的缝隙中流泻出来。阿瓦登发现，在完全公式化的EMAIL与网络论坛中其实隐藏着不少耐人寻味的细节，就好象那个title一样，存在着各式各样的密码与隐藏寓意。这些东西出自不同人的手里，样式和破译方式都不同，阿瓦登不知道那些密码背后隐藏的是怎样的内容。不过有一点可以确知的是，说话会并不是唯一的一个地下集会，瓦格纳说的对，始终还是有人在试图用“健康”词汇表达“不健康”思想。</p><p>讽刺的是，给阿瓦登感触最深的，是有关部门的管制。以往他只是模糊地感觉到自己被绑缚起来，现在他能清晰地看清这种束缚与压抑的脉络，以及加诸在自己身上的各种手段。在小小说话会中享受到的自在让他更加深刻地感受到在宽阔现实中的不自在。</p><p>“FUXKYOU, YOUSONOFBITCH！”</p><p>每一次的聚会，三位男士都会轻蔑地一起高喊这一句粗话。他们清楚这不会给有关部门带来什么不良影响，不过这确实很痛快。</p><p>这一周，阿瓦登特别地忙碌，他的同事因为不明原因而被屏蔽掉了，这样一来整个项目就全压在了他一个人身上。这项目是为有关部分设计一种软件，用来控制大功率主动式“旁观者”的能源分配控制。软件很复杂，他不得不每天在电脑前工作十几个小时，只有在身体实在支撑不住的时候才停下来随便吃一点东西，喝一口纯净水，困了就躺在旁边的行军床上睡上一觉，爬起来继续工作。屋子里满是浑浊的烟味与袜子脏衣服的酸臭味，阿瓦登就在这种环境下蓬头垢面地敲着键盘，并不时揉揉满布血丝的眼睛。</p><p>偏偏在这个时候屋子里的暖气坏掉了。洋灰色的暖气片从昨天开始就变的冰凉，不再有热水流动。阿瓦登检查了一下，发现并不是管道问题，而且邻居们也碰到同样的事，看来是供热系统出了问题。这一变故的正面影响是稍微淡化了屋子内的酸臭味，负面影响是整个屋子变的有如冰窖一样。紧闭的窗户和门能挡住寒风，却挡不住寒冷，低温让本来就寒酸的房间更笼罩上一层霜气。无论是那把木椅还是行军床都象是冷酷的冰雕，屋子里唯一还有些热气的就只剩下电脑。阿瓦登不得不披上所有的御寒衣物，蜷缩在床上，把电脑的散热口对准自己。</p><p>有关部门宣布“供热”和“暖气”暂时也被列入敏感词汇，于是阿瓦登没办法写信向供热部门询问，只好静待，除了用来敲键盘的指头以外，尽量保持全身一动不动，以节约热量。在停止供暖后的第四天，暖气片里终于传来“哗啦哗啦”的声音，带着热气的水开始流动，屋子里恢复了温暖，“供热”和“暖气”又可以恢复使用了。于是EMAIL与网络论坛上全都是“庆祝有关部门恢复供应暖气，急人民之所急”的帖子，EMAIL新闻组里也全是类似主题。</p><p>不过这对阿瓦登来说太晚了，他生了病，感冒，而且是重感冒。他面色苍白，全身软弱无力，头疼的象是被一枚达姆弹射入头部，只能躺在床上等医生。医生来到他家里，给他做了两三次点滴，喂了一些叫不上名字的药片，叫他静养。这一场病足足持续了数天，他不得不放弃参加这一星期的说话会，身体状况实在太差了，阿瓦登甚至怀疑自己搞不好会因此而死掉。</p><p>阿瓦登躺在床上，心里懊悔不已，说话会是他唯一的乐趣，现在他却没办法参加。他把头蒙在被子里胡思乱想，瓦格纳这一次会带什么特别的东西来呢？兰斯洛特有没有把两个孩子也领过来？还有阿尔特弥斯，他没参加的话，她会和谁“完全交流”呢？瓦格纳还是兰斯洛特？他还想到了杜拉丝，上一次的聚会里，杜拉丝讲到了温斯顿在秘密幽会的屋子里对朱丽亚说“我们已经死了”，朱丽亚附和着说“我们已经死了”，这时候第三个声音说道“你们已经死了。”</p><p>杜拉丝就讲到这里，就停住了。阿瓦登急切地想知道接下来发生了什么，第三个声音是谁，是党吗？温斯顿和朱丽亚是否会被捕，他们会有什么样的下场？不光是他，阿尔特弥斯也很希望知道后续情节的发展，不过她并没有去追问杜拉丝。</p><p>“让这成为一个悬疑，这样接下来的一周我们的生活都会在期待的乐趣中度过。”她对阿瓦登说，然后两个人继续沉溺于intercourse的快乐。</p><p>“也许他们都会死。”阿尔特弥斯在交流结束后，看着天花板说。</p><p>“也许那只是奥布林的声音，他去探望他们。”阿瓦登安慰她道，但是他的心里也不确定。</p><p>阿瓦登的病持续了十天，然后他终于痊愈了。他痊愈后的第一件事就是从床上爬起来，然后去看墙上的日历：这一天恰好是星期日，说话会活动的日子。阿瓦登已经缺席了一周，这已经令他如饥似渴，甚至做梦都在和他们一起喋喋不休地说着话——所幸他并没有说梦话的习惯，所以24小时工作的旁观者并没发出任何警报。</p><p>阿瓦登简单地洗了一下脸，用一把有些生锈的剃刀沾着肥皂仔细地刮掉脸上粗硬的胡须，然后咕噜咕噜地刷了刷牙齿，用手和毛巾沾着热水将自己蓬起的乱发压下去。因为生病，有关部门发了一些补贴给他，其中包括两块羊角面包、两瓶姜汁啤酒和一份精制砂糖。他将这些东西都用塑料布仔细包好，揣到宽大的军大衣里，打算带到说话会上去与大家分享。</p><p>今天的天气和往常一样地冷，阿瓦登把自己裹在大衣里，登上前往效率大楼的公共汽车。一路上车厢里的广播重复着“营造健康的互联网络”以及一些优秀网络用户的先进事迹；车厢前面的电子屏幕不断滚动显示着最新的健康词汇列表，一个旁观者自车顶垂下来睥睨着车内的每一个表情呆滞的人。阿瓦登坐在最后一排，望着窗外不断向后移动的建筑物与枯黄的树木发呆。</p><p>车子很快就到达了辛普森大楼附近的车站，阿瓦登下了车，把手放到怀里摸了摸塑料布包着的食物，朝着大楼走去。他在半路无意中抬起头，忽然一阵冰冷的寒流刺入他的胸腔，迫使他停住了脚步。</p><p>有什么地方不对劲！</p><p>他看到了效率大楼的第五层阿尔特弥斯家的窗户发生了一些奇怪的变化。以前阿尔特弥斯家面向大街的窗户总是挂着粉红色的窗帘，而现在窗帘则被扯到了两边，窗户大开，用肉眼可以勉强看到窗玻璃和屋子里雪白的墙壁。假如今天有说话会的话，阿尔特弥斯绝对不会把有屏蔽效果的窗帘打开。而且打开窗户这件事也绝不寻常，在这个城市里的室外空气十分浑浊，几乎不会有人会去开窗换气。</p><p>也就是说，今天并没有说话集会召开，而是发生了另外一些事情。阿瓦登望着那窗户，心情开始变的有些慌乱，他把手从兜里掏出来，叼起一支香烟，把身体靠在一根电线杆旁故做镇静，以免被行人怀疑。究竟说话会发生了什么，为什么这一周停办了呢？要知道，只要还有复数的成员能够出席，说话会就会一直办下去，难道说瓦格纳、兰斯洛特、杜拉丝和阿尔特弥斯同时无法出席？这种概率实在太小了。阿瓦登一边这样想着，一边向四周不安地张望。忽然他看到了一样东西，一个念头霎时占据了他的全部心灵，让他几乎眩晕过去。</p><p>“说话会本周不会有了，以后也不会有了。”阿瓦登嘴唇默默地蠕动着，面如死灰。</p><p>他看到在街道内侧一处不起眼的地方隐藏着一个类似雷达天线的东西，其造型很象是两个背部贴在一起的大碗。阿瓦登心里清楚这是什么东西：这正是他负责软件设计的大功率主动式“旁观者”，这造型他很熟悉。这装置可以主动发射电波去探测人们的声音，并检查其中是否存在敏感词汇。</p><p>这样的装置居然就安放在阿尔特弥斯家附近，那么就等于说话会完全暴露在了有关部门的监控之下。主动式旁观者的强大刺探电波会轻易刺穿她家中的铅质窗帘，把所有成员的话原封不动地传到有关部门耳朵里。</p><p>这是一个划时代的发明，这一技术的突破意味着有关部门可以不再被动地等待警报，可以主动出击去刺探人们在任何时间任何地点说的任何话语。阿瓦登可以想象接下来会发生什么，阿尔特弥斯他们的每一句话都被有关部门记录下来，会有机器统计出到底有多少违禁词汇被他们使用过；然后联邦警察会冲进她的屋子，将正在聚会的成员们都带走，只留下搜查过后空荡荡的房间和窗户。</p><p>阿瓦登想到这里，心如刀绞，他一点也不为自己的侥幸逃脱而感到幸运。他的胃袋翻腾起来，一种恶心的感觉从胃里直接升到嘴边，让他想吐，却又不能吐——因为“呕”也是个敏感词汇；大病初愈的孱弱身躯无法承受这种打击，象害了风寒一样颤抖起来，几乎站立不住。</p><p>他不敢继续朝前走去，仓皇地转过身去，登上另外一辆公共汽车，把嘴闭的更紧了。等阿瓦登回到自己家楼下，看到楼房附近另外一架新的主动式旁观者正在兴建中，漆黑的天线在半空舒展开来，仿佛一面巨大的蜘蛛网。看来有关部门已经着手在整个纽约市部署这种新兴高科技产品。</p><p>他不敢驻足观看，低着头从那巨大装置旁边走过，一路不停地走回家，然后把自己的脸紧紧地压在枕头里，却不敢哭出声音来，连一句“FUXKYOU, YOUSONOFBITCH”都不能说。</p><p>从那以后，阿瓦登的生活回到了普通状态——就是说和原来一样沉滞、压抑、欠缺激情，健康向上，缺乏低级趣味。兰斯洛特说过：“战争的结果就是，大众的自由意识会将语言推向死亡的边缘”，现在看来，他的预言是很准确的：说话会的覆灭，导致“说话”、“歌剧”、“完全”、“交流”几个词先后被剔除出了健康词汇列表，成为敏感词汇。</p><p>另外，虽然阿拉伯数字还能用，但“1984”这一个数字组合也被屏蔽掉了，这让包括阿瓦登在内的程序员在编写程序时不得不谨慎地检查数字是否违规，这额外增加了很多工作量，让他更加疲惫。</p><p>阿瓦登不是没有担心过，也许在某一天的深夜，他就会忽然接到一封EMAIL，让他留在家里不要动，不要试图在网络做任何动作；接着电话会响起，电子女声会把这一要求重复再重复，直到警察打开他家的大门，把他带去未知的地方，那里有未知的命运等待着他。《1984》后面的情节发展阿瓦登始终不知道，唯一知道的杜拉丝已经彻底失踪了，所以温斯顿和朱丽亚的结局始终是个谜；就好象兰斯洛特、瓦格纳、杜拉丝和阿尔特弥斯的结局一样，也不从得知。其实这两件事对于阿瓦登来说没什么本质性的区别，所以它们也可以看做是同一个谜。</p><p>其实他最担心的，是阿尔特弥斯。每次想到这个名字，阿瓦登就难以抑制心中的郁闷。她究竟会怎么样，彻底被屏蔽掉吗？如果是那样，那么她在这世界上遗留下来的唯一痕迹，就是一个程序员记忆里的假名而已了。</p><p>说话会消失后三个星期，仍旧风平浪静，没有任何人来找过阿瓦登，他也没收到过任何类似内容的EMAIL，阿瓦登一直在想，也许是他们没有吐露出自己的下落，也可能是因为他们根本不知道——他们认识的只是一个叫王二的程序员。这个城市里有数以千计的程序员，而王二是个假名。</p><p>因此，生活一如既往地平静。不，确切地说，还是有一点不同的，那就是互联网络健康词汇列表：那上面的词组消失的速度比以前要快的快，每小时每分钟都有词与单字飞快地在名单上消失，阿瓦登不得不花上大量时间去更新列表，以跟紧当前形势。</p><p>与词汇列表更新速度相对的，EMAIL和网络论坛上的东西越来越乏味。因为人们不得不用极有限的词去表达广泛的意思，大家都变得寡言少语。就连那些秘密的暗语和联系方式也少了许多；整个网络就象是前些天阿瓦登家里出了问题的暖气片一样：虽然名义上是给人带来温暖的东西，但却变的冰冷、僵硬，让人如坠冰窟。</p><p>这一天，阿瓦登从电脑前抬起头来，他看了看窗外迷茫的灰色天空，胸口一阵抽搐，不由得痛苦地咳了一声。他拿起塑料杯，将杯子里的纯净水一饮而尽，杯子丢进同样是塑料质地的垃圾桶里，发出钝钝的撞击声，他觉得自己的脑子也是一团垃圾，举起手敲了敲，果然发出同样钝钝的撞击声。</p><p>然后他拿起大衣，戴上墨绿色的护目镜，走出门去。阿瓦登没带便携式的旁观者，那东西已经不需要了，城市里到处都是主动式的旁观者，随时监听是否有违禁词汇的存在。整个纽约现在就象是互联网络一样，被有关部门营造成十分健康。</p><p>阿瓦登这一次外出是有正当理由的，他决定去取消网络论坛服务，这服务已经用不着了，因为无论EMAIL，新闻组，BBS论坛还是其他什么现在全部都变成了一样的东西。</p><p>从日历来说现在应该是春季，但外面还是很冷，高大的灰色建筑矗立在平地上，仿佛绝对零度下的石林。大团大团的风裹着黄沙与废气穿行其间，风沙无处不在，让人置身其中而难以摆脱。阿瓦登把手揣进兜里，脖子缩进领口，畏缩着向网络部的大楼走去。</p><p>忽然，他停下了脚步，惊讶地站在原地无法动弹。他看到阿尔特弥斯正站在前面的路灯下，穿着黑色的制服。可是她的变化有多么大啊，面容象是老了十岁，满脸都是衰老的皱纹，年轻的活力荡然无存；她听到脚步声，转过头来，两个乌黑的大眼睛显得异常空洞，目光越过阿瓦登延伸到远方，没有一个明晰的焦点。</p><p>阿瓦登万万没有想到会在这个时间这个地点碰到她，这让他已经沉寂已久的心灵泛起了几点火花，可惜他迟钝的神经已经无法表达出“激动”这一个简单的情感了。两个人互相对视了一阵，他终于木然走到她身边，张了张嘴唇，想对她说些什么。但是他掏出今天新发布的健康词汇列表，发现上面是一片空白——终于连最后一个词组也被有关部门屏蔽了。</p><p>于是阿瓦登只好保持着沉默，默默地与面无表情的她擦肩而过，继续向前走去。他的身影逐渐融入同样安静的灰色人群之中，整个城市都显得寂静极了。</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;And in the naked light I saw ten thousand people, maybe more.&lt;/p&gt;
&lt;p&gt;People talking without speaking, people hearing without listening.&lt;/p&gt;
&lt;p&gt;People writing songs that voices never shared, no one dared disturb the&lt;/p&gt;
&lt;p&gt;sound of silence.&lt;/p&gt;
&lt;p&gt;— The sound of silence&lt;/p&gt;</summary>
    
    
    
    <category term="生活日记" scheme="https://blog.mbrjun.cn/categories/%E7%94%9F%E6%B4%BB%E6%97%A5%E8%AE%B0/"/>
    
    
    <category term="寂静之城" scheme="https://blog.mbrjun.cn/tags/%E5%AF%82%E9%9D%99%E4%B9%8B%E5%9F%8E/"/>
    
  </entry>
  
  <entry>
    <title>解决「此证书对于所选的目的无效」</title>
    <link href="https://blog.mbrjun.cn/archives/451/"/>
    <id>https://blog.mbrjun.cn/archives/451/</id>
    <published>2022-05-18T06:52:41.000Z</published>
    <updated>2022-05-18T06:52:41.000Z</updated>
    
    <content type="html"><![CDATA[<p>如果你颁发了一个中间 CA，但是不被设备信任，提示「此证书对于所选的目的无效」，那么你应该先检查你的根 CA：</p><p>出现这个报错是因为你的根 CA 不允许颁发中间 CA</p><span id="more"></span><hr><p>检查 OpenSSL 配置文件</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">[ v3_req ]<br>basicConstraints = critical, CA:TRUE<br>keyUsage = critical, cRLSign, nonRepudiation, digitalSignature, keyEncipherment, keyCertSign<br></code></pre></td></tr></table></figure><p>根证书的 keyUsage 必须带上这些，如果少了，补上然后重新生成 CSR 和证书</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;如果你颁发了一个中间 CA，但是不被设备信任，提示「此证书对于所选的目的无效」，那么你应该先检查你的根 CA：&lt;/p&gt;
&lt;p&gt;出现这个报错是因为你的根 CA 不允许颁发中间 CA&lt;/p&gt;</summary>
    
    
    
    <category term="软件" scheme="https://blog.mbrjun.cn/categories/%E8%BD%AF%E4%BB%B6/"/>
    
    
    <category term="TLS" scheme="https://blog.mbrjun.cn/tags/TLS/"/>
    
    <category term="SSL" scheme="https://blog.mbrjun.cn/tags/SSL/"/>
    
    <category term="OpenSSL" scheme="https://blog.mbrjun.cn/tags/OpenSSL/"/>
    
    <category term="CA" scheme="https://blog.mbrjun.cn/tags/CA/"/>
    
    <category term="CSR" scheme="https://blog.mbrjun.cn/tags/CSR/"/>
    
  </entry>
  
  <entry>
    <title>浅谈 Android Zygote</title>
    <link href="https://blog.mbrjun.cn/archives/445/"/>
    <id>https://blog.mbrjun.cn/archives/445/</id>
    <published>2022-05-10T15:31:43.000Z</published>
    <updated>2022-05-10T15:31:43.000Z</updated>
    
    <content type="html"><![CDATA[<p>Zygote 是 <code>init</code> 进程启动时创建的，通过 <code>fork</code>（复制进程）的形式来创建应用程序进程和 <code>SystemServer</code> 进程。并且，Zygote 进程在启动的时候创建 DVM 或者 ART，因此通过<code>fork</code>创建的应用程序进程和<code>SystemServer</code>进程可以在内部获取一个DVM或者ART的实例副本。</p><span id="more"></span><hr><p>首先，Android 应用跑的的是虚拟机，虚拟机中 Java 代码的不同才造成了应用的区别，而对于基础的运行环境，要求却是一样的。</p><p>其次，Zygote 在初始化时就会创建虚拟机，同时把需要的系统类库和资源文件加载的内存中。而 Zygote 在 fork 出子进程后，这个子进程也会得到一个已经加载好基础资源的虚拟机。</p><p>这样，接下来只需要装载 APK 相关的资源就可以运行了，可以做到提升效率</p><hr><p>放一个进程树</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">├─ /system/bin/init second_stage // init<br>│  ├─ zygote // 32-Bit Zygote<br>│  │  ├─ moe.mbr.32bit // 程序包名<br>│  │  │  ├─ moe.mbr.32bit // 子进程<br>│  ├─ zygote64 // 64-Bit Zygote<br>│  │  ├─ systemserver // SystemServer<br>│  │  │  ├─ systemserver // 子进程<br>│  │  ├─ com.android.chrome // 程序包名<br>│  │  │  ├─ com.android.chrome // 子进程<br></code></pre></td></tr></table></figure><hr><p>Zygote 在 <code>init</code> 进程中以 service 方式启动，根据 <code>ro.zygote</code> 引入启动脚本，安卓 5.0 开始，Zygote 有了 32&#x2F;64 位的分别，在 Android 12，<code>ro.zygote</code> 取值有四种：</p><ul><li>init.zygote32.rc</li><li>init.zygote32_64.rc</li><li>init.zygote64.rc</li><li>init.zygote64_32.rc</li></ul><h2 id="init-zygote64-32-rc"><a href="#init-zygote64-32-rc" class="headerlink" title="init.zygote64_32.rc"></a>init.zygote64_32.rc</h2><p>创建 <code>zygote</code> 和 <code>zygote_secondary</code> 服务</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs sh">service zygote /system/bin/app_process64 -Xzygote /system/bin --zygote --start-system-server --socket-name=zygote<br>    class main<br>    ......<br>service zygote_secondary /system/bin/app_process32 -Xzygote /system/bin --zygote --socket-name=zygote_secondary<br>    class main<br>    ......<br></code></pre></td></tr></table></figure><h2 id="预加载系统类和资源"><a href="#预加载系统类和资源" class="headerlink" title="预加载系统类和资源"></a>预加载系统类和资源</h2><p>为了加快应用程序的启动，<code>Android</code>会把系统常用的<code>Java类</code>和一部分<code>Framework</code>的资源放在<code>Zygote</code>进程中进行<code>预加载</code>。这些<code>预加载</code>的类和资源在所有经<code>zygote</code>进程<code>fork</code>出的<code>子进程</code>中是共享的。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">static void preload(TimingsTraceLog bootTimingsTraceLog) &#123;<br>    ......<br>    // 设置软引用保护，避免被GC回收掉<br>    beginIcuCachePinning();<br>    ......<br>    // 加载系统类<br>    preloadClasses();<br>    ......<br>    // 加载系统资源<br>    preloadResources();<br>    ......<br>    // <br>    nativePreloadAppProcessHALs();<br>    ......<br>    // 加载OpenGL资源<br>    preloadOpenGL();<br>    // 加载一些共享so库，其实就三个：android、compiler_rt、jnigraphics<br>    preloadSharedLibraries();<br>    // 加载字体资源<br>    preloadTextResources();<br>    ......<br>    // 加载webview相关资源<br>    WebViewFactory.prepareWebViewInZygote();<br>    // 取消软引用保护<br>    endIcuCachePinning();<br>    // 初始化JCA安全相关的参数<br>    warmUpJcaProviders();<br>    Log.d(TAG, &quot;end preload&quot;);<br>    sPreloadComplete = true;<br>&#125;<br></code></pre></td></tr></table></figure><hr><p>title: 浅谈 Android Zygote<br>date: 2022-05-10 23:31:43<br>updated: 2022-05-10 23:31:43<br>categories: 汐统<br>tags:</p><ul><li>虚拟机</li><li>Android,Zygote,Java,Magisk,Zygisk,Riru</li></ul><hr><p>Zygote 是 <code>init</code> 进程启动时创建的，通过 <code>fork</code>（复制进程）的形式来创建应用程序进程和 <code>SystemServer</code> 进程。并且，Zygote 进程在启动的时候创建 DVM 或者 ART，因此通过<code>fork</code>创建的应用程序进程和<code>SystemServer</code>进程可以在内部获取一个DVM或者ART的实例副本。</p><hr><p>首先，Android 应用跑的的是虚拟机，虚拟机中 Java 代码的不同才造成了应用的区别，而对于基础的运行环境，要求却是一样的。</p><p>其次，Zygote 在初始化时就会创建虚拟机，同时把需要的系统类库和资源文件加载的内存中。而 Zygote 在 fork 出子进程后，这个子进程也会得到一个已经加载好基础资源的虚拟机。</p><p>这样，接下来只需要装载 APK 相关的资源就可以运行了，可以做到提升效率</p><hr><p>放一个进程树</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">├─ /system/bin/init second_stage // init<br>│  ├─ zygote // 32-Bit Zygote<br>│  │  ├─ moe.mbr.32bit // 程序包名<br>│  │  │  ├─ moe.mbr.32bit // 子进程<br>│  ├─ zygote64 // 64-Bit Zygote<br>│  │  ├─ systemserver // SystemServer<br>│  │  │  ├─ systemserver // 子进程<br>│  │  ├─ com.android.chrome // 程序包名<br>│  │  │  ├─ com.android.chrome // 子进程<br></code></pre></td></tr></table></figure><hr><p>Zygote 在 <code>init</code> 进程中以 service 方式启动，根据 <code>ro.zygote</code> 引入启动脚本，安卓 5.0 开始，Zygote 有了 32&#x2F;64 位的分别，在 Android 12，<code>ro.zygote</code> 取值有四种：</p><ul><li>init.zygote32.rc</li><li>init.zygote32_64.rc</li><li>init.zygote64.rc</li><li>init.zygote64_32.rc</li></ul><h2 id="init-zygote64-32-rc-1"><a href="#init-zygote64-32-rc-1" class="headerlink" title="init.zygote64_32.rc"></a>init.zygote64_32.rc</h2><p>创建 <code>zygote</code> 和 <code>zygote_secondary</code> 服务</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs sh">service zygote /system/bin/app_process64 -Xzygote /system/bin --zygote --start-system-server --socket-name=zygote<br>    class main<br>    ......<br>service zygote_secondary /system/bin/app_process32 -Xzygote /system/bin --zygote --socket-name=zygote_secondary<br>    class main<br>    ......<br></code></pre></td></tr></table></figure><h2 id="预加载系统类和资源-1"><a href="#预加载系统类和资源-1" class="headerlink" title="预加载系统类和资源"></a>预加载系统类和资源</h2><p>为了加快应用程序的启动，<code>Android</code>会把系统常用的<code>Java类</code>和一部分<code>Framework</code>的资源放在<code>Zygote</code>进程中进行<code>预加载</code>。这些<code>预加载</code>的类和资源在所有经<code>zygote</code>进程<code>fork</code>出的<code>子进程</code>中是共享的。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">static void preload(TimingsTraceLog bootTimingsTraceLog) &#123;<br>    ......<br>    // 设置软引用保护，避免被GC回收掉<br>    beginIcuCachePinning();<br>    ......<br>    // 加载系统类<br>    preloadClasses();<br>    ......<br>    // 加载系统资源<br>    preloadResources();<br>    ......<br>    // <br>    nativePreloadAppProcessHALs();<br>    ......<br>    // 加载OpenGL资源<br>    preloadOpenGL();<br>    // 加载一些共享so库，其实就三个：android、compiler_rt、jnigraphics<br>    preloadSharedLibraries();<br>    // 加载字体资源<br>    preloadTextResources();<br>    ......<br>    // 加载webview相关资源<br>    WebViewFactory.prepareWebViewInZygote();<br>    // 取消软引用保护<br>    endIcuCachePinning();<br>    // 初始化JCA安全相关的参数<br>    warmUpJcaProviders();<br>    Log.d(TAG, &quot;end preload&quot;);<br>    sPreloadComplete = true;<br>&#125;<br></code></pre></td></tr></table></figure><hr><p>title: 浅谈 Android Zygote<br>date: 2022-05-10 23:31:43<br>updated: 2022-05-10 23:31:43<br>categories: Android<br>tags:</p><ul><li>虚拟机</li><li>Android,Zygote,Java,Magisk,Zygisk,Riru</li></ul><hr><p>Zygote 是 <code>init</code> 进程启动时创建的，通过 <code>fork</code>（复制进程）的形式来创建应用程序进程和 <code>SystemServer</code> 进程。并且，Zygote 进程在启动的时候创建 DVM 或者 ART，因此通过<code>fork</code>创建的应用程序进程和<code>SystemServer</code>进程可以在内部获取一个DVM或者ART的实例副本。</p><hr><p>首先，Android 应用跑的的是虚拟机，虚拟机中 Java 代码的不同才造成了应用的区别，而对于基础的运行环境，要求却是一样的。</p><p>其次，Zygote 在初始化时就会创建虚拟机，同时把需要的系统类库和资源文件加载的内存中。而 Zygote 在 fork 出子进程后，这个子进程也会得到一个已经加载好基础资源的虚拟机。</p><p>这样，接下来只需要装载 APK 相关的资源就可以运行了，可以做到提升效率</p><hr><p>放一个进程树</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">├─ /system/bin/init second_stage // init<br>│  ├─ zygote // 32-Bit Zygote<br>│  │  ├─ moe.mbr.32bit // 程序包名<br>│  │  │  ├─ moe.mbr.32bit // 子进程<br>│  ├─ zygote64 // 64-Bit Zygote<br>│  │  ├─ systemserver // SystemServer<br>│  │  │  ├─ systemserver // 子进程<br>│  │  ├─ com.android.chrome // 程序包名<br>│  │  │  ├─ com.android.chrome // 子进程<br></code></pre></td></tr></table></figure><hr><p>Zygote 在 <code>init</code> 进程中以 service 方式启动，根据 <code>ro.zygote</code> 引入启动脚本，安卓 5.0 开始，Zygote 有了 32&#x2F;64 位的分别，在 Android 12，<code>ro.zygote</code> 取值有四种：</p><ul><li>init.zygote32.rc</li><li>init.zygote32_64.rc</li><li>init.zygote64.rc</li><li>init.zygote64_32.rc</li></ul><h2 id="init-zygote64-32-rc-2"><a href="#init-zygote64-32-rc-2" class="headerlink" title="init.zygote64_32.rc"></a>init.zygote64_32.rc</h2><p>创建 <code>zygote</code> 和 <code>zygote_secondary</code> 服务</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs sh">service zygote /system/bin/app_process64 -Xzygote /system/bin --zygote --start-system-server --socket-name=zygote<br>    class main<br>    ......<br>service zygote_secondary /system/bin/app_process32 -Xzygote /system/bin --zygote --socket-name=zygote_secondary<br>    class main<br>    ......<br></code></pre></td></tr></table></figure><h2 id="预加载系统类和资源-2"><a href="#预加载系统类和资源-2" class="headerlink" title="预加载系统类和资源"></a>预加载系统类和资源</h2><p>为了加快应用程序的启动，<code>Android</code>会把系统常用的<code>Java类</code>和一部分<code>Framework</code>的资源放在<code>Zygote</code>进程中进行<code>预加载</code>。这些<code>预加载</code>的类和资源在所有经<code>zygote</code>进程<code>fork</code>出的<code>子进程</code>中是共享的。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">static void preload(TimingsTraceLog bootTimingsTraceLog) &#123;<br>    ......<br>    // 设置软引用保护，避免被GC回收掉<br>    beginIcuCachePinning();<br>    ......<br>    // 加载系统类<br>    preloadClasses();<br>    ......<br>    // 加载系统资源<br>    preloadResources();<br>    ......<br>    // <br>    nativePreloadAppProcessHALs();<br>    ......<br>    // 加载OpenGL资源<br>    preloadOpenGL();<br>    // 加载一些共享so库，其实就三个：android、compiler_rt、jnigraphics<br>    preloadSharedLibraries();<br>    // 加载字体资源<br>    preloadTextResources();<br>    ......<br>    // 加载webview相关资源<br>    WebViewFactory.prepareWebViewInZygote();<br>    // 取消软引用保护<br>    endIcuCachePinning();<br>    // 初始化JCA安全相关的参数<br>    warmUpJcaProviders();<br>    Log.d(TAG, &quot;end preload&quot;);<br>    sPreloadComplete = true;<br>&#125;<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;Zygote 是 &lt;code&gt;init&lt;/code&gt; 进程启动时创建的，通过 &lt;code&gt;fork&lt;/code&gt;（复制进程）的形式来创建应用程序进程和 &lt;code&gt;SystemServer&lt;/code&gt; 进程。并且，Zygote 进程在启动的时候创建 DVM 或者 ART，因此通过&lt;code&gt;fork&lt;/code&gt;创建的应用程序进程和&lt;code&gt;SystemServer&lt;/code&gt;进程可以在内部获取一个DVM或者ART的实例副本。&lt;/p&gt;</summary>
    
    
    
    <category term="代码" scheme="https://blog.mbrjun.cn/categories/%E4%BB%A3%E7%A0%81/"/>
    
    
    <category term="虚拟机" scheme="https://blog.mbrjun.cn/tags/%E8%99%9A%E6%8B%9F%E6%9C%BA/"/>
    
    <category term="Android" scheme="https://blog.mbrjun.cn/tags/Android/"/>
    
    <category term="Zygote" scheme="https://blog.mbrjun.cn/tags/Zygote/"/>
    
    <category term="Java" scheme="https://blog.mbrjun.cn/tags/Java/"/>
    
    <category term="Magisk" scheme="https://blog.mbrjun.cn/tags/Magisk/"/>
    
    <category term="Zygisk" scheme="https://blog.mbrjun.cn/tags/Zygisk/"/>
    
    <category term="Riru" scheme="https://blog.mbrjun.cn/tags/Riru/"/>
    
  </entry>
  
  <entry>
    <title>Arcaea 修改残片数量</title>
    <link href="https://blog.mbrjun.cn/archives/443/"/>
    <id>https://blog.mbrjun.cn/archives/443/</id>
    <published>2022-05-10T13:36:00.000Z</published>
    <updated>2022-05-10T13:40:45.000Z</updated>
    
    <content type="html"><![CDATA[<p>仅供技术研究，请勿用于其它用途！</p><span id="more"></span><hr><h2 id="准备"><a href="#准备" class="headerlink" title="准备"></a>准备</h2><ul><li>安卓手机</li><li>拥有 data 分区写入权限</li></ul><h2 id="教程"><a href="#教程" class="headerlink" title="教程"></a>教程</h2><p>修改残片之前必须先<strong>打开一遍 Arcaea</strong>，然后关掉或者不关都可以</p><p>然后需要修改 <code>/data/data/moe.low.arc/shared_prefs/Cocos2dxPrefsFile.xml</code>，打开这个文件</p><p>然后找到这一行：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">int</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;fr_v&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;29997&quot;</span> /&gt;</span><br></code></pre></td></tr></table></figure><p>后面修改为你想要的残片数<br><img src="https://cos.mbrjun.cn/IMGS/2022/05/10/wh.png"></p><p>接下来找到：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-tag">&lt;<span class="hljs-name">string</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;fr_k&quot;</span>&gt;</span>e71fbd09303b100e1e97b9acc8970bb4<span class="hljs-tag">&lt;/<span class="hljs-name">string</span>&gt;</span><br></code></pre></td></tr></table></figure><p>将值修改为 md5(<code>残片数ok残片数</code>)<br>比如修改为 29997 残片， md5(<code>29997ok29997</code>) 也就是将 fr_k 修改为 <code>e71fbd09303b100e1e97b9acc8970bb4</code><br><img src="https://cos.mbrjun.cn/IMGS/2022/05/10/df.png"></p><p>MD5 在线计算器: <a href="http://www.md5.cz/">http://www.md5.cz/</a></p><p>修改完成保存，设置权限 330（rw-rw—-）<br>重启 Arcaea 即可生效</p><hr><p>备注：如果使用 MT 管理器修改，需要删除自动生成的备份文件 <code>Cocos2dxPrefsFile.xml.bak</code>，否则修改不会生效</p><p>封面：<a href="https://www.pixiv.net/artworks/83817430">https://www.pixiv.net/artworks/83817430</a><br>作者：Saclia</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;仅供技术研究，请勿用于其它用途！&lt;/p&gt;</summary>
    
    
    
    <category term="游戏" scheme="https://blog.mbrjun.cn/categories/%E6%B8%B8%E6%88%8F/"/>
    
    
    <category term="Arcaea" scheme="https://blog.mbrjun.cn/tags/Arcaea/"/>
    
  </entry>
  
  <entry>
    <title>Typecho 数据库优化</title>
    <link href="https://blog.mbrjun.cn/archives/440/"/>
    <id>https://blog.mbrjun.cn/archives/440/</id>
    <published>2022-05-05T17:01:00.000Z</published>
    <updated>2022-05-06T16:41:15.000Z</updated>
    
    <content type="html"><![CDATA[<p>本文主要适用于从老版本升级上来的 Typecho，做一下数据库优化提高查表速度，顺便让 blog 支持一下 Emoji</p><span id="more"></span><hr><h2 id="数据表引擎"><a href="#数据表引擎" class="headerlink" title="数据表引擎"></a>数据表引擎</h2><p>1.2 以上版本一律建议 InnoDB，新版本 InnoDB 查表效率比 MyISAM 强很多，在我的机器上，查表能快 10ms 左右<br>旧版本 InnoDB 反而会比 MyISAM 慢</p><h3 id="InnoDB-vs-MyISAM"><a href="#InnoDB-vs-MyISAM" class="headerlink" title="InnoDB vs MyISAM"></a>InnoDB vs MyISAM</h3><table><thead><tr><th>InnoDB</th><th>MyISAM</th></tr></thead><tbody><tr><td>支持事务处理等</td><td>不支持事务处理等</td></tr><tr><td>不加锁读取</td><td></td></tr><tr><td>支持外键</td><td>不支持外键</td></tr><tr><td>支持行锁</td><td>不支持行锁</td></tr><tr><td>不支持FULLTEXT类型的索引</td><td>支持FULLTEXT类型的索引</td></tr><tr><td>不保存表的具体行数，扫描表来计算有多少行</td><td>保存表的具体行数，不带where时，直接返回保存的行数。</td></tr><tr><td>DELETE表时，是一行一行地删除</td><td>DELETE表时，先drop表，然后重建表</td></tr><tr><td>InnoDB把数据和索引存放在表空间里面</td><td>MyISAM表被存放在三个文件，frm文件存放表格定义</td></tr><tr><td>跨平台可直接拷贝使用</td><td>跨平台很难直接拷贝。</td></tr><tr><td>InnoDB中必须包含AUTO_INCREMENT类型字段的索引表格很难被压缩</td><td>MyISAM中可以使用AUTO_INCREMENT类型字段建立联合索引，表格可以被压缩。</td></tr></tbody></table><h3 id="转换方法"><a href="#转换方法" class="headerlink" title="转换方法"></a>转换方法</h3><p>将 MyISAM 转换为 InnoDB 的方法：</p><p>可以使用下面的命令，或者使用 PHPMyAdmin 等工具</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">ALTER TABLE `blog_metas` ENGINE = InnoDB<br></code></pre></td></tr></table></figure><p>将 <code>blog_metas</code> 替换为你 Typecho 的数据表，分别将每个数据表都转换为 InnoDB，转换完成后修改配置文件 <code>config.inc.php</code>，开启 InnoDB</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs php"><span class="hljs-comment">//config db</span><br><span class="hljs-variable">$db</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">\Typecho\Db</span>(<span class="hljs-string">&#x27;Pdo_Mysql&#x27;</span>, <span class="hljs-string">&#x27;blog_&#x27;</span>);<br><span class="hljs-variable">$db</span>-&gt;<span class="hljs-title function_ invoke__">addServer</span>(<span class="hljs-keyword">array</span> (<br>  <span class="hljs-string">&#x27;host&#x27;</span> =&gt; <span class="hljs-string">&#x27;127.0.0.1&#x27;</span>,<br>  <span class="hljs-string">&#x27;port&#x27;</span> =&gt; <span class="hljs-number">3306</span>,<br>  <span class="hljs-string">&#x27;user&#x27;</span> =&gt; <span class="hljs-string">&#x27;MBRjun&#x27;</span>,<br>  <span class="hljs-string">&#x27;password&#x27;</span> =&gt; <span class="hljs-string">&#x27;DATABASE PASSWORD&#x27;</span>,<br>  <span class="hljs-string">&#x27;charset&#x27;</span> =&gt; <span class="hljs-string">&#x27;utf8mb4&#x27;</span>,<br>  <span class="hljs-string">&#x27;database&#x27;</span> =&gt; <span class="hljs-string">&#x27;mbrjun&#x27;</span>,<br>  <span class="hljs-string">&#x27;engine&#x27;</span> =&gt; <span class="hljs-string">&#x27;InnoDB&#x27;</span>,<br>), <span class="hljs-title class_">\Typecho\Db</span>::<span class="hljs-variable constant_">READ</span> | <span class="hljs-title class_">\Typecho\Db</span>::<span class="hljs-variable constant_">WRITE</span>);<br><span class="hljs-title class_">\Typecho\Db</span>::<span class="hljs-title function_ invoke__">set</span>(<span class="hljs-variable">$db</span>);<br></code></pre></td></tr></table></figure><p>将 engine 修改为 InnoDB</p><h2 id="排序规则-amp-字符集"><a href="#排序规则-amp-字符集" class="headerlink" title="排序规则 &amp; 字符集"></a>排序规则 &amp; 字符集</h2><p>老版本默认的字符集是 <code>utf8</code>，这个字符集是不支持 ?emoji 和部分生僻字的，建议修改为 <code>utf8mb4</code>，同时将排序规则修改为 <code>utf8mb4_0900_ai_ci</code></p><p>修改字符集的命令：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs mysql">ALTER TABLE blog_metas CONVERT TO CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci<br></code></pre></td></tr></table></figure><p>PHPMyAdmin：<br><img src="https://cos.mbrjun.cn/IMGS/2022/05/06/ei.jpg"></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;本文主要适用于从老版本升级上来的 Typecho，做一下数据库优化提高查表速度，顺便让 blog 支持一下 Emoji&lt;/p&gt;</summary>
    
    
    
    <category term="网络" scheme="https://blog.mbrjun.cn/categories/%E7%BD%91%E7%BB%9C/"/>
    
    
    <category term="服务器" scheme="https://blog.mbrjun.cn/tags/%E6%9C%8D%E5%8A%A1%E5%99%A8/"/>
    
    <category term="typecho" scheme="https://blog.mbrjun.cn/tags/typecho/"/>
    
    <category term="优化" scheme="https://blog.mbrjun.cn/tags/%E4%BC%98%E5%8C%96/"/>
    
    <category term="Mysql" scheme="https://blog.mbrjun.cn/tags/Mysql/"/>
    
    <category term="数据库" scheme="https://blog.mbrjun.cn/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
    <category term="UTF8" scheme="https://blog.mbrjun.cn/tags/UTF8/"/>
    
    <category term="emoji" scheme="https://blog.mbrjun.cn/tags/emoji/"/>
    
    <category term="InnoDB" scheme="https://blog.mbrjun.cn/tags/InnoDB/"/>
    
  </entry>
  
  <entry>
    <title>从 Let&#39;s Encrypt E1 获取 ECDSA 证书</title>
    <link href="https://blog.mbrjun.cn/archives/442/"/>
    <id>https://blog.mbrjun.cn/archives/442/</id>
    <published>2022-05-02T17:09:46.000Z</published>
    <updated>2022-05-02T17:09:46.000Z</updated>
    
    <content type="html"><![CDATA[<p>ECDSA 证书，即 ECC 证书，具有很多优势，例如效率更高，满足同等安全性的情况下密钥更短，下面详细列出了一部分优势：</p><ul><li>ECC 密钥更短，意味着 ECC 将占用更少的资源却有更高的性能；</li><li>ECC 更易扩展，随着 RSA 密钥更长只会让 SSL&#x2F;TLS 面临更多的麻烦；</li><li>ECC 并不太容易受到量子计算机的安全威胁；</li><li>256 位 ECC 安全性等同于 3072 位 RSA</li></ul><p>本文将详细介绍如何从 Let’s Encrypt 获取一张 ECC 证书</p><span id="more"></span><h2 id="前提条件"><a href="#前提条件" class="headerlink" title="前提条件"></a>前提条件</h2><p>一台服务器，Linux 和 Windows 均可，更建议 Linux，作者使用 TencentOS 3.1 演示</p><h2 id="安装-acme-sh"><a href="#安装-acme-sh" class="headerlink" title="安装 acme.sh"></a>安装 acme.sh</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">curl https://get.acme.sh | sh -s email=邮箱<br></code></pre></td></tr></table></figure><p><img src="https://cos.mbrjun.cn/IMGS/2022/05/03/eg.png"></p><p>安装完成后需要重启终端，如果懒得重启，里面再开个新的 bash</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">bash<br></code></pre></td></tr></table></figure><h2 id="设置-CA"><a href="#设置-CA" class="headerlink" title="设置 CA"></a>设置 CA</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">acme.sh --issue -d example.com --dns dns_cf --server letsencrypt<br></code></pre></td></tr></table></figure><p>设置为 Let’s Encrypt</p><h2 id="注册账户"><a href="#注册账户" class="headerlink" title="注册账户"></a>注册账户</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">acme.sh --update-account<br></code></pre></td></tr></table></figure><p>会输出一个类似  <a href="https://acme-v02.api.letsencrypt.org/acme/acct/12345678">https://acme-v02.api.letsencrypt.org/acme/acct/12345678</a> 的链接，这个链接就是你的账户 ID</p><h2 id="获得-E1-许可"><a href="#获得-E1-许可" class="headerlink" title="获得 E1 许可"></a>获得 E1 许可</h2><p>Let’s Encrypt 目前有八个中间证书颁发机构，分别是：</p><ul><li>已弃用：X1、X2、X3、X4</li><li>活跃：R3</li><li>活跃（受限制）：E1</li><li>灾难备份：R4、E2</li></ul><p>其中已弃用的四个中间证书颁发机构的根证书颁发机构（CA）是：</p><ul><li>ISRG Root X1</li><li>IdenTrust</li></ul><p>R3、R4 的根证书颁发机构（CA）是：</p><ul><li>ISRG Root X1</li><li><del>IdenTrust（弃用）</del></li></ul><p>而 E1、E2 有一个全新的 CA：</p><ul><li>ISRG Root X2</li></ul><p>目前，E1 不是所有人都可以申请，你必须先填写下面的申请表格，然后才能获取证书：</p><p><a href="https://forms.gle/ftKeqkj6AJgXUDPJ8">https://forms.gle/ftKeqkj6AJgXUDPJ8</a></p><blockquote><p>上面的链接在中国大陆无法直接打开，建议通过合法使用代理等方式打开。</p></blockquote><p><img src="https://cos.mbrjun.cn/IMGS/2022/05/03/dg.png"></p><p>Let’s Encrypt 的工作人员每周四集中进行审批，因此你可能需要等待一段时间</p><h2 id="获取证书"><a href="#获取证书" class="headerlink" title="获取证书"></a>获取证书</h2><p>如果你拥有了 E1 许可，就可以创建 ECDSA 证书了</p><p>如果你想使用 DNS 验证，需要先配置 DNS API<br>如果你的 DNS 不支持 API，或者使用文件验证，请跳过这一步<br>这里使用 DNSPod 演示</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-built_in">export</span> DP_Id=<span class="hljs-string">&quot;114514&quot;</span><br><span class="hljs-built_in">export</span> DP_Key=<span class="hljs-string">&quot;0123456789ABCDEF&quot;</span><br></code></pre></td></tr></table></figure><p>然后申请证书</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">acme.sh --issue --dns dns_dp -d mbrjun.cn  -d <span class="hljs-string">&quot;*.mbrjun.cn&quot;</span> --keylength ec-384<br></code></pre></td></tr></table></figure><p>参数解释：</p><ul><li>-d 后面的是你的域名，支持多个域名，支持通配符，如果是中文&#x2F;emoji域名请你编码，如果是通配符请打上双引号</li><li>–keylength 后面是密钥强度，可以是 <code>ec-256</code> 或者 <code>ec-384</code></li></ul><p><img src="https://cos.mbrjun.cn/IMGS/2022/05/03/ne.png"></p><p>然后应该就能成功申请了，证书和私钥保存在 <code>.acme.sh</code>目录下</p><h2 id="关于本站"><a href="#关于本站" class="headerlink" title="关于本站"></a>关于本站</h2><p>本站玩过了很多证书，最后觉得还是 Let’s Encrypt E1 好看x</p><p>其实 ZeroSSL 也很好玩  </p><p>本站玩过的部分证书：</p><ul><li>TrustAsia RSA CA</li><li>Digicert RSA2048</li><li>TrustAsia ECC CA</li><li>Let’s Encrypt R3</li><li>Let’s Encrypt E1</li><li>ZeroSSL</li></ul>]]></content>
    
    
    <summary type="html">&lt;p&gt;ECDSA 证书，即 ECC 证书，具有很多优势，例如效率更高，满足同等安全性的情况下密钥更短，下面详细列出了一部分优势：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ECC 密钥更短，意味着 ECC 将占用更少的资源却有更高的性能；&lt;/li&gt;
&lt;li&gt;ECC 更易扩展，随着 RSA 密钥更长只会让 SSL&amp;#x2F;TLS 面临更多的麻烦；&lt;/li&gt;
&lt;li&gt;ECC 并不太容易受到量子计算机的安全威胁；&lt;/li&gt;
&lt;li&gt;256 位 ECC 安全性等同于 3072 位 RSA&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;本文将详细介绍如何从 Let’s Encrypt 获取一张 ECC 证书&lt;/p&gt;</summary>
    
    
    
    <category term="教程" scheme="https://blog.mbrjun.cn/categories/%E6%95%99%E7%A8%8B/"/>
    
    
    <category term="HTTPS" scheme="https://blog.mbrjun.cn/tags/HTTPS/"/>
    
    <category term="TLS" scheme="https://blog.mbrjun.cn/tags/TLS/"/>
    
    <category term="证书" scheme="https://blog.mbrjun.cn/tags/%E8%AF%81%E4%B9%A6/"/>
    
    <category term="SSL" scheme="https://blog.mbrjun.cn/tags/SSL/"/>
    
    <category term="ECDSA" scheme="https://blog.mbrjun.cn/tags/ECDSA/"/>
    
    <category term="RSA" scheme="https://blog.mbrjun.cn/tags/RSA/"/>
    
    <category term="ECC" scheme="https://blog.mbrjun.cn/tags/ECC/"/>
    
    <category term="ACME" scheme="https://blog.mbrjun.cn/tags/ACME/"/>
    
    <category term="acme.sh" scheme="https://blog.mbrjun.cn/tags/acme-sh/"/>
    
    <category term="Let&#39;s Encrypt" scheme="https://blog.mbrjun.cn/tags/Let-s-Encrypt/"/>
    
  </entry>
  
  <entry>
    <title>Typecho 使用腾讯云 CDN 配置 HTTP 回源</title>
    <link href="https://blog.mbrjun.cn/archives/438/"/>
    <id>https://blog.mbrjun.cn/archives/438/</id>
    <published>2022-04-28T17:14:51.000Z</published>
    <updated>2022-04-28T17:14:51.000Z</updated>
    
    <content type="html"><![CDATA[<p>经过测试，腾讯云  CDN HTTPS 回源会比 HTTP 慢很多，大概 100ms，改成 HTTP 回源又出现了一些问题，这篇文章总结一下配置 HTTP 回源出现的问题，大家遇到问题可以参考一下</p><span id="more"></span><hr><h2 id="QUIC-Mixed-Content"><a href="#QUIC-Mixed-Content" class="headerlink" title="QUIC Mixed Content"></a>QUIC Mixed Content</h2><p>腾讯云 CDN 如果采用 HTTP 回源，同时开启了 QUIC 访问，则通过 QUIC 访问的用户访问网站时极大概率会出现混合内容错误，也就是 Mixed Content，原因是 Typecho 当前版本不把 QUIC 当做 https<br>发生混合内容错误一般有两种表现</p><ul><li>页面资源无法正常加载（被浏览器屏蔽）</li><li>点击浏览器地址栏 https 旁边的锁头后出现警告：连接不够安全</li></ul><p>我给 Typecho 扔了一个 PR，<del>未来这个问题可能会被修复</del>已经并进去了，见 <a href="https://github.com/typecho/typecho/pull/1423">https://github.com/typecho/typecho/pull/1423</a></p><p>你也可以手动修复这个问题：</p><ul><li>代码编辑器打开 <code>var/Typecho/Request.php</code></li><li>在原本第 432 行的位置换行（Typecho Release 1.2），插入以下内容</li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs PHP">|| (!<span class="hljs-keyword">empty</span>(<span class="hljs-variable">$_SERVER</span>[<span class="hljs-string">&#x27;HTTP_X_FORWARDED_PROTO&#x27;</span>]) &amp;&amp; !<span class="hljs-title function_ invoke__">strcasecmp</span>(<span class="hljs-string">&#x27;quic&#x27;</span>, <span class="hljs-variable">$_SERVER</span>[<span class="hljs-string">&#x27;HTTP_X_FORWARDED_PROTO&#x27;</span>]))<br></code></pre></td></tr></table></figure><p><img src="https://cos.mbrjun.cn/IMGS/2022/04/29/yz.jpg"></p><h2 id="TOO-MANY-REDIRECTS"><a href="#TOO-MANY-REDIRECTS" class="headerlink" title="TOO_MANY_REDIRECTS"></a>TOO_MANY_REDIRECTS</h2><p>如果发生了重定向循环，一般是因为源站配置了强制HTTPS，取消该配置即可</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;经过测试，腾讯云  CDN HTTPS 回源会比 HTTP 慢很多，大概 100ms，改成 HTTP 回源又出现了一些问题，这篇文章总结一下配置 HTTP 回源出现的问题，大家遇到问题可以参考一下&lt;/p&gt;</summary>
    
    
    
    <category term="代码" scheme="https://blog.mbrjun.cn/categories/%E4%BB%A3%E7%A0%81/"/>
    
    
    <category term="typecho" scheme="https://blog.mbrjun.cn/tags/typecho/"/>
    
    <category term="CDN" scheme="https://blog.mbrjun.cn/tags/CDN/"/>
    
    <category term="腾讯云" scheme="https://blog.mbrjun.cn/tags/%E8%85%BE%E8%AE%AF%E4%BA%91/"/>
    
    <category term="blog" scheme="https://blog.mbrjun.cn/tags/blog/"/>
    
    <category term="PHP" scheme="https://blog.mbrjun.cn/tags/PHP/"/>
    
    <category term="http" scheme="https://blog.mbrjun.cn/tags/http/"/>
    
  </entry>
  
  <entry>
    <title>为 IP 地址 免费签发 SSL/TLS 证书</title>
    <link href="https://blog.mbrjun.cn/archives/435/"/>
    <id>https://blog.mbrjun.cn/archives/435/</id>
    <published>2022-04-27T11:38:00.000Z</published>
    <updated>2022-04-27T14:00:21.000Z</updated>
    
    <content type="html"><![CDATA[<p>一般的 SSL&#x2F;TLS CA 只向域名颁发证书，本文介绍一个给 IP 免费颁发证书的 CA</p><span id="more"></span><p>首先看看配置好之后的效果<br><img src="https://cos.mbrjun.cn/IMGS/2022/04/27/st.png"></p><hr><h2 id="教程"><a href="#教程" class="headerlink" title="教程"></a>教程</h2><h3 id="获取证书"><a href="#获取证书" class="headerlink" title="获取证书"></a>获取证书</h3><p>首先打开 <a href="https://app.zerossl.com/certificates">https://app.zerossl.com/certificates</a><br> 进入上面的网址登录，如果没有账户，可以按 “Get started for free” 注册</p><p>登录好之后，点击右上角 “New Certificate”，然后填写你服务器的 IP（支持 IPv6）<br><img src="https://cos.mbrjun.cn/IMGS/2022/04/27/xy.png"><br>需要注意的是，如果你想要申请 IPv6 的证书，你需要填写完整 IP（类似 <code>2402:abcd:abcd:abcd:0000:0000:0000:0000</code> 而不是 <code>2402:abcd:abcd:abcd::</code></p><ul><li>时间选择 90 天，然后一路下一步</li><li>域名验证方法请选择【文件验证】</li></ul><p>把网页上的验证文件上传到服务器网站目录</p><h3 id="安装证书"><a href="#安装证书" class="headerlink" title="安装证书"></a>安装证书</h3><p><img src="https://cos.mbrjun.cn/IMGS/2022/04/27/ud.png"><br>申请成功后应该会显示这个界面，选择你的 Web 服务器，下载证书压缩包<br>然后打开<a href="https://myssl.com/chain_download.html">证书链补全工具</a>，上传 certificate.crt，然后把生成的完整证书链下载</p><p>然后就可以把证书安装到服务器了，之后访问 IP 地址也可以有 “https”</p><h3 id="自动续费"><a href="#自动续费" class="headerlink" title="自动续费"></a>自动续费</h3><p><a href="https://github.com/tinkernels/zerossl-ip-cert">https://github.com/tinkernels/zerossl-ip-cert</a></p>]]></content>
    
    
    <summary type="html">&lt;p&gt;一般的 SSL&amp;#x2F;TLS CA 只向域名颁发证书，本文介绍一个给 IP 免费颁发证书的 CA&lt;/p&gt;</summary>
    
    
    
    <category term="网络" scheme="https://blog.mbrjun.cn/categories/%E7%BD%91%E7%BB%9C/"/>
    
    
    <category term="IPv6" scheme="https://blog.mbrjun.cn/tags/IPv6/"/>
    
    <category term="TLS" scheme="https://blog.mbrjun.cn/tags/TLS/"/>
    
    <category term="证书" scheme="https://blog.mbrjun.cn/tags/%E8%AF%81%E4%B9%A6/"/>
    
    <category term="SSL" scheme="https://blog.mbrjun.cn/tags/SSL/"/>
    
    <category term="免费SSL" scheme="https://blog.mbrjun.cn/tags/%E5%85%8D%E8%B4%B9SSL/"/>
    
    <category term="zerossl" scheme="https://blog.mbrjun.cn/tags/zerossl/"/>
    
  </entry>
  
  <entry>
    <title>白嫖 IBM LinuxOne VPS</title>
    <link href="https://blog.mbrjun.cn/archives/434/"/>
    <id>https://blog.mbrjun.cn/archives/434/</id>
    <published>2022-04-18T03:05:00.000Z</published>
    <updated>2022-05-04T02:22:14.000Z</updated>
    
    <content type="html"><![CDATA[<p>写一篇白嫖 IBM LinuxOne 的教程</p><span id="more"></span><p>开头提醒一下：这个 VPS 是 S390X 架构的，兼容性不如 x86-64，能安装的软件不多，这个机子比较适合建站，LNMP、LAMP、宝塔之类的都可以跑，性能和并发也是挺强的，做编译机也是很好的<br>挖矿的话大概率是不行的，__而且条款也不允许__，高技术力的可以试试自己编译 xmrig 测试<br>也<strong>不建议</strong>你用这个东西搭建代理工具，易封号，但是这个机子确实能搭<br>也可以开 Minecraft 服务器，但是延迟会比较高</p><hr><h2 id="准备"><a href="#准备" class="headerlink" title="准备"></a>准备</h2><ul><li>一个邮箱，推荐 GMail，国内可以 Outlook，不推荐 iCloud、QQ</li><li>英文基础，看不懂英文请使用浏览器翻译插件</li><li>Linux 基础</li></ul><h2 id="教程"><a href="#教程" class="headerlink" title="教程"></a>教程</h2><p><a href="https://linuxone.cloud.marist.edu/#/register?flag=VM">先进官网注册</a>，需要填写一些基本信息，地区写中国就可以了，如果是美国要验证地址和电话，申请理由可以写“Building Android”“Machine Learning”“develop website”之类的，如果描述不太清楚可能审核不通过<br><img src="https://cos.mbrjun.cn/IMGS/2022/04/18/js.png"><br>注册账户有概率出现人工审核，一般是由于你开了代理或者邮箱不好，注册好了邮箱会收到一封邮件，点击邮件里链接验证，验证好了会受到另一封邮件，里面有账户的过期时间<br>然后去<a href="https://linuxone.cloud.marist.edu/#/instance">创建实例</a>，系统一般选择 RHEL（CentOS 的妈）或 Ubuntu，配置直接选择 2 核 4 GB 就可以<br>创建好了去生成一下 SSH 密钥，这台机子默认没启用密码登录</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">ssh-keygen -t rsa<br></code></pre></td></tr></table></figure><p><img src="https://cos.mbrjun.cn/IMGS/2022/04/18/tr.png"></p><p>把 SSH 密钥拷到 LinuxOne 机器上，然后就可以用这个密钥连接了，账号名是 <code>linux1</code>，登陆成功会有下面的消息</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">&gt;___ ____  __  __      _     _                   ___  _   _ _____<br>|_ _| __ )|  \/  |    | |   (_)_ __  _   ___  __/ _ \| \ | | ____|<br> | ||  _ \| |\/| |    | |   | | &#x27;_ \| | | \ \/ / | | |  \| |  _|<br> | || |_) | |  | |    | |___| | | | | |_| |&gt;  &lt;| |_| | |\  | |___<br>|___|____/|_|  |_|    |_____|_|_| |_|\__,_/_/\_\\___/|_| \_|_____|<br><br>=================================================================================<br>Welcome to the IBM LinuxONE Community Cloud!<br><br>This server is for authorized users only. All activity is logged and monitored.<br>Individuals using this server must abide to the Terms and Conditions listed here:<br>https://www.ibm.com/community/z/ibm-linuxone-community-cloud-terms-and-conditions/<br>Your access will be revoked for any non-compliance.<br>==================================================================================<br></code></pre></td></tr></table></figure><h2 id="SSH-开启密码登录"><a href="#SSH-开启密码登录" class="headerlink" title="SSH 开启密码登录"></a>SSH 开启密码登录</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">vim /etc/ssh/sshd_config<br></code></pre></td></tr></table></figure><p><img src="https://cos.mbrjun.cn/IMGS/2022/04/18/dy.png"><br><img src="https://cos.mbrjun.cn/IMGS/2022/04/18/ui.png"></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">[ESC]:wq[Enter]<br>systemctl restart sshd<br></code></pre></td></tr></table></figure><h2 id="机器测试"><a href="#机器测试" class="headerlink" title="机器测试"></a>机器测试</h2><p>测试一些基本、常用的程序和功能</p><h3 id="uname-a"><a href="#uname-a" class="headerlink" title="uname -a"></a>uname -a</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs plaintext"># uname -a<br>Linux MBR390 3.10.0-1160.59.1.el7.s390x #1 SMP Wed Feb 16 07:14:49 EST 2022 s390x s390x s390x GNU/Linux<br></code></pre></td></tr></table></figure><h3 id="Docker"><a href="#Docker" class="headerlink" title="Docker"></a>Docker</h3><p>能装，但是要注意容器是否提供 S390x 架构</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">WARNING: The requested image&#x27;s platform (linux/amd64) does not match the detected host platform (linux/s390x) and no specific platform was requested<br></code></pre></td></tr></table></figure><h3 id="LNMP-x2F-LAMP"><a href="#LNMP-x2F-LAMP" class="headerlink" title="LNMP&#x2F;LAMP"></a>LNMP&#x2F;LAMP</h3><p>能装，用包管理器，<code>yum</code> 或 <code>apt</code></p><h3 id="cpuinfo"><a href="#cpuinfo" class="headerlink" title="cpuinfo"></a>cpuinfo</h3><p>5.2 GHz，960MB 四级缓存</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ <span class="hljs-built_in">cat</span> /proc/cpuinfo<br>vendor_id       : IBM/S390<br><span class="hljs-comment"># processors    : 2</span><br>bogomips per cpu: 3241.00<br>max thread <span class="hljs-built_in">id</span>   : 0<br>features        : esan3 zarch stfle msa ldisp eimm dfp edat etf3eh highgprs te vx vxd vxe gs vxe2 vxp <span class="hljs-built_in">sort</span> dflt sie<br>facilities      : 0 1 2 3 4 6 7 8 9 10 12 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 30 31 32 33 34 35 36 37 38 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 57 58 59 60 61 73 74 75 76 77 80 81 82 128 129 130 131 133 134 135 146 147 148 150 151 152 155 156 168<br>cache0          : level=1 <span class="hljs-built_in">type</span>=Data scope=Private size=128K line_size=256 associativity=8<br>cache1          : level=1 <span class="hljs-built_in">type</span>=Instruction scope=Private size=128K line_size=256 associativity=8<br>cache2          : level=2 <span class="hljs-built_in">type</span>=Data scope=Private size=4096K line_size=256 associativity=8<br>cache3          : level=2 <span class="hljs-built_in">type</span>=Instruction scope=Private size=4096K line_size=256 associativity=8<br>cache4          : level=3 <span class="hljs-built_in">type</span>=Unified scope=Shared size=262144K line_size=256 associativity=32<br>cache5          : level=4 <span class="hljs-built_in">type</span>=Unified scope=Shared size=983040K line_size=256 associativity=60<br>processor 0: version = FF,  identification = 0418E8,  machine = 8561<br>processor 1: version = FF,  identification = 0418E8,  machine = 8561<br><br>cpu number      : 0<br>cpu MHz dynamic : 5200<br>cpu MHz static  : 5200<br><br>cpu number      : 1<br>cpu MHz dynamic : 5200<br>cpu MHz static  : 5200<br></code></pre></td></tr></table></figure><h3 id="neofetch"><a href="#neofetch" class="headerlink" title="neofetch"></a>neofetch</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">RHEL       .MMM..:MMMMMMM                  root@MBR390<br>          MMMMMMMMMMMMMMMMMM               -----------<br>          MMMMMMMMMMMMMMMMMMMM.            OS: Red Hat Enterprise Linux Server 7.9 (Maipo) s390x<br>         MMMMMMMMMMMMMMMMMMMMMM            Kernel: 3.10.0-1160.59.1.el7.s390x<br>        ,MMMMMMMMMMMMMMMMMMMMMM:           Uptime: 7 hours, 30 mins<br>        MMMMMMMMMMMMMMMMMMMMMMMM           Packages: 471 (rpm)<br>  .MMMM&#x27;  MMMMMMMMMMMMMMMMMMMMMM           Shell: bash 4.2.46<br> MMMMMM    `MMMMMMMMMMMMMMMMMMMM.          Terminal: /dev/pts/0<br>MMMMMMMM      MMMMMMMMMMMMMMMMMM .         CPU: 8561 (2)<br>MMMMMMMMM.       `MMMMMMMMMMMMM&#x27; MM.       Memory: 1150MiB / 3847MiB<br>MMMMMMMMMMM.                     MMMM<br>`MMMMMMMMMMMMM.                 ,MMMMM.<br> `MMMMMMMMMMMMMMMMM.          ,MMMMMMMM.<br>    MMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM<br>      MMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMMM:<br>         MMMMMMMMMMMMMMMMMMMMMMMMMMMMMM<br>            `MMMMMMMMMMMMMMMMMMMMMMMM:<br>                ``MMMMMMMMMMMMMMMMM&#x27;<br></code></pre></td></tr></table></figure><h3 id="宝塔"><a href="#宝塔" class="headerlink" title="宝塔"></a>宝塔</h3><p>可以用，但是不能用官方的方法，安装方法如下</p><h4 id="RHEL"><a href="#RHEL" class="headerlink" title="RHEL"></a>RHEL</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 复制所有命令粘贴到终端</span><br>sudo su<br>iptables -P INPUT ACCEPT<br>iptables -P FORWARD ACCEPT<br>iptables -P OUTPUT ACCEPT<br>iptables -F<br>iptables-save<br>yum install -y wget curl &amp;&amp; wget -O install.sh http://download.bt.cn/install/install_6.0.sh &amp;&amp; sh install.sh ed8484bec<br>btpip install gevent<br>btpip install flask<br>btpip install gevent-websocket<br>btpip install psutil<br><span class="hljs-built_in">cd</span> /tmp<br>curl https://raw.githubusercontent.com/MBRjun/btpanel-v7.7.0/main/install/install_panel.sh --output install_panel.sh<br>bash install_panel.sh<br>sed -i <span class="hljs-string">&quot;s|if (bind_user == &#x27;True&#x27;) &#123;|if (bind_user == &#x27;REMOVED&#x27;) &#123;|g&quot;</span> /www/server/panel/BTPanel/static/js/index.js<br>btpip install requests<br><span class="hljs-built_in">rm</span> install_panel.sh<br></code></pre></td></tr></table></figure><h4 id="Ubuntu"><a href="#Ubuntu" class="headerlink" title="Ubuntu"></a>Ubuntu</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 复制所有命令粘贴到终端</span><br>sudo su<br>iptables -P INPUT ACCEPT<br>iptables -P FORWARD ACCEPT<br>iptables -P OUTPUT ACCEPT<br>iptables -F<br>iptables-save<br>wget -O install.sh http://download.bt.cn/install/install-ubuntu_6.0.sh &amp;&amp; sudo bash install.sh ed8484bec<br>btpip install gevent<br>btpip install flask<br>btpip install gevent-websocket<br>btpip install psutil<br>wget https://raw.githubusercontent.com/MBRjun/btpanel-v7.7.0/main/install/install_panel.sh<br>bash install_panel.sh<br>sed -i <span class="hljs-string">&quot;s|if (bind_user == &#x27;True&#x27;) &#123;|if (bind_user == &#x27;REMOVED&#x27;) &#123;|g&quot;</span> /www/server/panel/BTPanel/static/js/index.js<br>btpip install requests<br><span class="hljs-built_in">rm</span> install_panel.sh<br></code></pre></td></tr></table></figure><h3 id="SpeedTest"><a href="#SpeedTest" class="headerlink" title="SpeedTest"></a>SpeedTest</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">#二进制版本不支持 S390x，请使用包管理器<br>curl -s https://install.speedtest.net/app/cli/install.rpm.sh | sudo bash<br>sudo yum install speedtest<br>speedtest<br><br>    Latency:    17.57 ms   (0.14 ms jitter)<br>   Download:   1.15 Gbps (data used: 1.75 GB )<br>     Upload:     0.50 Gbps (data used: 0.71 GB )<br>Packet Loss:     0.0%<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;写一篇白嫖 IBM LinuxOne 的教程&lt;/p&gt;</summary>
    
    
    
    <category term="教程" scheme="https://blog.mbrjun.cn/categories/%E6%95%99%E7%A8%8B/"/>
    
    
    <category term="服务器" scheme="https://blog.mbrjun.cn/tags/%E6%9C%8D%E5%8A%A1%E5%99%A8/"/>
    
    <category term="VPS" scheme="https://blog.mbrjun.cn/tags/VPS/"/>
    
    <category term="宝塔" scheme="https://blog.mbrjun.cn/tags/%E5%AE%9D%E5%A1%94/"/>
    
    <category term="S390X" scheme="https://blog.mbrjun.cn/tags/S390X/"/>
    
    <category term="RHEL" scheme="https://blog.mbrjun.cn/tags/RHEL/"/>
    
    <category term="LinuxOne" scheme="https://blog.mbrjun.cn/tags/LinuxOne/"/>
    
    <category term="MC服" scheme="https://blog.mbrjun.cn/tags/MC%E6%9C%8D/"/>
    
    <category term="LNMP" scheme="https://blog.mbrjun.cn/tags/LNMP/"/>
    
    <category term="LAMP" scheme="https://blog.mbrjun.cn/tags/LAMP/"/>
    
    <category term="大型机" scheme="https://blog.mbrjun.cn/tags/%E5%A4%A7%E5%9E%8B%E6%9C%BA/"/>
    
  </entry>
  
  <entry>
    <title>Typecho TTFB、加载速度优化教程</title>
    <link href="https://blog.mbrjun.cn/archives/432/"/>
    <id>https://blog.mbrjun.cn/archives/432/</id>
    <published>2022-04-15T07:35:00.000Z</published>
    <updated>2022-04-27T16:39:56.000Z</updated>
    
    <content type="html"><![CDATA[<p>很多人搭建 Typecho 之后都会觉得自己的网站有些慢，想要优化下打开速度，碰巧最近站长也在做优化，所以写一篇优化教程。</p><span id="more"></span><hr><p>先贴一下我机器的配置：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">BASH             ..                    root@MBR-Server<br>               .PLTJ.                  ---------------<br>              &lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;                 OS: Tencent OS Server 3.1 20220217<br>     KKSSV&#x27; 4KKK LJ KKKL.&#x27;VSSKK        Host: CVM 3.0<br>     KKV&#x27; 4KKKKK LJ KKKKAL &#x27;VKK        Kernel: 5.4.119-19-0009.1<br>     V&#x27; &#x27; &#x27;VKKKK LJ KKKKV&#x27; &#x27; &#x27;V        Network: 1 Mbps<br>     .4MA.&#x27; &#x27;VKK LJ KKV&#x27; &#x27;.4Mb.        Packages: 1169 (rpm)<br>   . KKKKKA.&#x27; &#x27;V LJ V&#x27; &#x27;.4KKKKK .      Shell: bash 4.4.20<br> .4D KKKKKKKA.&#x27;&#x27; LJ &#x27;&#x27;.4KKKKKKK FA.    Terminal: /dev/pts/1<br>&lt;QDD ++++++++++++  ++++++++++++ GFD&gt;   CPU: AMD EPYC 7K62 (2) @ 2.595GHz<br> &#x27;VD KKKKKKKK&#x27;.. LJ ..&#x27;KKKKKKKK FV     GPU: 00:02.0 Cirrus Logic GD 5446<br>   &#x27; VKKKKK&#x27;. .4 LJ K. .&#x27;KKKKKV &#x27;      Memory: 1262MiB / 1721MiB<br>      &#x27;VK&#x27;. .4KK LJ KKA. .&#x27;KV&#x27;         SSD: 50GB<br>     A. . .4KKKK LJ KKKKA. . .4<br>     KKA. &#x27;KKKKK LJ KKKKK&#x27; .4KK<br>     KKSSA. VKKK LJ KKKV .4SSKK<br>              &lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;<br>               &#x27;MKKM&#x27;<br>                 &#x27;&#x27;<br></code></pre></td></tr></table></figure><p>低配置的机子做好了优化速度也能很快，本站国内的平均打开速度为 1.0s，如果不做任何优化，那么本站首页的速度可能有 4s 左右</p><h2 id="优化教程"><a href="#优化教程" class="headerlink" title="优化教程"></a>优化教程</h2><h3 id="测试速度"><a href="#测试速度" class="headerlink" title="测试速度"></a>测试速度</h3><p>首先先测试一下当前的网页速度，按 F12 打开调试控制台，选择 网络，勾选持久日志和禁用缓存，清除 Service Worker，清理日志，刷新，调试控制台下面就会显示页面加载的耗时<br><img src="https://cos.mbrjun.cn/IMGS/2022/04/15/jv.png"><br>顺便推荐一个更好用的网页测速工具：<a href="https://pagespeed.web.dev/">PageSpeed Insights</a><br><img src="https://cos.mbrjun.cn/IMGS/2022/04/15/li.png"></p><p>测试完成速度可以开始按照下面的教程优化了<br>（TIP：本站有目录功能）</p><h3 id="WebP-压缩"><a href="#WebP-压缩" class="headerlink" title="WebP 压缩"></a>WebP 压缩</h3><p>WebP 是一个高压缩比的图片格式，支持无损和有损压缩，也支持透明图层，如果你网站的图片是 png 格式提供的，压缩为 WebP 通常会有很大的提升<br>WebP 图片的体积一般只有同等分辨率下 png 图片体积的十分之一。<br>目前压缩有两种常见的方法：</p><h4 id="CDN-自动压缩"><a href="#CDN-自动压缩" class="headerlink" title="CDN 自动压缩"></a>CDN 自动压缩</h4><p>部分 CDN 可以自动给图片进行 WebP 压缩，如果客户端支持 WebP，则使用 WebP，否则提供原图<br><img src="https://cos.mbrjun.cn/IMGS/2022/04/15/nq.png"></p><h4 id="手动压缩"><a href="#手动压缩" class="headerlink" title="手动压缩"></a>手动压缩</h4><p>如果你的 CDN 不支持自动压缩，你也可以手动压缩，但是手动压缩会有一个问题，就是不支持 IE 浏览器<br>如果想要手动压缩，只需要前往 <a href="https://squoosh.app/">https://squoosh.app</a></p><h3 id="PHP-版本"><a href="#PHP-版本" class="headerlink" title="PHP 版本"></a>PHP 版本</h3><p>旧版本（5.x）的 PHP 运行 Typecho 会很慢，强烈建议更新到 7.x 或者 8.x<br>注：Typecho 近期推出了 1.2 版本，距离上次更新有五年之久，1.1 版本不兼容 PHP 7.4+</p><h3 id="数据库缓存"><a href="#数据库缓存" class="headerlink" title="数据库缓存"></a>数据库缓存</h3><p>网站加载时间（TTFB）长的一大原因是查询数据库耗时太长，采用缓存可以有效加速（用户打开网页直接使用缓存，不再查询数据库）<br>MySQL 8.0 弃用了查询缓存，所以我们需要选择一个其他的高性能缓存器，本站的数据库缓存采用了 Redis</p><h4 id="Redis-安装"><a href="#Redis-安装" class="headerlink" title="Redis 安装"></a>Redis 安装</h4><ol><li>首先安装一个 Redis 6.2.6</li><li>然后给你的 PHP 安装 Redis 插件</li><li>Typecho 内安装 TpCache</li></ol><h3 id="CDN"><a href="#CDN" class="headerlink" title="CDN"></a>CDN</h3><p>CDN（内容分发网络）可以有效加速网页静态资源，并隐藏源站 IP，如果你使用 CDN，建议把所有动态页面设置为“不缓存”，所有静态资源都设置为“365 天”</p><h3 id="宝塔缓存"><a href="#宝塔缓存" class="headerlink" title="宝塔缓存"></a>宝塔缓存</h3><p>如果你用宝塔可以整一个，效果是挺好的，免费版每日 50000 次，破解版无限制，50000 次对普通个人肯定够了，除非遇上 CC<br><img src="https://cos.mbrjun.cn/IMGS/2022/04/15/vg.png"></p><h3 id="OpCache"><a href="#OpCache" class="headerlink" title="OpCache"></a>OpCache</h3><p>脚本缓存器，直接安装即可</p><h3 id="TCP-Fast-Open"><a href="#TCP-Fast-Open" class="headerlink" title="TCP Fast Open"></a>TCP Fast Open</h3><p>该功能要求 Linux 3.7 以上，有的发行版使用老内核无法开启，使用 <code>uname -r</code> 检查 Linux 版本</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">5.4.119-19-0009.1<br></code></pre></td></tr></table></figure><p>返回值大于 3.7 即可，目前已知 CentOS 7 是不支持该功能的<br>开启方法如下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">#二选一：<br>sysctl -w net.ipv4.tcp_fastoepn=3 #上传下载都允许 TFO<br>sysctl -w net.ipv4.tcp_fastoepn=2 #服务器模式，仅上传允许<br></code></pre></td></tr></table></figure><h3 id="HTTP-x2F-3"><a href="#HTTP-x2F-3" class="headerlink" title="HTTP&#x2F;3"></a>HTTP&#x2F;3</h3><p>开启 HTTP&#x2F;3 后可以有效提高握手效率，你需要编译 <code>nginx-quic</code> 来使用该功能<br>目前最新的 HTTP&#x2F;3 版本有：h3（正式版）、h3-29（IETF）、h3-Q050（Google）<br>开启 HTTP&#x2F;3 后，你可以看到服务器发回的响应有一个 <code>alt-svc</code> 头<br>? 在这里测试你的网站是否支持 HTTP&#x2F;3<br><a href="https://http3check.net/">https://http3check.net/</a><br><img src="https://cos.mbrjun.cn/IMGS/2022/04/15/xi.png"></p><h3 id="TCP-BBR"><a href="#TCP-BBR" class="headerlink" title="TCP BBR"></a>TCP BBR</h3><p>开启 TCP BBR 可有效提高 TCP 连接性能，见此文章：<br><a href="https://blog.mbrjun.cn/archives/431">https://blog.mbrjun.cn/archives/431</a></p><h3 id="MySQL-引擎"><a href="#MySQL-引擎" class="headerlink" title="MySQL 引擎"></a>MySQL 引擎</h3><p>Typecho 旧版本使用 MySQL 更适合 MyISAM 引擎（默认就是 MyISAM），如果你设置了 Innodb，请改回 MyISAM<br><strong>如果你升级到了 Release 1.2，那么请你使用 InnoDB</strong></p><h3 id="降低压缩率"><a href="#降低压缩率" class="headerlink" title="降低压缩率"></a>降低压缩率</h3><p>动态文档压缩要消耗很长时间，请减小动态文档的压缩率，或者直接关闭压缩<br>GZip 压缩率设置为 9，TTFB 大约 500ms，设置为 4 大约 300ms，设置为 1 大约 200ms</p><hr><p>title: Typecho TTFB、加载速度优化教程<br>date: 2022-04-15 15:35:00<br>updated: 2022-04-28 00:39:56<br>categories: 网络<br>tags:</p><ul><li>网站</li><li>typecho,优化,Mysql,Nginx,建站,博客,加速,FTTB</li></ul><hr><p>很多人搭建 Typecho 之后都会觉得自己的网站有些慢，想要优化下打开速度，碰巧最近站长也在做优化，所以写一篇优化教程。</p><hr><p>先贴一下我机器的配置：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">BASH             ..                    root@MBR-Server<br>               .PLTJ.                  ---------------<br>              &lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;                 OS: Tencent OS Server 3.1 20220217<br>     KKSSV&#x27; 4KKK LJ KKKL.&#x27;VSSKK        Host: CVM 3.0<br>     KKV&#x27; 4KKKKK LJ KKKKAL &#x27;VKK        Kernel: 5.4.119-19-0009.1<br>     V&#x27; &#x27; &#x27;VKKKK LJ KKKKV&#x27; &#x27; &#x27;V        Network: 1 Mbps<br>     .4MA.&#x27; &#x27;VKK LJ KKV&#x27; &#x27;.4Mb.        Packages: 1169 (rpm)<br>   . KKKKKA.&#x27; &#x27;V LJ V&#x27; &#x27;.4KKKKK .      Shell: bash 4.4.20<br> .4D KKKKKKKA.&#x27;&#x27; LJ &#x27;&#x27;.4KKKKKKK FA.    Terminal: /dev/pts/1<br>&lt;QDD ++++++++++++  ++++++++++++ GFD&gt;   CPU: AMD EPYC 7K62 (2) @ 2.595GHz<br> &#x27;VD KKKKKKKK&#x27;.. LJ ..&#x27;KKKKKKKK FV     GPU: 00:02.0 Cirrus Logic GD 5446<br>   &#x27; VKKKKK&#x27;. .4 LJ K. .&#x27;KKKKKV &#x27;      Memory: 1262MiB / 1721MiB<br>      &#x27;VK&#x27;. .4KK LJ KKA. .&#x27;KV&#x27;         SSD: 50GB<br>     A. . .4KKKK LJ KKKKA. . .4<br>     KKA. &#x27;KKKKK LJ KKKKK&#x27; .4KK<br>     KKSSA. VKKK LJ KKKV .4SSKK<br>              &lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;<br>               &#x27;MKKM&#x27;<br>                 &#x27;&#x27;<br></code></pre></td></tr></table></figure><p>低配置的机子做好了优化速度也能很快，本站国内的平均打开速度为 1.0s，如果不做任何优化，那么本站首页的速度可能有 4s 左右</p><h2 id="优化教程-1"><a href="#优化教程-1" class="headerlink" title="优化教程"></a>优化教程</h2><h3 id="测试速度-1"><a href="#测试速度-1" class="headerlink" title="测试速度"></a>测试速度</h3><p>首先先测试一下当前的网页速度，按 F12 打开调试控制台，选择 网络，勾选持久日志和禁用缓存，清除 Service Worker，清理日志，刷新，调试控制台下面就会显示页面加载的耗时<br><img src="https://cos.mbrjun.cn/IMGS/2022/04/15/jv.png"><br>顺便推荐一个更好用的网页测速工具：<a href="https://pagespeed.web.dev/">PageSpeed Insights</a><br><img src="https://cos.mbrjun.cn/IMGS/2022/04/15/li.png"></p><p>测试完成速度可以开始按照下面的教程优化了<br>（TIP：本站有目录功能）</p><h3 id="WebP-压缩-1"><a href="#WebP-压缩-1" class="headerlink" title="WebP 压缩"></a>WebP 压缩</h3><p>WebP 是一个高压缩比的图片格式，支持无损和有损压缩，也支持透明图层，如果你网站的图片是 png 格式提供的，压缩为 WebP 通常会有很大的提升<br>WebP 图片的体积一般只有同等分辨率下 png 图片体积的十分之一。<br>目前压缩有两种常见的方法：</p><h4 id="CDN-自动压缩-1"><a href="#CDN-自动压缩-1" class="headerlink" title="CDN 自动压缩"></a>CDN 自动压缩</h4><p>部分 CDN 可以自动给图片进行 WebP 压缩，如果客户端支持 WebP，则使用 WebP，否则提供原图<br><img src="https://cos.mbrjun.cn/IMGS/2022/04/15/nq.png"></p><h4 id="手动压缩-1"><a href="#手动压缩-1" class="headerlink" title="手动压缩"></a>手动压缩</h4><p>如果你的 CDN 不支持自动压缩，你也可以手动压缩，但是手动压缩会有一个问题，就是不支持 IE 浏览器<br>如果想要手动压缩，只需要前往 <a href="https://squoosh.app/">https://squoosh.app</a></p><h3 id="PHP-版本-1"><a href="#PHP-版本-1" class="headerlink" title="PHP 版本"></a>PHP 版本</h3><p>旧版本（5.x）的 PHP 运行 Typecho 会很慢，强烈建议更新到 7.x 或者 8.x<br>注：Typecho 近期推出了 1.2 版本，距离上次更新有五年之久，1.1 版本不兼容 PHP 7.4+</p><h3 id="数据库缓存-1"><a href="#数据库缓存-1" class="headerlink" title="数据库缓存"></a>数据库缓存</h3><p>网站加载时间（TTFB）长的一大原因是查询数据库耗时太长，采用缓存可以有效加速（用户打开网页直接使用缓存，不再查询数据库）<br>MySQL 8.0 弃用了查询缓存，所以我们需要选择一个其他的高性能缓存器，本站的数据库缓存采用了 Redis</p><h4 id="Redis-安装-1"><a href="#Redis-安装-1" class="headerlink" title="Redis 安装"></a>Redis 安装</h4><ol><li>首先安装一个 Redis 6.2.6</li><li>然后给你的 PHP 安装 Redis 插件</li><li>Typecho 内安装 TpCache</li></ol><h3 id="CDN-1"><a href="#CDN-1" class="headerlink" title="CDN"></a>CDN</h3><p>CDN（内容分发网络）可以有效加速网页静态资源，并隐藏源站 IP，如果你使用 CDN，建议把所有动态页面设置为“不缓存”，所有静态资源都设置为“365 天”</p><h3 id="宝塔缓存-1"><a href="#宝塔缓存-1" class="headerlink" title="宝塔缓存"></a>宝塔缓存</h3><p>如果你用宝塔可以整一个，效果是挺好的，免费版每日 50000 次，破解版无限制，50000 次对普通个人肯定够了，除非遇上 CC<br><img src="https://cos.mbrjun.cn/IMGS/2022/04/15/vg.png"></p><h3 id="OpCache-1"><a href="#OpCache-1" class="headerlink" title="OpCache"></a>OpCache</h3><p>脚本缓存器，直接安装即可</p><h3 id="TCP-Fast-Open-1"><a href="#TCP-Fast-Open-1" class="headerlink" title="TCP Fast Open"></a>TCP Fast Open</h3><p>该功能要求 Linux 3.7 以上，有的发行版使用老内核无法开启，使用 <code>uname -r</code> 检查 Linux 版本</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">5.4.119-19-0009.1<br></code></pre></td></tr></table></figure><p>返回值大于 3.7 即可，目前已知 CentOS 7 是不支持该功能的<br>开启方法如下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">#二选一：<br>sysctl -w net.ipv4.tcp_fastoepn=3 #上传下载都允许 TFO<br>sysctl -w net.ipv4.tcp_fastoepn=2 #服务器模式，仅上传允许<br></code></pre></td></tr></table></figure><h3 id="HTTP-x2F-3-1"><a href="#HTTP-x2F-3-1" class="headerlink" title="HTTP&#x2F;3"></a>HTTP&#x2F;3</h3><p>开启 HTTP&#x2F;3 后可以有效提高握手效率，你需要编译 <code>nginx-quic</code> 来使用该功能<br>目前最新的 HTTP&#x2F;3 版本有：h3（正式版）、h3-29（IETF）、h3-Q050（Google）<br>开启 HTTP&#x2F;3 后，你可以看到服务器发回的响应有一个 <code>alt-svc</code> 头<br>? 在这里测试你的网站是否支持 HTTP&#x2F;3<br><a href="https://http3check.net/">https://http3check.net/</a><br><img src="https://cos.mbrjun.cn/IMGS/2022/04/15/xi.png"></p><h3 id="TCP-BBR-1"><a href="#TCP-BBR-1" class="headerlink" title="TCP BBR"></a>TCP BBR</h3><p>开启 TCP BBR 可有效提高 TCP 连接性能，见此文章：<br><a href="https://blog.mbrjun.cn/archives/431">https://blog.mbrjun.cn/archives/431</a></p><h3 id="MySQL-引擎-1"><a href="#MySQL-引擎-1" class="headerlink" title="MySQL 引擎"></a>MySQL 引擎</h3><p>Typecho 旧版本使用 MySQL 更适合 MyISAM 引擎（默认就是 MyISAM），如果你设置了 Innodb，请改回 MyISAM<br><strong>如果你升级到了 Release 1.2，那么请你使用 InnoDB</strong></p><h3 id="降低压缩率-1"><a href="#降低压缩率-1" class="headerlink" title="降低压缩率"></a>降低压缩率</h3><p>动态文档压缩要消耗很长时间，请减小动态文档的压缩率，或者直接关闭压缩<br>GZip 压缩率设置为 9，TTFB 大约 500ms，设置为 4 大约 300ms，设置为 1 大约 200ms</p><hr><p>title: Typecho TTFB、加载速度优化教程<br>date: 2022-04-15 15:35:00<br>updated: 2022-04-28 00:39:56<br>categories: Web（PHP&#x2F;ASP&#x2F;HTML）<br>tags:</p><ul><li>网站</li><li>typecho,优化,Mysql,Nginx,建站,博客,加速,FTTB</li></ul><hr><p>很多人搭建 Typecho 之后都会觉得自己的网站有些慢，想要优化下打开速度，碰巧最近站长也在做优化，所以写一篇优化教程。</p><hr><p>先贴一下我机器的配置：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">BASH             ..                    root@MBR-Server<br>               .PLTJ.                  ---------------<br>              &lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;                 OS: Tencent OS Server 3.1 20220217<br>     KKSSV&#x27; 4KKK LJ KKKL.&#x27;VSSKK        Host: CVM 3.0<br>     KKV&#x27; 4KKKKK LJ KKKKAL &#x27;VKK        Kernel: 5.4.119-19-0009.1<br>     V&#x27; &#x27; &#x27;VKKKK LJ KKKKV&#x27; &#x27; &#x27;V        Network: 1 Mbps<br>     .4MA.&#x27; &#x27;VKK LJ KKV&#x27; &#x27;.4Mb.        Packages: 1169 (rpm)<br>   . KKKKKA.&#x27; &#x27;V LJ V&#x27; &#x27;.4KKKKK .      Shell: bash 4.4.20<br> .4D KKKKKKKA.&#x27;&#x27; LJ &#x27;&#x27;.4KKKKKKK FA.    Terminal: /dev/pts/1<br>&lt;QDD ++++++++++++  ++++++++++++ GFD&gt;   CPU: AMD EPYC 7K62 (2) @ 2.595GHz<br> &#x27;VD KKKKKKKK&#x27;.. LJ ..&#x27;KKKKKKKK FV     GPU: 00:02.0 Cirrus Logic GD 5446<br>   &#x27; VKKKKK&#x27;. .4 LJ K. .&#x27;KKKKKV &#x27;      Memory: 1262MiB / 1721MiB<br>      &#x27;VK&#x27;. .4KK LJ KKA. .&#x27;KV&#x27;         SSD: 50GB<br>     A. . .4KKKK LJ KKKKA. . .4<br>     KKA. &#x27;KKKKK LJ KKKKK&#x27; .4KK<br>     KKSSA. VKKK LJ KKKV .4SSKK<br>              &lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;<br>               &#x27;MKKM&#x27;<br>                 &#x27;&#x27;<br></code></pre></td></tr></table></figure><p>低配置的机子做好了优化速度也能很快，本站国内的平均打开速度为 1.0s，如果不做任何优化，那么本站首页的速度可能有 4s 左右</p><h2 id="优化教程-2"><a href="#优化教程-2" class="headerlink" title="优化教程"></a>优化教程</h2><h3 id="测试速度-2"><a href="#测试速度-2" class="headerlink" title="测试速度"></a>测试速度</h3><p>首先先测试一下当前的网页速度，按 F12 打开调试控制台，选择 网络，勾选持久日志和禁用缓存，清除 Service Worker，清理日志，刷新，调试控制台下面就会显示页面加载的耗时<br><img src="https://cos.mbrjun.cn/IMGS/2022/04/15/jv.png"><br>顺便推荐一个更好用的网页测速工具：<a href="https://pagespeed.web.dev/">PageSpeed Insights</a><br><img src="https://cos.mbrjun.cn/IMGS/2022/04/15/li.png"></p><p>测试完成速度可以开始按照下面的教程优化了<br>（TIP：本站有目录功能）</p><h3 id="WebP-压缩-2"><a href="#WebP-压缩-2" class="headerlink" title="WebP 压缩"></a>WebP 压缩</h3><p>WebP 是一个高压缩比的图片格式，支持无损和有损压缩，也支持透明图层，如果你网站的图片是 png 格式提供的，压缩为 WebP 通常会有很大的提升<br>WebP 图片的体积一般只有同等分辨率下 png 图片体积的十分之一。<br>目前压缩有两种常见的方法：</p><h4 id="CDN-自动压缩-2"><a href="#CDN-自动压缩-2" class="headerlink" title="CDN 自动压缩"></a>CDN 自动压缩</h4><p>部分 CDN 可以自动给图片进行 WebP 压缩，如果客户端支持 WebP，则使用 WebP，否则提供原图<br><img src="https://cos.mbrjun.cn/IMGS/2022/04/15/nq.png"></p><h4 id="手动压缩-2"><a href="#手动压缩-2" class="headerlink" title="手动压缩"></a>手动压缩</h4><p>如果你的 CDN 不支持自动压缩，你也可以手动压缩，但是手动压缩会有一个问题，就是不支持 IE 浏览器<br>如果想要手动压缩，只需要前往 <a href="https://squoosh.app/">https://squoosh.app</a></p><h3 id="PHP-版本-2"><a href="#PHP-版本-2" class="headerlink" title="PHP 版本"></a>PHP 版本</h3><p>旧版本（5.x）的 PHP 运行 Typecho 会很慢，强烈建议更新到 7.x 或者 8.x<br>注：Typecho 近期推出了 1.2 版本，距离上次更新有五年之久，1.1 版本不兼容 PHP 7.4+</p><h3 id="数据库缓存-2"><a href="#数据库缓存-2" class="headerlink" title="数据库缓存"></a>数据库缓存</h3><p>网站加载时间（TTFB）长的一大原因是查询数据库耗时太长，采用缓存可以有效加速（用户打开网页直接使用缓存，不再查询数据库）<br>MySQL 8.0 弃用了查询缓存，所以我们需要选择一个其他的高性能缓存器，本站的数据库缓存采用了 Redis</p><h4 id="Redis-安装-2"><a href="#Redis-安装-2" class="headerlink" title="Redis 安装"></a>Redis 安装</h4><ol><li>首先安装一个 Redis 6.2.6</li><li>然后给你的 PHP 安装 Redis 插件</li><li>Typecho 内安装 TpCache</li></ol><h3 id="CDN-2"><a href="#CDN-2" class="headerlink" title="CDN"></a>CDN</h3><p>CDN（内容分发网络）可以有效加速网页静态资源，并隐藏源站 IP，如果你使用 CDN，建议把所有动态页面设置为“不缓存”，所有静态资源都设置为“365 天”</p><h3 id="宝塔缓存-2"><a href="#宝塔缓存-2" class="headerlink" title="宝塔缓存"></a>宝塔缓存</h3><p>如果你用宝塔可以整一个，效果是挺好的，免费版每日 50000 次，破解版无限制，50000 次对普通个人肯定够了，除非遇上 CC<br><img src="https://cos.mbrjun.cn/IMGS/2022/04/15/vg.png"></p><h3 id="OpCache-2"><a href="#OpCache-2" class="headerlink" title="OpCache"></a>OpCache</h3><p>脚本缓存器，直接安装即可</p><h3 id="TCP-Fast-Open-2"><a href="#TCP-Fast-Open-2" class="headerlink" title="TCP Fast Open"></a>TCP Fast Open</h3><p>该功能要求 Linux 3.7 以上，有的发行版使用老内核无法开启，使用 <code>uname -r</code> 检查 Linux 版本</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">5.4.119-19-0009.1<br></code></pre></td></tr></table></figure><p>返回值大于 3.7 即可，目前已知 CentOS 7 是不支持该功能的<br>开启方法如下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">#二选一：<br>sysctl -w net.ipv4.tcp_fastoepn=3 #上传下载都允许 TFO<br>sysctl -w net.ipv4.tcp_fastoepn=2 #服务器模式，仅上传允许<br></code></pre></td></tr></table></figure><h3 id="HTTP-x2F-3-2"><a href="#HTTP-x2F-3-2" class="headerlink" title="HTTP&#x2F;3"></a>HTTP&#x2F;3</h3><p>开启 HTTP&#x2F;3 后可以有效提高握手效率，你需要编译 <code>nginx-quic</code> 来使用该功能<br>目前最新的 HTTP&#x2F;3 版本有：h3（正式版）、h3-29（IETF）、h3-Q050（Google）<br>开启 HTTP&#x2F;3 后，你可以看到服务器发回的响应有一个 <code>alt-svc</code> 头<br>? 在这里测试你的网站是否支持 HTTP&#x2F;3<br><a href="https://http3check.net/">https://http3check.net/</a><br><img src="https://cos.mbrjun.cn/IMGS/2022/04/15/xi.png"></p><h3 id="TCP-BBR-2"><a href="#TCP-BBR-2" class="headerlink" title="TCP BBR"></a>TCP BBR</h3><p>开启 TCP BBR 可有效提高 TCP 连接性能，见此文章：<br><a href="https://blog.mbrjun.cn/archives/431">https://blog.mbrjun.cn/archives/431</a></p><h3 id="MySQL-引擎-2"><a href="#MySQL-引擎-2" class="headerlink" title="MySQL 引擎"></a>MySQL 引擎</h3><p>Typecho 旧版本使用 MySQL 更适合 MyISAM 引擎（默认就是 MyISAM），如果你设置了 Innodb，请改回 MyISAM<br><strong>如果你升级到了 Release 1.2，那么请你使用 InnoDB</strong></p><h3 id="降低压缩率-2"><a href="#降低压缩率-2" class="headerlink" title="降低压缩率"></a>降低压缩率</h3><p>动态文档压缩要消耗很长时间，请减小动态文档的压缩率，或者直接关闭压缩<br>GZip 压缩率设置为 9，TTFB 大约 500ms，设置为 4 大约 300ms，设置为 1 大约 200ms</p><hr><p>title: Typecho TTFB、加载速度优化教程<br>date: 2022-04-15 15:35:00<br>updated: 2022-04-28 00:39:56<br>categories: UDP&#x2F;QUIC<br>tags:</p><ul><li>网站</li><li>typecho,优化,Mysql,Nginx,建站,博客,加速,FTTB</li></ul><hr><p>很多人搭建 Typecho 之后都会觉得自己的网站有些慢，想要优化下打开速度，碰巧最近站长也在做优化，所以写一篇优化教程。</p><hr><p>先贴一下我机器的配置：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">BASH             ..                    root@MBR-Server<br>               .PLTJ.                  ---------------<br>              &lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;                 OS: Tencent OS Server 3.1 20220217<br>     KKSSV&#x27; 4KKK LJ KKKL.&#x27;VSSKK        Host: CVM 3.0<br>     KKV&#x27; 4KKKKK LJ KKKKAL &#x27;VKK        Kernel: 5.4.119-19-0009.1<br>     V&#x27; &#x27; &#x27;VKKKK LJ KKKKV&#x27; &#x27; &#x27;V        Network: 1 Mbps<br>     .4MA.&#x27; &#x27;VKK LJ KKV&#x27; &#x27;.4Mb.        Packages: 1169 (rpm)<br>   . KKKKKA.&#x27; &#x27;V LJ V&#x27; &#x27;.4KKKKK .      Shell: bash 4.4.20<br> .4D KKKKKKKA.&#x27;&#x27; LJ &#x27;&#x27;.4KKKKKKK FA.    Terminal: /dev/pts/1<br>&lt;QDD ++++++++++++  ++++++++++++ GFD&gt;   CPU: AMD EPYC 7K62 (2) @ 2.595GHz<br> &#x27;VD KKKKKKKK&#x27;.. LJ ..&#x27;KKKKKKKK FV     GPU: 00:02.0 Cirrus Logic GD 5446<br>   &#x27; VKKKKK&#x27;. .4 LJ K. .&#x27;KKKKKV &#x27;      Memory: 1262MiB / 1721MiB<br>      &#x27;VK&#x27;. .4KK LJ KKA. .&#x27;KV&#x27;         SSD: 50GB<br>     A. . .4KKKK LJ KKKKA. . .4<br>     KKA. &#x27;KKKKK LJ KKKKK&#x27; .4KK<br>     KKSSA. VKKK LJ KKKV .4SSKK<br>              &lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;<br>               &#x27;MKKM&#x27;<br>                 &#x27;&#x27;<br></code></pre></td></tr></table></figure><p>低配置的机子做好了优化速度也能很快，本站国内的平均打开速度为 1.0s，如果不做任何优化，那么本站首页的速度可能有 4s 左右</p><h2 id="优化教程-3"><a href="#优化教程-3" class="headerlink" title="优化教程"></a>优化教程</h2><h3 id="测试速度-3"><a href="#测试速度-3" class="headerlink" title="测试速度"></a>测试速度</h3><p>首先先测试一下当前的网页速度，按 F12 打开调试控制台，选择 网络，勾选持久日志和禁用缓存，清除 Service Worker，清理日志，刷新，调试控制台下面就会显示页面加载的耗时<br><img src="https://cos.mbrjun.cn/IMGS/2022/04/15/jv.png"><br>顺便推荐一个更好用的网页测速工具：<a href="https://pagespeed.web.dev/">PageSpeed Insights</a><br><img src="https://cos.mbrjun.cn/IMGS/2022/04/15/li.png"></p><p>测试完成速度可以开始按照下面的教程优化了<br>（TIP：本站有目录功能）</p><h3 id="WebP-压缩-3"><a href="#WebP-压缩-3" class="headerlink" title="WebP 压缩"></a>WebP 压缩</h3><p>WebP 是一个高压缩比的图片格式，支持无损和有损压缩，也支持透明图层，如果你网站的图片是 png 格式提供的，压缩为 WebP 通常会有很大的提升<br>WebP 图片的体积一般只有同等分辨率下 png 图片体积的十分之一。<br>目前压缩有两种常见的方法：</p><h4 id="CDN-自动压缩-3"><a href="#CDN-自动压缩-3" class="headerlink" title="CDN 自动压缩"></a>CDN 自动压缩</h4><p>部分 CDN 可以自动给图片进行 WebP 压缩，如果客户端支持 WebP，则使用 WebP，否则提供原图<br><img src="https://cos.mbrjun.cn/IMGS/2022/04/15/nq.png"></p><h4 id="手动压缩-3"><a href="#手动压缩-3" class="headerlink" title="手动压缩"></a>手动压缩</h4><p>如果你的 CDN 不支持自动压缩，你也可以手动压缩，但是手动压缩会有一个问题，就是不支持 IE 浏览器<br>如果想要手动压缩，只需要前往 <a href="https://squoosh.app/">https://squoosh.app</a></p><h3 id="PHP-版本-3"><a href="#PHP-版本-3" class="headerlink" title="PHP 版本"></a>PHP 版本</h3><p>旧版本（5.x）的 PHP 运行 Typecho 会很慢，强烈建议更新到 7.x 或者 8.x<br>注：Typecho 近期推出了 1.2 版本，距离上次更新有五年之久，1.1 版本不兼容 PHP 7.4+</p><h3 id="数据库缓存-3"><a href="#数据库缓存-3" class="headerlink" title="数据库缓存"></a>数据库缓存</h3><p>网站加载时间（TTFB）长的一大原因是查询数据库耗时太长，采用缓存可以有效加速（用户打开网页直接使用缓存，不再查询数据库）<br>MySQL 8.0 弃用了查询缓存，所以我们需要选择一个其他的高性能缓存器，本站的数据库缓存采用了 Redis</p><h4 id="Redis-安装-3"><a href="#Redis-安装-3" class="headerlink" title="Redis 安装"></a>Redis 安装</h4><ol><li>首先安装一个 Redis 6.2.6</li><li>然后给你的 PHP 安装 Redis 插件</li><li>Typecho 内安装 TpCache</li></ol><h3 id="CDN-3"><a href="#CDN-3" class="headerlink" title="CDN"></a>CDN</h3><p>CDN（内容分发网络）可以有效加速网页静态资源，并隐藏源站 IP，如果你使用 CDN，建议把所有动态页面设置为“不缓存”，所有静态资源都设置为“365 天”</p><h3 id="宝塔缓存-3"><a href="#宝塔缓存-3" class="headerlink" title="宝塔缓存"></a>宝塔缓存</h3><p>如果你用宝塔可以整一个，效果是挺好的，免费版每日 50000 次，破解版无限制，50000 次对普通个人肯定够了，除非遇上 CC<br><img src="https://cos.mbrjun.cn/IMGS/2022/04/15/vg.png"></p><h3 id="OpCache-3"><a href="#OpCache-3" class="headerlink" title="OpCache"></a>OpCache</h3><p>脚本缓存器，直接安装即可</p><h3 id="TCP-Fast-Open-3"><a href="#TCP-Fast-Open-3" class="headerlink" title="TCP Fast Open"></a>TCP Fast Open</h3><p>该功能要求 Linux 3.7 以上，有的发行版使用老内核无法开启，使用 <code>uname -r</code> 检查 Linux 版本</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">5.4.119-19-0009.1<br></code></pre></td></tr></table></figure><p>返回值大于 3.7 即可，目前已知 CentOS 7 是不支持该功能的<br>开启方法如下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">#二选一：<br>sysctl -w net.ipv4.tcp_fastoepn=3 #上传下载都允许 TFO<br>sysctl -w net.ipv4.tcp_fastoepn=2 #服务器模式，仅上传允许<br></code></pre></td></tr></table></figure><h3 id="HTTP-x2F-3-3"><a href="#HTTP-x2F-3-3" class="headerlink" title="HTTP&#x2F;3"></a>HTTP&#x2F;3</h3><p>开启 HTTP&#x2F;3 后可以有效提高握手效率，你需要编译 <code>nginx-quic</code> 来使用该功能<br>目前最新的 HTTP&#x2F;3 版本有：h3（正式版）、h3-29（IETF）、h3-Q050（Google）<br>开启 HTTP&#x2F;3 后，你可以看到服务器发回的响应有一个 <code>alt-svc</code> 头<br>? 在这里测试你的网站是否支持 HTTP&#x2F;3<br><a href="https://http3check.net/">https://http3check.net/</a><br><img src="https://cos.mbrjun.cn/IMGS/2022/04/15/xi.png"></p><h3 id="TCP-BBR-3"><a href="#TCP-BBR-3" class="headerlink" title="TCP BBR"></a>TCP BBR</h3><p>开启 TCP BBR 可有效提高 TCP 连接性能，见此文章：<br><a href="https://blog.mbrjun.cn/archives/431">https://blog.mbrjun.cn/archives/431</a></p><h3 id="MySQL-引擎-3"><a href="#MySQL-引擎-3" class="headerlink" title="MySQL 引擎"></a>MySQL 引擎</h3><p>Typecho 旧版本使用 MySQL 更适合 MyISAM 引擎（默认就是 MyISAM），如果你设置了 Innodb，请改回 MyISAM<br><strong>如果你升级到了 Release 1.2，那么请你使用 InnoDB</strong></p><h3 id="降低压缩率-3"><a href="#降低压缩率-3" class="headerlink" title="降低压缩率"></a>降低压缩率</h3><p>动态文档压缩要消耗很长时间，请减小动态文档的压缩率，或者直接关闭压缩<br>GZip 压缩率设置为 9，TTFB 大约 500ms，设置为 4 大约 300ms，设置为 1 大约 200ms</p>]]></content>
    
    
    <summary type="html">&lt;p&gt;很多人搭建 Typecho 之后都会觉得自己的网站有些慢，想要优化下打开速度，碰巧最近站长也在做优化，所以写一篇优化教程。&lt;/p&gt;</summary>
    
    
    
    <category term="教程" scheme="https://blog.mbrjun.cn/categories/%E6%95%99%E7%A8%8B/"/>
    
    
    <category term="网站" scheme="https://blog.mbrjun.cn/tags/%E7%BD%91%E7%AB%99/"/>
    
    <category term="typecho" scheme="https://blog.mbrjun.cn/tags/typecho/"/>
    
    <category term="优化" scheme="https://blog.mbrjun.cn/tags/%E4%BC%98%E5%8C%96/"/>
    
    <category term="Mysql" scheme="https://blog.mbrjun.cn/tags/Mysql/"/>
    
    <category term="Nginx" scheme="https://blog.mbrjun.cn/tags/Nginx/"/>
    
    <category term="建站" scheme="https://blog.mbrjun.cn/tags/%E5%BB%BA%E7%AB%99/"/>
    
    <category term="博客" scheme="https://blog.mbrjun.cn/tags/%E5%8D%9A%E5%AE%A2/"/>
    
    <category term="加速" scheme="https://blog.mbrjun.cn/tags/%E5%8A%A0%E9%80%9F/"/>
    
    <category term="FTTB" scheme="https://blog.mbrjun.cn/tags/FTTB/"/>
    
  </entry>
  
  <entry>
    <title>Linux 开启 TCP BBR</title>
    <link href="https://blog.mbrjun.cn/archives/431/"/>
    <id>https://blog.mbrjun.cn/archives/431/</id>
    <published>2022-04-11T12:05:35.000Z</published>
    <updated>2022-04-11T12:05:35.000Z</updated>
    
    <content type="html"><![CDATA[<p>TCP BBR（Bottleneck Bandwidth and Round-trip propagation time）是由Google设计，于2016年发布的拥塞算法。</p><p><img src="https://cos.mbrjun.cn/IMGS/2022/04/11/lb.svg"></p><span id="more"></span><p>该算法认为随着网络接口控制器逐渐进入千兆速度时，与缓冲膨胀相关的延迟相比丢包更应该被认为是识别拥塞的主要决定因素，所以基于延迟模型的拥塞控制算法（如BBR）会有更高的吞吐量和更低的延迟。<br>在大多数 Linux 发行版中，cubic 通常是默认设置，但我们发现 htcp 通常效果更好。如果 BBR 在您的系统上可用，您可能还想尝试它。</p><hr><h2 id="检查内核兼容"><a href="#检查内核兼容" class="headerlink" title="检查内核兼容"></a>检查内核兼容</h2><p>首先检测内核是否支持 TCP BBR</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">sysctl net.ipv4.tcp_available_congestion_control | grep bbr<br></code></pre></td></tr></table></figure><p>如果支持，会有类似这样的返回</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">net.ipv4.tcp_available_congestion_control = reno cubic bbr<br></code></pre></td></tr></table></figure><p>如果没有任何返回，说明内核不支持，目前已知不支持 TCP BBR 的发行版有 PVE</p><h2 id="开启-BBR"><a href="#开启-BBR" class="headerlink" title="开启 BBR"></a>开启 BBR</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">sysctl -w net.ipv4.tcp_congestion_control=bbr<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;TCP BBR（Bottleneck Bandwidth and Round-trip propagation time）是由Google设计，于2016年发布的拥塞算法。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://cos.mbrjun.cn/IMGS/2022/04/11/lb.svg&quot;&gt;&lt;/p&gt;</summary>
    
    
    
    <category term="网络" scheme="https://blog.mbrjun.cn/categories/%E7%BD%91%E7%BB%9C/"/>
    
    
    <category term="Linux" scheme="https://blog.mbrjun.cn/tags/Linux/"/>
    
    <category term="TCP" scheme="https://blog.mbrjun.cn/tags/TCP/"/>
    
    <category term="Google" scheme="https://blog.mbrjun.cn/tags/Google/"/>
    
    <category term="BBR" scheme="https://blog.mbrjun.cn/tags/BBR/"/>
    
    <category term="拥塞控制" scheme="https://blog.mbrjun.cn/tags/%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6/"/>
    
    <category term="TCP BBR" scheme="https://blog.mbrjun.cn/tags/TCP-BBR/"/>
    
    <category term="cubic" scheme="https://blog.mbrjun.cn/tags/cubic/"/>
    
  </entry>
  
  <entry>
    <title>解决 OpenWrt ZeroTier 报错 Error relocating</title>
    <link href="https://blog.mbrjun.cn/archives/430/"/>
    <id>https://blog.mbrjun.cn/archives/430/</id>
    <published>2022-04-10T06:46:00.000Z</published>
    <updated>2022-04-27T16:26:03.000Z</updated>
    
    <content type="html"><![CDATA[<p>完整的报错如下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs plaintext"># service zerotier restart<br>Generate secret - please wait...<br>Error relocating /usr/bin/zerotier-idtool: _ZNSt19basic_ostringstreamIcSt11char_traitsIcESaIcEEC1Ev: symbol not found<br>Error relocating /usr/bin/zerotier-idtool: _ZSt28__throw_bad_array_new_lengthv: symbol not found<br>Error relocating /usr/bin/zerotier-idtool: _ZNSt18basic_stringstreamIcSt11char_traitsIcESaIcEEC1Ev: symbol not found<br></code></pre></td></tr></table></figure><span id="more"></span><hr><h2 id="原因"><a href="#原因" class="headerlink" title="原因"></a>原因</h2><p>这个报错通常是手动更新 ZeroTier 时出现的，如果你是手动安装的，那你应该在安装时会看到这样的信息：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">Multiple packages (libgcc1 and libgcc1) providing same name marked HOLD or PREFER. Using latest.<br>Multiple packages (libgcc1 and libgcc1) providing same name marked HOLD or PREFER. Using latest.<br>Multiple packages (libpthread and libpthread) providing same name marked HOLD or PREFER. Using latest.<br>Multiple packages (libstdcpp6 and libstdcpp6) providing same name marked HOLD or PREFER. Using latest.<br></code></pre></td></tr></table></figure><p>引发这个问题的原因就是依赖库没有更新，只需要简单的更新依赖库即可！</p><h2 id="解决方法"><a href="#解决方法" class="headerlink" title="解决方法"></a>解决方法</h2><h3 id="通过-LuCI-安装"><a href="#通过-LuCI-安装" class="headerlink" title="通过 LuCI 安装"></a>通过 LuCI 安装</h3><p><img src="https://cos.mbrjun.cn/IMGS/2022/04/10/lg.png"></p><p>如图，分别安装三个软件包：<code>libgcc1</code>、<code>libpthread6</code>、<code>libstdcpp6</code><br>安装完成后重新安装&#x2F;更新 ZeroTier</p><h3 id="通过-opkg-安装"><a href="#通过-opkg-安装" class="headerlink" title="通过 opkg 安装"></a>通过 opkg 安装</h3><p>使用任意方法（如 SSH）连接到设备，并进入 ash 命令解释器：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">&gt; ssh root@hydrogen.mbr<br>root@hydrogen.mbr&#x27;s password:<br><br>BusyBox v1.33.2 (2021-12-31 08:05:40 UTC) built-in shell (ash)<br></code></pre></td></tr></table></figure><p>输入下面的命令</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs plaintext">opkg update<br>opkg install libgcc1<br>opkg install libpthread6<br>opkg install libstdcpp6<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <summary type="html">&lt;p&gt;完整的报错如下：&lt;/p&gt;
&lt;figure class=&quot;highlight plaintext&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;code class=&quot;hljs plaintext&quot;&gt;# service zerotier restart&lt;br&gt;Generate secret - please wait...&lt;br&gt;Error relocating /usr/bin/zerotier-idtool: _ZNSt19basic_ostringstreamIcSt11char_traitsIcESaIcEEC1Ev: symbol not found&lt;br&gt;Error relocating /usr/bin/zerotier-idtool: _ZSt28__throw_bad_array_new_lengthv: symbol not found&lt;br&gt;Error relocating /usr/bin/zerotier-idtool: _ZNSt18basic_stringstreamIcSt11char_traitsIcESaIcEEC1Ev: symbol not found&lt;br&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;</summary>
    
    
    
    <category term="网络" scheme="https://blog.mbrjun.cn/categories/%E7%BD%91%E7%BB%9C/"/>
    
    
    <category term="OpenWrt" scheme="https://blog.mbrjun.cn/tags/OpenWrt/"/>
    
    <category term="ZeroTier" scheme="https://blog.mbrjun.cn/tags/ZeroTier/"/>
    
    <category term="异地组网" scheme="https://blog.mbrjun.cn/tags/%E5%BC%82%E5%9C%B0%E7%BB%84%E7%BD%91/"/>
    
  </entry>
  
</feed>
